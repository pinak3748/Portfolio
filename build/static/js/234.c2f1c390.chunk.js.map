{"version":3,"file":"static/js/234.c2f1c390.chunk.js","mappings":"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","sources":["../node_modules/@rexxars/eventsource-polyfill/src/eventsource.js","../node_modules/@sanity/client/lib/assets/assetsClient.js","../node_modules/@sanity/client/lib/auth/authClient.js","../node_modules/@sanity/client/lib/config.js","../node_modules/@sanity/client/lib/data/dataMethods.js","../node_modules/@sanity/client/lib/data/encodeQueryString.js","../node_modules/@sanity/client/lib/data/listen.js","../node_modules/@sanity/client/lib/data/patch.js","../node_modules/@sanity/client/lib/data/transaction.js","../node_modules/@sanity/client/lib/datasets/datasetsClient.js","../node_modules/@sanity/client/lib/http/browserMiddleware.js","../node_modules/@sanity/client/lib/http/errors.js","../node_modules/@sanity/client/lib/http/queryString.js","../node_modules/@sanity/client/lib/http/request.js","../node_modules/@sanity/client/lib/http/requestOptions.js","../node_modules/@sanity/client/lib/projects/projectsClient.js","../node_modules/@sanity/client/lib/sanityClient.js","../node_modules/@sanity/client/lib/users/usersClient.js","../node_modules/@sanity/client/lib/util/defaults.js","../node_modules/@sanity/client/lib/util/getSelection.js","../node_modules/@sanity/client/lib/util/once.js","../node_modules/@sanity/client/lib/util/pick.js","../node_modules/@sanity/client/lib/validators.js","../node_modules/@sanity/client/lib/warnings.js","../node_modules/@sanity/eventsource/browser.js","../node_modules/@sanity/generate-help-url/index.js","../node_modules/@sanity/image-url/src/parseAssetId.ts","../node_modules/@sanity/image-url/src/parseSource.ts","../node_modules/@sanity/image-url/src/urlForImage.ts","../node_modules/@sanity/image-url/src/builder.ts","../node_modules/@sanity/observable/lib/SanityObservableMinimal.js","../node_modules/@sanity/observable/minimal.js","../node_modules/@sanity/observable/operators/filter.js","../node_modules/@sanity/observable/operators/map.js","../node_modules/@sanity/observable/operators/reduce.js","../node_modules/deep-assign/index.js","../node_modules/get-it/index.js","../node_modules/get-it/src/index.js","../node_modules/get-it/src/middleware/defaultOptionsProcessor.js","../node_modules/get-it/src/middleware/defaultOptionsValidator.js","../node_modules/get-it/src/middleware/jsonRequest.js","../node_modules/get-it/src/middleware/jsonResponse.js","../node_modules/get-it/src/middleware/observable.js","../node_modules/get-it/src/middleware/progress/browser-progress.js","../node_modules/get-it/src/middleware/progress/index.js","../node_modules/get-it/src/request/browser-request.js","../node_modules/get-it/src/request/browser/fetchXhr.js","../node_modules/get-it/src/request/index.js","../node_modules/get-it/src/util/global.js","../node_modules/get-it/src/util/middlewareReducer.js","../node_modules/is-obj/index.js","../node_modules/is-plain-object/index.js","../node_modules/isobject/index.js","../node_modules/make-error/index.js","../node_modules/nano-pubsub/index.js","../node_modules/parse-headers/parse-headers.js","../node_modules/querystringify/index.js","../node_modules/requires-port/index.js","../node_modules/rxjs/src/internal/Observable.ts","../node_modules/rxjs/src/internal/Observer.ts","../node_modules/rxjs/src/internal/Subscriber.ts","../node_modules/rxjs/src/internal/Subscription.ts","../node_modules/rxjs/src/internal/config.ts","../node_modules/rxjs/src/internal/observable/empty.ts","../node_modules/rxjs/src/internal/operators/defaultIfEmpty.ts","../node_modules/rxjs/src/internal/operators/filter.ts","../node_modules/rxjs/src/internal/operators/map.ts","../node_modules/rxjs/src/internal/operators/reduce.ts","../node_modules/rxjs/src/internal/operators/scan.ts","../node_modules/rxjs/src/internal/operators/takeLast.ts","../node_modules/rxjs/src/internal/symbol/observable.ts","../node_modules/rxjs/src/internal/symbol/rxSubscriber.ts","../node_modules/rxjs/src/internal/util/ArgumentOutOfRangeError.ts","../node_modules/rxjs/src/internal/util/UnsubscriptionError.ts","../node_modules/rxjs/src/internal/util/canReportError.ts","../node_modules/rxjs/src/internal/util/hostReportError.ts","../node_modules/rxjs/src/internal/util/identity.ts","../node_modules/rxjs/src/internal/util/isArray.ts","../node_modules/rxjs/src/internal/util/isFunction.ts","../node_modules/rxjs/src/internal/util/isObject.ts","../node_modules/rxjs/src/internal/util/pipe.ts","../node_modules/rxjs/src/internal/util/toSubscriber.ts","../node_modules/same-origin/index.js","../node_modules/same-origin/url-parser.js","../node_modules/url-parse/index.js"],"sourcesContent":["/*\n * EventSource polyfill\n * Originally published by sc AmvTek srl (https://github.com/amvtek/EventSource) - devel@amvtek.com\n * Forked by Espen Hovlandsdal to fix a few issues + publish latest version\n */\n\n;(function (root, factory) {\n  /* global define */\n  if (typeof define === 'function' && define.amd) {\n    // AMD\n    define([], factory)\n  } else if (typeof module === 'object' && module.exports) {\n    // CommonJS\n    module.exports = factory()\n  } else {\n    // Browser globals (root is window)\n    if (global.EventSource && !global._eventSourceImportPrefix) {\n      return\n    }\n\n    var evsImportName = (root._eventSourceImportPrefix || '') + 'EventSource'\n    root[evsImportName] = factory()\n  }\n})(typeof self === 'undefined' ? this : self, function () {\n  var EventSource = function (url, options) {\n    if (!url || typeof url != 'string') {\n      throw new SyntaxError('Not enough arguments')\n    }\n\n    this.URL = url\n    this.setOptions(options)\n    var evs = this\n    setTimeout(function () {\n      evs.poll()\n    }, 0)\n  }\n\n  EventSource.prototype = {\n    CONNECTING: 0,\n\n    OPEN: 1,\n\n    CLOSED: 2,\n\n    defaultOptions: {\n      loggingEnabled: false,\n\n      loggingPrefix: 'eventsource',\n\n      interval: 500, // milliseconds\n\n      bufferSizeLimit: 256 * 1024, // bytes\n\n      silentTimeout: 300000, // milliseconds\n\n      getArgs: {\n        evs_buffer_size_limit: 256 * 1024,\n      },\n\n      xhrHeaders: {\n        Accept: 'text/event-stream',\n        'Cache-Control': 'no-cache',\n        'X-Requested-With': 'XMLHttpRequest',\n      },\n    },\n\n    setOptions: function (options) {\n      var defaults = this.defaultOptions\n      var option\n\n      // set all default options...\n      for (option in defaults) {\n        if (defaults.hasOwnProperty(option)) {\n          this[option] = defaults[option]\n        }\n      }\n\n      // override with what is in options\n      for (option in options) {\n        if (option in defaults && options.hasOwnProperty(option)) {\n          this[option] = options[option]\n        }\n      }\n\n      // if getArgs option is enabled\n      // ensure evs_buffer_size_limit corresponds to bufferSizeLimit\n      if (this.getArgs && this.bufferSizeLimit) {\n        this.getArgs.evs_buffer_size_limit = this.bufferSizeLimit\n      }\n\n      // if console is not available, force loggingEnabled to false\n      // eslint-disable-next-line no-console\n      if (typeof console === 'undefined' || typeof console.log === 'undefined') {\n        this.loggingEnabled = false\n      }\n    },\n\n    log: function (message) {\n      if (this.loggingEnabled) {\n        // eslint-disable-next-line no-console\n        console.log('[' + this.loggingPrefix + ']:' + message)\n      }\n    },\n\n    poll: function () {\n      try {\n        if (this.readyState == this.CLOSED) {\n          return\n        }\n\n        this.cleanup()\n        this.readyState = this.CONNECTING\n        this.cursor = 0\n        this.cache = ''\n        this._xhr = new this.XHR(this)\n        this.resetNoActivityTimer()\n      } catch (err) {\n        // in an attempt to silence the errors\n        this.log('There were errors inside the pool try-catch')\n        this.dispatchEvent('error', {type: 'error', data: err.message})\n      }\n    },\n\n    pollAgain: function (interval) {\n      // schedule poll to be called after interval milliseconds\n      var evs = this\n      evs.readyState = evs.CONNECTING\n      evs.dispatchEvent('error', {\n        type: 'error',\n        data: 'Reconnecting ',\n      })\n      this._pollTimer = setTimeout(function () {\n        evs.poll()\n      }, interval || 0)\n    },\n\n    cleanup: function () {\n      this.log('evs cleaning up')\n\n      if (this._pollTimer) {\n        clearInterval(this._pollTimer)\n        this._pollTimer = null\n      }\n\n      if (this._noActivityTimer) {\n        clearInterval(this._noActivityTimer)\n        this._noActivityTimer = null\n      }\n\n      if (this._xhr) {\n        this._xhr.abort()\n        this._xhr = null\n      }\n    },\n\n    resetNoActivityTimer: function () {\n      if (this.silentTimeout) {\n        if (this._noActivityTimer) {\n          clearInterval(this._noActivityTimer)\n        }\n        var evs = this\n        this._noActivityTimer = setTimeout(function () {\n          evs.log('Timeout! silentTImeout:' + evs.silentTimeout)\n          evs.pollAgain()\n        }, this.silentTimeout)\n      }\n    },\n\n    close: function () {\n      this.readyState = this.CLOSED\n      this.log('Closing connection. readyState: ' + this.readyState)\n      this.cleanup()\n    },\n\n    _onxhrdata: function () {\n      var request = this._xhr\n\n      if (request.isReady() && !request.hasError()) {\n        // reset the timer, as we have activity\n        this.resetNoActivityTimer()\n\n        // move this EventSource to OPEN state...\n        if (this.readyState == this.CONNECTING) {\n          this.readyState = this.OPEN\n          this.dispatchEvent('open', {type: 'open'})\n        }\n\n        var buffer = request.getBuffer()\n\n        if (buffer.length > this.bufferSizeLimit) {\n          this.log('buffer.length > this.bufferSizeLimit')\n          this.pollAgain()\n        }\n\n        if (this.cursor == 0 && buffer.length > 0) {\n          // skip byte order mark \\uFEFF character if it starts the stream\n          if (buffer.substring(0, 1) == '\\uFEFF') {\n            this.cursor = 1\n          }\n        }\n\n        var lastMessageIndex = this.lastMessageIndex(buffer)\n        if (lastMessageIndex[0] >= this.cursor) {\n          var newcursor = lastMessageIndex[1]\n          var toparse = buffer.substring(this.cursor, newcursor)\n          this.parseStream(toparse)\n          this.cursor = newcursor\n        }\n\n        // if request is finished, reopen the connection\n        if (request.isDone()) {\n          this.log('request.isDone(). reopening the connection')\n          this.pollAgain(this.interval)\n        }\n      } else if (this.readyState !== this.CLOSED) {\n        this.log('this.readyState !== this.CLOSED')\n        this.pollAgain(this.interval)\n\n        //MV: Unsure why an error was previously dispatched\n      }\n    },\n\n    parseStream: function (chunk) {\n      // normalize line separators (\\r\\n,\\r,\\n) to \\n\n      // remove white spaces that may precede \\n\n      chunk = this.cache + this.normalizeToLF(chunk)\n\n      var events = chunk.split('\\n\\n')\n\n      var i, j, eventType, datas, line, retry\n\n      for (i = 0; i < events.length - 1; i++) {\n        eventType = 'message'\n        datas = []\n        var parts = events[i].split('\\n')\n\n        for (j = 0; j < parts.length; j++) {\n          line = this.trimWhiteSpace(parts[j])\n\n          if (line.indexOf('event') == 0) {\n            eventType = line.replace(/event:?\\s*/, '')\n          } else if (line.indexOf('retry') == 0) {\n            retry = parseInt(line.replace(/retry:?\\s*/, ''), 10)\n            if (!isNaN(retry)) {\n              this.interval = retry\n            }\n          } else if (line.indexOf('data') == 0) {\n            datas.push(line.replace(/data:?\\s*/, ''))\n          } else if (line.indexOf('id:') == 0) {\n            this.lastEventId = line.replace(/id:?\\s*/, '')\n          } else if (line.indexOf('id') == 0) {\n            // this resets the id\n\n            this.lastEventId = null\n          }\n        }\n\n        if (datas.length && this.readyState != this.CLOSED) {\n          // dispatch a new event\n          var event = new MessageEvent(\n            eventType,\n            datas.join('\\n'),\n            typeof window !== 'undefined' && typeof window.location !== 'undefined'\n              ? window.location.origin\n              : null,\n            this.lastEventId\n          )\n          this.dispatchEvent(eventType, event)\n        }\n      }\n\n      this.cache = events[events.length - 1]\n    },\n\n    dispatchEvent: function (type, event) {\n      var handlers = this['_' + type + 'Handlers']\n\n      if (handlers) {\n        for (var i = 0; i < handlers.length; i++) {\n          handlers[i].call(this, event)\n        }\n      }\n\n      if (this['on' + type]) {\n        this['on' + type].call(this, event)\n      }\n    },\n\n    addEventListener: function (type, handler) {\n      if (!this['_' + type + 'Handlers']) {\n        this['_' + type + 'Handlers'] = []\n      }\n\n      this['_' + type + 'Handlers'].push(handler)\n    },\n\n    removeEventListener: function (type, handler) {\n      var handlers = this['_' + type + 'Handlers']\n      if (!handlers) {\n        return\n      }\n      for (var i = handlers.length - 1; i >= 0; --i) {\n        if (handlers[i] === handler) {\n          handlers.splice(i, 1)\n          break\n        }\n      }\n    },\n\n    _pollTimer: null,\n\n    _noactivityTimer: null,\n\n    _xhr: null,\n\n    lastEventId: null,\n\n    cache: '',\n\n    cursor: 0,\n\n    onerror: null,\n\n    onmessage: null,\n\n    onopen: null,\n\n    readyState: 0,\n\n    // ===================================================================\n    // helpers functions\n    // those are attached to prototype to ease reuse and testing...\n\n    urlWithParams: function (baseURL, params) {\n      var encodedArgs = []\n\n      if (params) {\n        var key, urlarg\n        var urlize = encodeURIComponent\n\n        for (key in params) {\n          if (params.hasOwnProperty(key)) {\n            urlarg = urlize(key) + '=' + urlize(params[key])\n            encodedArgs.push(urlarg)\n          }\n        }\n      }\n\n      if (encodedArgs.length > 0) {\n        if (baseURL.indexOf('?') == -1) return baseURL + '?' + encodedArgs.join('&')\n        return baseURL + '&' + encodedArgs.join('&')\n      }\n      return baseURL\n    },\n\n    lastMessageIndex: function (text) {\n      var ln2 = text.lastIndexOf('\\n\\n')\n      var lr2 = text.lastIndexOf('\\r\\r')\n      var lrln2 = text.lastIndexOf('\\r\\n\\r\\n')\n\n      if (lrln2 > Math.max(ln2, lr2)) {\n        return [lrln2, lrln2 + 4]\n      }\n      return [Math.max(ln2, lr2), Math.max(ln2, lr2) + 2]\n    },\n\n    trimWhiteSpace: function (str) {\n      // to remove whitespaces left and right of string\n\n      var reTrim = /^(\\s|\\u00A0)+|(\\s|\\u00A0)+$/g\n      return str.replace(reTrim, '')\n    },\n\n    normalizeToLF: function (str) {\n      // replace \\r and \\r\\n with \\n\n      return str.replace(/\\r\\n|\\r/g, '\\n')\n    },\n  }\n\n  if (isOldIE()) {\n    EventSource.isPolyfill = 'IE_8-9'\n\n    // patch EventSource defaultOptions\n    var defaults = EventSource.prototype.defaultOptions\n    defaults.xhrHeaders = null // no headers will be sent\n    defaults.getArgs.evs_preamble = 2048 + 8\n\n    // EventSource will send request using Internet Explorer XDomainRequest\n    EventSource.prototype.XHR = function (evs) {\n      /* global XDomainRequest */\n      var request = new XDomainRequest()\n      this._request = request\n\n      // set handlers\n      request.onprogress = function () {\n        request._ready = true\n        evs._onxhrdata()\n      }\n\n      request.onload = function () {\n        this._loaded = true\n        evs._onxhrdata()\n      }\n\n      request.onerror = function () {\n        this._failed = true\n        evs.readyState = evs.CLOSED\n        evs.dispatchEvent('error', {\n          type: 'error',\n          data: 'XDomainRequest error',\n        })\n      }\n\n      request.ontimeout = function () {\n        this._failed = true\n        evs.readyState = evs.CLOSED\n        evs.dispatchEvent('error', {\n          type: 'error',\n          data: 'XDomainRequest timed out',\n        })\n      }\n\n      // XDomainRequest does not allow setting custom headers\n      // If EventSource has enabled the use of GET arguments\n      // we add parameters to URL so that server can adapt the stream...\n      var reqGetArgs = {}\n      if (evs.getArgs) {\n        // copy evs.getArgs in reqGetArgs\n        var defaultArgs = evs.getArgs\n        for (var key in defaultArgs) {\n          if (defaultArgs.hasOwnProperty(key)) {\n            reqGetArgs[key] = defaultArgs[key]\n          }\n        }\n        if (evs.lastEventId) {\n          reqGetArgs.evs_last_event_id = evs.lastEventId\n        }\n      }\n      // send the request\n\n      request.open('GET', evs.urlWithParams(evs.URL, reqGetArgs))\n      request.send()\n    }\n\n    EventSource.prototype.XHR.prototype = {\n      useXDomainRequest: true,\n\n      _request: null,\n\n      _ready: false, // true when progress events are dispatched\n\n      _loaded: false, // true when request has been loaded\n\n      _failed: false, // true if when request is in error\n\n      isReady: function () {\n        return this._request._ready\n      },\n\n      isDone: function () {\n        return this._request._loaded\n      },\n\n      hasError: function () {\n        return this._request._failed\n      },\n\n      getBuffer: function () {\n        var rv = ''\n        try {\n          rv = this._request.responseText || ''\n        } catch (err) {\n          // intentional noop\n        }\n        return rv\n      },\n\n      abort: function () {\n        if (this._request) {\n          this._request.abort()\n        }\n      },\n    }\n  } else {\n    EventSource.isPolyfill = 'XHR'\n\n    // EventSource will send request using XMLHttpRequest\n    EventSource.prototype.XHR = function (evs) {\n      var request = new XMLHttpRequest()\n      this._request = request\n      evs._xhr = this\n\n      // set handlers\n      request.onreadystatechange = function () {\n        if (request.readyState > 1 && evs.readyState != evs.CLOSED) {\n          if (request.status == 200 || (request.status >= 300 && request.status < 400)) {\n            evs._onxhrdata()\n          } else {\n            request._failed = true\n            evs.readyState = evs.CLOSED\n            evs.dispatchEvent('error', {\n              type: 'error',\n              data: 'The server responded with ' + request.status,\n            })\n            evs.close()\n          }\n        }\n      }\n\n      request.onprogress = function () {\n        // intentional noop\n      }\n\n      request.open('GET', evs.urlWithParams(evs.URL, evs.getArgs), true)\n\n      var headers = evs.xhrHeaders // maybe null\n      for (var header in headers) {\n        if (headers.hasOwnProperty(header)) {\n          request.setRequestHeader(header, headers[header])\n        }\n      }\n      if (evs.lastEventId) {\n        request.setRequestHeader('Last-Event-Id', evs.lastEventId)\n      }\n\n      request.send()\n    }\n\n    EventSource.prototype.XHR.prototype = {\n      useXDomainRequest: false,\n\n      _request: null,\n\n      _failed: false, // true if we have had errors...\n\n      isReady: function () {\n        return this._request.readyState >= 2\n      },\n\n      isDone: function () {\n        return this._request.readyState == 4\n      },\n\n      hasError: function () {\n        return this._failed || this._request.status >= 400\n      },\n\n      getBuffer: function () {\n        var rv = ''\n        try {\n          rv = this._request.responseText || ''\n        } catch (err) {\n          // intentional noop\n        }\n        return rv\n      },\n\n      abort: function () {\n        if (this._request) {\n          this._request.abort()\n        }\n      },\n    }\n  }\n\n  function MessageEvent(type, data, origin, lastEventId) {\n    this.bubbles = false\n    this.cancelBubble = false\n    this.cancelable = false\n    this.data = data || null\n    this.origin = origin || ''\n    this.lastEventId = lastEventId || ''\n    this.type = type || 'message'\n  }\n\n  function isOldIE() {\n    //return true if we are in IE8 or IE9\n    return Boolean(\n      typeof window !== 'undefined' &&\n        window.XDomainRequest &&\n        window.XMLHttpRequest &&\n        new XMLHttpRequest().responseType === undefined\n    )\n  }\n\n  return EventSource\n})\n","\"use strict\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nvar assign = require('object-assign');\n\nvar _require = require('@sanity/observable/operators/map'),\n    map = _require.map;\n\nvar _require2 = require('@sanity/observable/operators/filter'),\n    filter = _require2.filter;\n\nvar queryString = require('../http/queryString');\n\nvar validators = require('../validators');\n\nfunction AssetsClient(client) {\n  this.client = client;\n}\n\nfunction toDocument(body) {\n  // todo: rewrite to just return body.document in a while\n  var document = body.document;\n  Object.defineProperty(document, 'document', {\n    enumerable: false,\n    get: function get() {\n      // eslint-disable-next-line no-console\n      console.warn('The promise returned from client.asset.upload(...) now resolves with the asset document');\n      return document;\n    }\n  });\n  return document;\n}\n\nfunction optionsFromFile(opts, file) {\n  if (typeof window === 'undefined' || !(file instanceof window.File)) {\n    return opts;\n  }\n\n  return assign({\n    filename: opts.preserveFilename === false ? undefined : file.name,\n    contentType: file.type\n  }, opts);\n}\n\nassign(AssetsClient.prototype, {\n  /**\n   * Upload an asset\n   *\n   * @param  {String} assetType `image` or `file`\n   * @param  {File|Blob|Buffer|ReadableStream} body File to upload\n   * @param  {Object}  opts Options for the upload\n   * @param  {Boolean} opts.preserveFilename Whether or not to preserve the original filename (default: true)\n   * @param  {String}  opts.filename Filename for this file (optional)\n   * @param  {Number}  opts.timeout  Milliseconds to wait before timing the request out (default: 0)\n   * @param  {String}  opts.contentType Mime type of the file\n   * @param  {Array}   opts.extract Array of metadata parts to extract from image.\n   *                                 Possible values: `location`, `exif`, `image`, `palette`\n   * @param  {String}  opts.label Label\n   * @param  {String}  opts.title Title\n   * @param  {String}  opts.description Description\n   * @param  {String}  opts.creditLine The credit to person(s) and/or organization(s) required by the supplier of the image to be used when published\n   * @param  {Object}  opts.source Source data (when the asset is from an external service)\n   * @param  {String}  opts.source.id The (u)id of the asset within the source, i.e. 'i-f323r1E'\n   *                                  Required if source is defined\n   * @param  {String}  opts.source.name The name of the source, i.e. 'unsplash'\n   *                                  Required if source is defined\n   * @param  {String}  opts.source.url A url to where to find the asset, or get more info about it in the source\n   *                                  Optional\n   * @return {Promise} Resolves with the created asset document\n   */\n  upload: function upload(assetType, body) {\n    var opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    validators.validateAssetType(assetType); // If an empty array is given, explicitly set `none` to override API defaults\n\n    var meta = opts.extract || undefined;\n\n    if (meta && !meta.length) {\n      meta = ['none'];\n    }\n\n    var dataset = validators.hasDataset(this.client.clientConfig);\n    var assetEndpoint = assetType === 'image' ? 'images' : 'files';\n    var options = optionsFromFile(opts, body);\n    var tag = options.tag,\n        label = options.label,\n        title = options.title,\n        description = options.description,\n        creditLine = options.creditLine,\n        filename = options.filename,\n        source = options.source;\n    var query = {\n      label: label,\n      title: title,\n      description: description,\n      filename: filename,\n      meta: meta,\n      creditLine: creditLine\n    };\n\n    if (source) {\n      query.sourceId = source.id;\n      query.sourceName = source.name;\n      query.sourceUrl = source.url;\n    }\n\n    var observable = this.client._requestObservable({\n      tag: tag,\n      method: 'POST',\n      timeout: options.timeout || 0,\n      uri: \"/assets/\".concat(assetEndpoint, \"/\").concat(dataset),\n      headers: options.contentType ? {\n        'Content-Type': options.contentType\n      } : {},\n      query: query,\n      body: body\n    });\n\n    return this.client.isPromiseAPI() ? observable.pipe(filter(function (event) {\n      return event.type === 'response';\n    }), map(function (event) {\n      return toDocument(event.body);\n    })).toPromise() : observable;\n  },\n  delete: function _delete(type, id) {\n    // eslint-disable-next-line no-console\n    console.warn('client.assets.delete() is deprecated, please use client.delete(<document-id>)');\n    var docId = id || '';\n\n    if (!/^(image|file)-/.test(docId)) {\n      docId = \"\".concat(type, \"-\").concat(docId);\n    } else if (type._id) {\n      // We could be passing an entire asset document instead of an ID\n      docId = type._id;\n    }\n\n    validators.hasDataset(this.client.clientConfig);\n    return this.client.delete(docId);\n  },\n  getImageUrl: function getImageUrl(ref, query) {\n    var id = ref._ref || ref;\n\n    if (typeof id !== 'string') {\n      throw new Error('getImageUrl() needs either an object with a _ref, or a string with an asset document ID');\n    }\n\n    if (!/^image-[A-Za-z0-9_]+-\\d+x\\d+-[a-z]{1,5}$/.test(id)) {\n      throw new Error(\"Unsupported asset ID \\\"\".concat(id, \"\\\". URL generation only works for auto-generated IDs.\"));\n    }\n\n    var _id$split = id.split('-'),\n        _id$split2 = _slicedToArray(_id$split, 4),\n        assetId = _id$split2[1],\n        size = _id$split2[2],\n        format = _id$split2[3];\n\n    validators.hasDataset(this.client.clientConfig);\n    var _this$client$clientCo = this.client.clientConfig,\n        projectId = _this$client$clientCo.projectId,\n        dataset = _this$client$clientCo.dataset;\n    var qs = query ? queryString(query) : '';\n    return \"https://cdn.sanity.io/images/\".concat(projectId, \"/\").concat(dataset, \"/\").concat(assetId, \"-\").concat(size, \".\").concat(format).concat(qs);\n  }\n});\nmodule.exports = AssetsClient;","\"use strict\";\n\nvar assign = require('object-assign');\n\nfunction AuthClient(client) {\n  this.client = client;\n}\n\nassign(AuthClient.prototype, {\n  getLoginProviders: function getLoginProviders() {\n    return this.client.request({\n      uri: '/auth/providers'\n    });\n  },\n  logout: function logout() {\n    return this.client.request({\n      uri: '/auth/logout',\n      method: 'POST'\n    });\n  }\n});\nmodule.exports = AuthClient;","\"use strict\";\n\nvar generateHelpUrl = require('@sanity/generate-help-url');\n\nvar assign = require('object-assign');\n\nvar validate = require('./validators');\n\nvar warnings = require('./warnings');\n\nvar defaultCdnHost = 'apicdn.sanity.io';\nvar defaultConfig = {\n  apiHost: 'https://api.sanity.io',\n  apiVersion: '1',\n  useProjectHostname: true,\n  gradientMode: false,\n  isPromiseAPI: true\n};\nvar LOCALHOSTS = ['localhost', '127.0.0.1', '0.0.0.0'];\n\nvar isLocal = function isLocal(host) {\n  return LOCALHOSTS.indexOf(host) !== -1;\n};\n\nexports.defaultConfig = defaultConfig; // eslint-disable-next-line complexity\n\nexports.initConfig = function (config, prevConfig) {\n  var specifiedConfig = assign({}, prevConfig, config);\n\n  if (!specifiedConfig.apiVersion) {\n    warnings.printNoApiVersionSpecifiedWarning();\n  }\n\n  var newConfig = assign({}, defaultConfig, specifiedConfig);\n  var gradientMode = newConfig.gradientMode;\n  var projectBased = !gradientMode && newConfig.useProjectHostname;\n\n  if (typeof Promise === 'undefined') {\n    var helpUrl = generateHelpUrl('js-client-promise-polyfill');\n    throw new Error(\"No native Promise-implementation found, polyfill needed - see \".concat(helpUrl));\n  }\n\n  if (gradientMode && !newConfig.namespace) {\n    throw new Error('Configuration must contain `namespace` when running in gradient mode');\n  }\n\n  if (projectBased && !newConfig.projectId) {\n    throw new Error('Configuration must contain `projectId`');\n  }\n\n  var isBrowser = typeof window !== 'undefined' && window.location && window.location.hostname;\n  var isLocalhost = isBrowser && isLocal(window.location.hostname);\n\n  if (isBrowser && isLocalhost && newConfig.token && newConfig.ignoreBrowserTokenWarning !== true) {\n    warnings.printBrowserTokenWarning();\n  } else if ((!isBrowser || isLocalhost) && newConfig.useCdn && newConfig.token) {\n    warnings.printCdnTokenWarning();\n  } else if (typeof newConfig.useCdn === 'undefined') {\n    warnings.printCdnWarning();\n  }\n\n  if (projectBased) {\n    validate.projectId(newConfig.projectId);\n  }\n\n  if (!gradientMode && newConfig.dataset) {\n    validate.dataset(newConfig.dataset, newConfig.gradientMode);\n  }\n\n  if ('requestTagPrefix' in newConfig) {\n    // Allow setting and unsetting request tag prefix\n    newConfig.requestTagPrefix = newConfig.requestTagPrefix ? validate.requestTag(newConfig.requestTagPrefix).replace(/\\.+$/, '') : undefined;\n  }\n\n  newConfig.apiVersion = \"\".concat(newConfig.apiVersion).replace(/^v/, '');\n  newConfig.isDefaultApi = newConfig.apiHost === defaultConfig.apiHost;\n  newConfig.useCdn = Boolean(newConfig.useCdn) && !newConfig.token && !newConfig.withCredentials;\n  exports.validateApiVersion(newConfig.apiVersion);\n\n  if (newConfig.gradientMode) {\n    newConfig.url = newConfig.apiHost;\n    newConfig.cdnUrl = newConfig.apiHost;\n  } else {\n    var hostParts = newConfig.apiHost.split('://', 2);\n    var protocol = hostParts[0];\n    var host = hostParts[1];\n    var cdnHost = newConfig.isDefaultApi ? defaultCdnHost : host;\n\n    if (newConfig.useProjectHostname) {\n      newConfig.url = \"\".concat(protocol, \"://\").concat(newConfig.projectId, \".\").concat(host, \"/v\").concat(newConfig.apiVersion);\n      newConfig.cdnUrl = \"\".concat(protocol, \"://\").concat(newConfig.projectId, \".\").concat(cdnHost, \"/v\").concat(newConfig.apiVersion);\n    } else {\n      newConfig.url = \"\".concat(newConfig.apiHost, \"/v\").concat(newConfig.apiVersion);\n      newConfig.cdnUrl = newConfig.url;\n    }\n  }\n\n  return newConfig;\n};\n\nexports.validateApiVersion = function validateApiVersion(apiVersion) {\n  if (apiVersion === '1' || apiVersion === 'X') {\n    return;\n  }\n\n  var apiDate = new Date(apiVersion);\n  var apiVersionValid = /^\\d{4}-\\d{2}-\\d{2}$/.test(apiVersion) && apiDate instanceof Date && apiDate.getTime() > 0;\n\n  if (!apiVersionValid) {\n    throw new Error('Invalid API version string, expected `1` or date in format `YYYY-MM-DD`');\n  }\n};","\"use strict\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar assign = require('object-assign');\n\nvar _require = require('@sanity/observable/operators/filter'),\n    filter = _require.filter;\n\nvar _require2 = require('@sanity/observable/operators/map'),\n    map = _require2.map;\n\nvar validators = require('../validators');\n\nvar getSelection = require('../util/getSelection');\n\nvar encodeQueryString = require('./encodeQueryString');\n\nvar Transaction = require('./transaction');\n\nvar Patch = require('./patch');\n\nvar listen = require('./listen');\n\nvar excludeFalsey = function excludeFalsey(param, defValue) {\n  var value = typeof param === 'undefined' ? defValue : param;\n  return param === false ? undefined : value;\n};\n\nvar getMutationQuery = function getMutationQuery() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return {\n    returnIds: true,\n    returnDocuments: excludeFalsey(options.returnDocuments, true),\n    visibility: options.visibility || 'sync'\n  };\n};\n\nvar isResponse = function isResponse(event) {\n  return event.type === 'response';\n};\n\nvar getBody = function getBody(event) {\n  return event.body;\n};\n\nvar indexBy = function indexBy(docs, attr) {\n  return docs.reduce(function (indexed, doc) {\n    indexed[attr(doc)] = doc;\n    return indexed;\n  }, Object.create(null));\n};\n\nvar toPromise = function toPromise(observable) {\n  return observable.toPromise();\n};\n\nvar getQuerySizeLimit = 11264;\nmodule.exports = {\n  listen: listen,\n  getDataUrl: function getDataUrl(operation, path) {\n    var config = this.clientConfig;\n    var catalog = config.gradientMode ? config.namespace : validators.hasDataset(config);\n    var baseUri = \"/\".concat(operation, \"/\").concat(catalog);\n    var uri = path ? \"\".concat(baseUri, \"/\").concat(path) : baseUri;\n    return (this.clientConfig.gradientMode ? uri : \"/data\".concat(uri)).replace(/\\/($|\\?)/, '$1');\n  },\n  fetch: function fetch(query, params) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var mapResponse = options.filterResponse === false ? function (res) {\n      return res;\n    } : function (res) {\n      return res.result;\n    };\n\n    var observable = this._dataRequest('query', {\n      query: query,\n      params: params\n    }, options).pipe(map(mapResponse));\n\n    return this.isPromiseAPI() ? toPromise(observable) : observable;\n  },\n  getDocument: function getDocument(id) {\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var options = {\n      uri: this.getDataUrl('doc', id),\n      json: true,\n      tag: opts.tag\n    };\n\n    var observable = this._requestObservable(options).pipe(filter(isResponse), map(function (event) {\n      return event.body.documents && event.body.documents[0];\n    }));\n\n    return this.isPromiseAPI() ? toPromise(observable) : observable;\n  },\n  getDocuments: function getDocuments(ids) {\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var options = {\n      uri: this.getDataUrl('doc', ids.join(',')),\n      json: true,\n      tag: opts.tag\n    };\n\n    var observable = this._requestObservable(options).pipe(filter(isResponse), map(function (event) {\n      var indexed = indexBy(event.body.documents || [], function (doc) {\n        return doc._id;\n      });\n      return ids.map(function (id) {\n        return indexed[id] || null;\n      });\n    }));\n\n    return this.isPromiseAPI() ? toPromise(observable) : observable;\n  },\n  create: function create(doc, options) {\n    return this._create(doc, 'create', options);\n  },\n  createIfNotExists: function createIfNotExists(doc, options) {\n    validators.requireDocumentId('createIfNotExists', doc);\n    return this._create(doc, 'createIfNotExists', options);\n  },\n  createOrReplace: function createOrReplace(doc, options) {\n    validators.requireDocumentId('createOrReplace', doc);\n    return this._create(doc, 'createOrReplace', options);\n  },\n  patch: function patch(selector, operations) {\n    return new Patch(selector, operations, this);\n  },\n  delete: function _delete(selection, options) {\n    return this.dataRequest('mutate', {\n      mutations: [{\n        delete: getSelection(selection)\n      }]\n    }, options);\n  },\n  mutate: function mutate(mutations, options) {\n    var mut = mutations instanceof Patch || mutations instanceof Transaction ? mutations.serialize() : mutations;\n    var muts = Array.isArray(mut) ? mut : [mut];\n    var transactionId = options && options.transactionId;\n    return this.dataRequest('mutate', {\n      mutations: muts,\n      transactionId: transactionId\n    }, options);\n  },\n  transaction: function transaction(operations) {\n    return new Transaction(operations, this);\n  },\n  dataRequest: function dataRequest(endpoint, body) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    var request = this._dataRequest(endpoint, body, options);\n\n    return this.isPromiseAPI() ? toPromise(request) : request;\n  },\n  _dataRequest: function _dataRequest(endpoint, body) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var isMutation = endpoint === 'mutate';\n    var isQuery = endpoint === 'query'; // Check if the query string is within a configured threshold,\n    // in which case we can use GET. Otherwise, use POST.\n\n    var strQuery = !isMutation && encodeQueryString(body);\n    var useGet = !isMutation && strQuery.length < getQuerySizeLimit;\n    var stringQuery = useGet ? strQuery : '';\n    var returnFirst = options.returnFirst;\n    var timeout = options.timeout,\n        token = options.token,\n        tag = options.tag;\n    var uri = this.getDataUrl(endpoint, stringQuery);\n    var reqOptions = {\n      method: useGet ? 'GET' : 'POST',\n      uri: uri,\n      json: true,\n      body: useGet ? undefined : body,\n      query: isMutation && getMutationQuery(options),\n      timeout: timeout,\n      token: token,\n      tag: tag,\n      canUseCdn: isQuery\n    };\n    return this._requestObservable(reqOptions).pipe(filter(isResponse), map(getBody), map(function (res) {\n      if (!isMutation) {\n        return res;\n      } // Should we return documents?\n\n\n      var results = res.results || [];\n\n      if (options.returnDocuments) {\n        return returnFirst ? results[0] && results[0].document : results.map(function (mut) {\n          return mut.document;\n        });\n      } // Return a reduced subset\n\n\n      var key = returnFirst ? 'documentId' : 'documentIds';\n      var ids = returnFirst ? results[0] && results[0].id : results.map(function (mut) {\n        return mut.id;\n      });\n      return _defineProperty({\n        transactionId: res.transactionId,\n        results: results\n      }, key, ids);\n    }));\n  },\n  _create: function _create(doc, op) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    var mutation = _defineProperty({}, op, doc);\n\n    var opts = assign({\n      returnFirst: true,\n      returnDocuments: true\n    }, options);\n    return this.dataRequest('mutate', {\n      mutations: [mutation]\n    }, opts);\n  }\n};","\"use strict\";\n\nvar _excluded = [\"tag\"];\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nvar enc = encodeURIComponent;\n\nmodule.exports = function (_ref) {\n  var query = _ref.query,\n      _ref$params = _ref.params,\n      params = _ref$params === void 0 ? {} : _ref$params,\n      _ref$options = _ref.options,\n      options = _ref$options === void 0 ? {} : _ref$options;\n\n  // We generally want tag at the start of the query string\n  var tag = options.tag,\n      opts = _objectWithoutProperties(options, _excluded);\n\n  var q = \"query=\".concat(enc(query));\n  var base = tag ? \"?tag=\".concat(enc(tag), \"&\").concat(q) : \"?\".concat(q);\n  var qString = Object.keys(params).reduce(function (qs, param) {\n    return \"\".concat(qs, \"&\").concat(enc(\"$\".concat(param)), \"=\").concat(enc(JSON.stringify(params[param])));\n  }, base);\n  return Object.keys(opts).reduce(function (qs, option) {\n    // Only include the option if it is truthy\n    return options[option] ? \"\".concat(qs, \"&\").concat(enc(option), \"=\").concat(enc(options[option])) : qs;\n  }, qString);\n};","\"use strict\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar assign = require('object-assign');\n\nvar Observable = require('@sanity/observable/minimal');\n\nvar polyfilledEventSource = require('@sanity/eventsource');\n\nvar generateHelpUrl = require('@sanity/generate-help-url');\n\nvar pick = require('../util/pick');\n\nvar once = require('../util/once');\n\nvar defaults = require('../util/defaults');\n\nvar encodeQueryString = require('./encodeQueryString'); // Limit is 16K for a _request_, eg including headers. Have to account for an\n// unknown range of headers, but an average EventSource request from Chrome seems\n// to have around 700 bytes of cruft, so let us account for 1.2K to be \"safe\"\n\n\nvar MAX_URL_LENGTH = 16000 - 1200;\nvar tokenWarning = ['Using token with listeners is not supported in browsers. ', \"For more info, see \".concat(generateHelpUrl('js-client-listener-tokens-browser'), \".\")]; // eslint-disable-next-line no-console\n\nvar printTokenWarning = once(function () {\n  return console.warn(tokenWarning.join(' '));\n});\nvar isWindowEventSource = Boolean(typeof window !== 'undefined' && window.EventSource);\nvar EventSource = isWindowEventSource ? window.EventSource // Native browser EventSource\n: polyfilledEventSource; // Node.js, IE etc\n\nvar possibleOptions = ['includePreviousRevision', 'includeResult', 'visibility', 'effectFormat', 'tag'];\nvar defaultOptions = {\n  includeResult: true\n};\n\nmodule.exports = function listen(query, params) {\n  var opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var _this$clientConfig = this.clientConfig,\n      url = _this$clientConfig.url,\n      token = _this$clientConfig.token,\n      withCredentials = _this$clientConfig.withCredentials,\n      requestTagPrefix = _this$clientConfig.requestTagPrefix;\n  var tag = opts.tag && requestTagPrefix ? [requestTagPrefix, opts.tag].join('.') : opts.tag;\n\n  var options = _objectSpread(_objectSpread({}, defaults(opts, defaultOptions)), {}, {\n    tag: tag\n  });\n\n  var listenOpts = pick(options, possibleOptions);\n  var qs = encodeQueryString({\n    query: query,\n    params: params,\n    options: listenOpts,\n    tag: tag\n  });\n  var uri = \"\".concat(url).concat(this.getDataUrl('listen', qs));\n\n  if (uri.length > MAX_URL_LENGTH) {\n    return new Observable(function (observer) {\n      return observer.error(new Error('Query too large for listener'));\n    });\n  }\n\n  var listenFor = options.events ? options.events : ['mutation'];\n  var shouldEmitReconnect = listenFor.indexOf('reconnect') !== -1;\n\n  if (token && isWindowEventSource) {\n    printTokenWarning();\n  }\n\n  var esOptions = {};\n\n  if (token || withCredentials) {\n    esOptions.withCredentials = true;\n  }\n\n  if (token) {\n    esOptions.headers = {\n      Authorization: \"Bearer \".concat(token)\n    };\n  }\n\n  return new Observable(function (observer) {\n    var es = getEventSource();\n    var reconnectTimer;\n    var stopped = false;\n\n    function onError() {\n      if (stopped) {\n        return;\n      }\n\n      emitReconnect(); // Allow event handlers of `emitReconnect` to cancel/close the reconnect attempt\n\n      if (stopped) {\n        return;\n      } // Unless we've explicitly stopped the ES (in which case `stopped` should be true),\n      // we should never be in a disconnected state. By default, EventSource will reconnect\n      // automatically, in which case it sets readyState to `CONNECTING`, but in some cases\n      // (like when a laptop lid is closed), it closes the connection. In these cases we need\n      // to explicitly reconnect.\n\n\n      if (es.readyState === EventSource.CLOSED) {\n        unsubscribe();\n        clearTimeout(reconnectTimer);\n        reconnectTimer = setTimeout(open, 100);\n      }\n    }\n\n    function onChannelError(err) {\n      observer.error(cooerceError(err));\n    }\n\n    function onMessage(evt) {\n      var event = parseEvent(evt);\n      return event instanceof Error ? observer.error(event) : observer.next(event);\n    }\n\n    function onDisconnect(evt) {\n      stopped = true;\n      unsubscribe();\n      observer.complete();\n    }\n\n    function unsubscribe() {\n      es.removeEventListener('error', onError, false);\n      es.removeEventListener('channelError', onChannelError, false);\n      es.removeEventListener('disconnect', onDisconnect, false);\n      listenFor.forEach(function (type) {\n        return es.removeEventListener(type, onMessage, false);\n      });\n      es.close();\n    }\n\n    function emitReconnect() {\n      if (shouldEmitReconnect) {\n        observer.next({\n          type: 'reconnect'\n        });\n      }\n    }\n\n    function getEventSource() {\n      var evs = new EventSource(uri, esOptions);\n      evs.addEventListener('error', onError, false);\n      evs.addEventListener('channelError', onChannelError, false);\n      evs.addEventListener('disconnect', onDisconnect, false);\n      listenFor.forEach(function (type) {\n        return evs.addEventListener(type, onMessage, false);\n      });\n      return evs;\n    }\n\n    function open() {\n      es = getEventSource();\n    }\n\n    function stop() {\n      stopped = true;\n      unsubscribe();\n    }\n\n    return stop;\n  });\n};\n\nfunction parseEvent(event) {\n  try {\n    var data = event.data && JSON.parse(event.data) || {};\n    return assign({\n      type: event.type\n    }, data);\n  } catch (err) {\n    return err;\n  }\n}\n\nfunction cooerceError(err) {\n  if (err instanceof Error) {\n    return err;\n  }\n\n  var evt = parseEvent(err);\n  return evt instanceof Error ? evt : new Error(extractErrorMessage(evt));\n}\n\nfunction extractErrorMessage(err) {\n  if (!err.error) {\n    return err.message || 'Unknown listener error';\n  }\n\n  if (err.error.description) {\n    return err.error.description;\n  }\n\n  return typeof err.error === 'string' ? err.error : JSON.stringify(err.error, null, 2);\n}","\"use strict\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar deepAssign = require('deep-assign');\n\nvar assign = require('object-assign');\n\nvar getSelection = require('../util/getSelection');\n\nvar validate = require('../validators');\n\nvar validateObject = validate.validateObject;\nvar validateInsert = validate.validateInsert;\n\nfunction Patch(selection) {\n  var operations = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var client = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  this.selection = selection;\n  this.operations = assign({}, operations);\n  this.client = client;\n}\n\nassign(Patch.prototype, {\n  clone: function clone() {\n    return new Patch(this.selection, assign({}, this.operations), this.client);\n  },\n  merge: function merge(props) {\n    validateObject('merge', props);\n    var stack = new Error().stack.toString().split('\\n').filter(function (str) {\n      return str.trim();\n    }).slice(2);\n    console.warn(\"The \\\"merge\\\" patch has been deprecated and will be removed in the future\\n\".concat(stack.join('\\n')));\n    return this._assign('merge', deepAssign(this.operations.merge || {}, props));\n  },\n  set: function set(props) {\n    return this._assign('set', props);\n  },\n  diffMatchPatch: function diffMatchPatch(props) {\n    validateObject('diffMatchPatch', props);\n    return this._assign('diffMatchPatch', props);\n  },\n  unset: function unset(attrs) {\n    if (!Array.isArray(attrs)) {\n      throw new Error('unset(attrs) takes an array of attributes to unset, non-array given');\n    }\n\n    this.operations = assign({}, this.operations, {\n      unset: attrs\n    });\n    return this;\n  },\n  setIfMissing: function setIfMissing(props) {\n    return this._assign('setIfMissing', props);\n  },\n  replace: function replace(props) {\n    validateObject('replace', props);\n    return this._set('set', {\n      $: props\n    }); // eslint-disable-line id-length\n  },\n  inc: function inc(props) {\n    return this._assign('inc', props);\n  },\n  dec: function dec(props) {\n    return this._assign('dec', props);\n  },\n  insert: function insert(at, selector, items) {\n    var _this$_assign;\n\n    validateInsert(at, selector, items);\n    return this._assign('insert', (_this$_assign = {}, _defineProperty(_this$_assign, at, selector), _defineProperty(_this$_assign, \"items\", items), _this$_assign));\n  },\n  append: function append(selector, items) {\n    return this.insert('after', \"\".concat(selector, \"[-1]\"), items);\n  },\n  prepend: function prepend(selector, items) {\n    return this.insert('before', \"\".concat(selector, \"[0]\"), items);\n  },\n  splice: function splice(selector, start, deleteCount, items) {\n    // Negative indexes doesn't mean the same in Sanity as they do in JS;\n    // -1 means \"actually at the end of the array\", which allows inserting\n    // at the end of the array without knowing its length. We therefore have\n    // to substract negative indexes by one to match JS. If you want Sanity-\n    // behaviour, just use `insert('replace', selector, items)` directly\n    var delAll = typeof deleteCount === 'undefined' || deleteCount === -1;\n    var startIndex = start < 0 ? start - 1 : start;\n    var delCount = delAll ? -1 : Math.max(0, start + deleteCount);\n    var delRange = startIndex < 0 && delCount >= 0 ? '' : delCount;\n    var rangeSelector = \"\".concat(selector, \"[\").concat(startIndex, \":\").concat(delRange, \"]\");\n    return this.insert('replace', rangeSelector, items || []);\n  },\n  ifRevisionId: function ifRevisionId(rev) {\n    this.operations.ifRevisionID = rev;\n    return this;\n  },\n  serialize: function serialize() {\n    return assign(getSelection(this.selection), this.operations);\n  },\n  toJSON: function toJSON() {\n    return this.serialize();\n  },\n  commit: function commit() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    if (!this.client) {\n      throw new Error('No `client` passed to patch, either provide one or pass the ' + 'patch to a clients `mutate()` method');\n    }\n\n    var returnFirst = typeof this.selection === 'string';\n    var opts = assign({\n      returnFirst: returnFirst,\n      returnDocuments: true\n    }, options);\n    return this.client.mutate({\n      patch: this.serialize()\n    }, opts);\n  },\n  reset: function reset() {\n    this.operations = {};\n    return this;\n  },\n  _set: function _set(op, props) {\n    return this._assign(op, props, false);\n  },\n  _assign: function _assign(op, props) {\n    var merge = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n    validateObject(op, props);\n    this.operations = assign({}, this.operations, _defineProperty({}, op, assign({}, merge && this.operations[op] || {}, props)));\n    return this;\n  }\n});\nmodule.exports = Patch;","\"use strict\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar assign = require('object-assign');\n\nvar validators = require('../validators');\n\nvar Patch = require('./patch');\n\nvar defaultMutateOptions = {\n  returnDocuments: false\n};\n\nfunction Transaction() {\n  var operations = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var client = arguments.length > 1 ? arguments[1] : undefined;\n  var transactionId = arguments.length > 2 ? arguments[2] : undefined;\n  this.trxId = transactionId;\n  this.operations = operations;\n  this.client = client;\n}\n\nassign(Transaction.prototype, {\n  clone: function clone() {\n    return new Transaction(this.operations.slice(0), this.client, this.trxId);\n  },\n  create: function create(doc) {\n    validators.validateObject('create', doc);\n    return this._add({\n      create: doc\n    });\n  },\n  createIfNotExists: function createIfNotExists(doc) {\n    var op = 'createIfNotExists';\n    validators.validateObject(op, doc);\n    validators.requireDocumentId(op, doc);\n    return this._add(_defineProperty({}, op, doc));\n  },\n  createOrReplace: function createOrReplace(doc) {\n    var op = 'createOrReplace';\n    validators.validateObject(op, doc);\n    validators.requireDocumentId(op, doc);\n    return this._add(_defineProperty({}, op, doc));\n  },\n  delete: function _delete(documentId) {\n    validators.validateDocumentId('delete', documentId);\n    return this._add({\n      delete: {\n        id: documentId\n      }\n    });\n  },\n  patch: function patch(documentId, patchOps) {\n    var isBuilder = typeof patchOps === 'function';\n    var isPatch = documentId instanceof Patch; // transaction.patch(client.patch('documentId').inc({visits: 1}))\n\n    if (isPatch) {\n      return this._add({\n        patch: documentId.serialize()\n      });\n    } // patch => patch.inc({visits: 1}).set({foo: 'bar'})\n\n\n    if (isBuilder) {\n      var patch = patchOps(new Patch(documentId, {}, this.client));\n\n      if (!(patch instanceof Patch)) {\n        throw new Error('function passed to `patch()` must return the patch');\n      }\n\n      return this._add({\n        patch: patch.serialize()\n      });\n    }\n\n    return this._add({\n      patch: assign({\n        id: documentId\n      }, patchOps)\n    });\n  },\n  transactionId: function transactionId(id) {\n    if (!id) {\n      return this.trxId;\n    }\n\n    this.trxId = id;\n    return this;\n  },\n  serialize: function serialize() {\n    return this.operations.slice();\n  },\n  toJSON: function toJSON() {\n    return this.serialize();\n  },\n  commit: function commit(options) {\n    if (!this.client) {\n      throw new Error('No `client` passed to transaction, either provide one or pass the ' + 'transaction to a clients `mutate()` method');\n    }\n\n    return this.client.mutate(this.serialize(), assign({\n      transactionId: this.trxId\n    }, defaultMutateOptions, options || {}));\n  },\n  reset: function reset() {\n    this.operations = [];\n    return this;\n  },\n  _add: function _add(mut) {\n    this.operations.push(mut);\n    return this;\n  }\n});\nmodule.exports = Transaction;","\"use strict\";\n\nvar assign = require('object-assign');\n\nvar validate = require('../validators');\n\nfunction DatasetsClient(client) {\n  this.request = client.request.bind(client);\n}\n\nassign(DatasetsClient.prototype, {\n  create: function create(name, options) {\n    return this._modify('PUT', name, options);\n  },\n  edit: function edit(name, options) {\n    return this._modify('PATCH', name, options);\n  },\n  delete: function _delete(name) {\n    return this._modify('DELETE', name);\n  },\n  list: function list() {\n    return this.request({\n      uri: '/datasets'\n    });\n  },\n  _modify: function _modify(method, name, body) {\n    validate.dataset(name);\n    return this.request({\n      method: method,\n      uri: \"/datasets/\".concat(name),\n      body: body\n    });\n  }\n});\nmodule.exports = DatasetsClient;","\"use strict\";\n\nmodule.exports = [];","\"use strict\";\n\nvar makeError = require('make-error');\n\nvar assign = require('object-assign');\n\nfunction ClientError(res) {\n  var props = extractErrorProps(res);\n  ClientError.super.call(this, props.message);\n  assign(this, props);\n}\n\nfunction ServerError(res) {\n  var props = extractErrorProps(res);\n  ServerError.super.call(this, props.message);\n  assign(this, props);\n}\n\nfunction extractErrorProps(res) {\n  var body = res.body;\n  var props = {\n    response: res,\n    statusCode: res.statusCode,\n    responseBody: stringifyBody(body, res)\n  }; // API/Boom style errors ({statusCode, error, message})\n\n  if (body.error && body.message) {\n    props.message = \"\".concat(body.error, \" - \").concat(body.message);\n    return props;\n  } // Query/database errors ({error: {description, other, arb, props}})\n\n\n  if (body.error && body.error.description) {\n    props.message = body.error.description;\n    props.details = body.error;\n    return props;\n  } // Other, more arbitrary errors\n\n\n  props.message = body.error || body.message || httpErrorMessage(res);\n  return props;\n}\n\nfunction httpErrorMessage(res) {\n  var statusMessage = res.statusMessage ? \" \".concat(res.statusMessage) : '';\n  return \"\".concat(res.method, \"-request to \").concat(res.url, \" resulted in HTTP \").concat(res.statusCode).concat(statusMessage);\n}\n\nfunction stringifyBody(body, res) {\n  var contentType = (res.headers['content-type'] || '').toLowerCase();\n  var isJson = contentType.indexOf('application/json') !== -1;\n  return isJson ? JSON.stringify(body, null, 2) : body;\n}\n\nmakeError(ClientError);\nmakeError(ServerError);\nexports.ClientError = ClientError;\nexports.ServerError = ServerError;","\"use strict\";\n\nmodule.exports = function (params) {\n  var qs = [];\n\n  for (var key in params) {\n    if (params.hasOwnProperty(key)) {\n      qs.push(\"\".concat(encodeURIComponent(key), \"=\").concat(encodeURIComponent(params[key])));\n    }\n  }\n\n  return qs.length > 0 ? \"?\".concat(qs.join('&')) : '';\n};","\"use strict\";\n\n/* eslint-disable no-empty-function, no-process-env */\nvar getIt = require('get-it');\n\nvar assign = require('object-assign');\n\nvar observable = require('get-it/lib/middleware/observable');\n\nvar jsonRequest = require('get-it/lib/middleware/jsonRequest');\n\nvar jsonResponse = require('get-it/lib/middleware/jsonResponse');\n\nvar progress = require('get-it/lib/middleware/progress');\n\nvar Observable = require('@sanity/observable/minimal');\n\nvar _require = require('./errors'),\n    ClientError = _require.ClientError,\n    ServerError = _require.ServerError;\n\nvar httpError = {\n  onResponse: function onResponse(res) {\n    if (res.statusCode >= 500) {\n      throw new ServerError(res);\n    } else if (res.statusCode >= 400) {\n      throw new ClientError(res);\n    }\n\n    return res;\n  }\n};\nvar printWarnings = {\n  onResponse: function onResponse(res) {\n    var warn = res.headers['x-sanity-warning'];\n    var warnings = Array.isArray(warn) ? warn : [warn];\n    warnings.filter(Boolean).forEach(function (msg) {\n      return console.warn(msg);\n    }); // eslint-disable-line no-console\n\n    return res;\n  }\n}; // Environment-specific middleware.\n\nvar envSpecific = require('./nodeMiddleware');\n\nvar middleware = envSpecific.concat([printWarnings, jsonRequest(), jsonResponse(), progress(), httpError, observable({\n  implementation: Observable\n})]);\nvar request = getIt(middleware);\n\nfunction httpRequest(options) {\n  var requester = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : request;\n  return requester(assign({\n    maxRedirects: 0\n  }, options));\n}\n\nhttpRequest.defaultRequester = request;\nhttpRequest.ClientError = ClientError;\nhttpRequest.ServerError = ServerError;\nmodule.exports = httpRequest;","\"use strict\";\n\nvar assign = require('object-assign');\n\nvar projectHeader = 'X-Sanity-Project-ID';\n\nmodule.exports = function (config) {\n  var overrides = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var headers = {};\n  var token = overrides.token || config.token;\n\n  if (token) {\n    headers.Authorization = \"Bearer \".concat(token);\n  }\n\n  if (!overrides.useGlobalApi && !config.useProjectHostname && config.projectId) {\n    headers[projectHeader] = config.projectId;\n  }\n\n  var withCredentials = Boolean(typeof overrides.withCredentials === 'undefined' ? config.token || config.withCredentials : overrides.withCredentials);\n  var timeout = typeof overrides.timeout === 'undefined' ? config.timeout : overrides.timeout;\n  return assign({}, overrides, {\n    headers: assign({}, headers, overrides.headers || {}),\n    timeout: typeof timeout === 'undefined' ? 5 * 60 * 1000 : timeout,\n    proxy: overrides.proxy || config.proxy,\n    json: true,\n    withCredentials: withCredentials\n  });\n};","\"use strict\";\n\nvar assign = require('object-assign');\n\nfunction ProjectsClient(client) {\n  this.client = client;\n}\n\nassign(ProjectsClient.prototype, {\n  list: function list() {\n    return this.client.request({\n      uri: '/projects'\n    });\n  },\n  getById: function getById(id) {\n    return this.client.request({\n      uri: \"/projects/\".concat(id)\n    });\n  }\n});\nmodule.exports = ProjectsClient;","\"use strict\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar assign = require('object-assign');\n\nvar _require = require('@sanity/observable/operators/filter'),\n    filter = _require.filter;\n\nvar _require2 = require('@sanity/observable/operators/map'),\n    map = _require2.map;\n\nvar Patch = require('./data/patch');\n\nvar Transaction = require('./data/transaction');\n\nvar dataMethods = require('./data/dataMethods');\n\nvar DatasetsClient = require('./datasets/datasetsClient');\n\nvar ProjectsClient = require('./projects/projectsClient');\n\nvar AssetsClient = require('./assets/assetsClient');\n\nvar UsersClient = require('./users/usersClient');\n\nvar AuthClient = require('./auth/authClient');\n\nvar httpRequest = require('./http/request');\n\nvar getRequestOptions = require('./http/requestOptions');\n\nvar _require3 = require('./config'),\n    defaultConfig = _require3.defaultConfig,\n    initConfig = _require3.initConfig;\n\nvar validate = require('./validators');\n\nvar toPromise = function toPromise(observable) {\n  return observable.toPromise();\n};\n\nfunction SanityClient() {\n  var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultConfig;\n\n  if (!(this instanceof SanityClient)) {\n    return new SanityClient(config);\n  }\n\n  this.config(config);\n  this.assets = new AssetsClient(this);\n  this.datasets = new DatasetsClient(this);\n  this.projects = new ProjectsClient(this);\n  this.users = new UsersClient(this);\n  this.auth = new AuthClient(this);\n\n  if (this.clientConfig.isPromiseAPI) {\n    var observableConfig = assign({}, this.clientConfig, {\n      isPromiseAPI: false\n    });\n    this.observable = new SanityClient(observableConfig);\n  }\n}\n\nassign(SanityClient.prototype, dataMethods);\nassign(SanityClient.prototype, {\n  clone: function clone() {\n    return new SanityClient(this.config());\n  },\n  config: function config(newConfig) {\n    if (typeof newConfig === 'undefined') {\n      return assign({}, this.clientConfig);\n    }\n\n    if (this.observable) {\n      var observableConfig = assign({}, newConfig, {\n        isPromiseAPI: false\n      });\n      this.observable.config(observableConfig);\n    }\n\n    this.clientConfig = initConfig(newConfig, this.clientConfig || {});\n    return this;\n  },\n  withConfig: function withConfig(newConfig) {\n    return this.clone().config(newConfig);\n  },\n  getUrl: function getUrl(uri) {\n    var useCdn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var base = useCdn ? this.clientConfig.cdnUrl : this.clientConfig.url;\n    return \"\".concat(base, \"/\").concat(uri.replace(/^\\//, ''));\n  },\n  isPromiseAPI: function isPromiseAPI() {\n    return this.clientConfig.isPromiseAPI;\n  },\n  _requestObservable: function _requestObservable(options) {\n    var uri = options.url || options.uri; // If the `canUseCdn`-option is not set we detect it automatically based on the method + URL.\n    // Only the /data endpoint is currently available through API-CDN.\n\n    var canUseCdn = typeof options.canUseCdn === 'undefined' ? ['GET', 'HEAD'].indexOf(options.method || 'GET') >= 0 && uri.indexOf('/data/') === 0 : options.canUseCdn;\n    var useCdn = this.clientConfig.useCdn && canUseCdn;\n    var tag = options.tag && this.clientConfig.requestTagPrefix ? [this.clientConfig.requestTagPrefix, options.tag].join('.') : options.tag || this.clientConfig.requestTagPrefix;\n\n    if (tag) {\n      options.query = _objectSpread({\n        tag: validate.requestTag(tag)\n      }, options.query);\n    }\n\n    var reqOptions = getRequestOptions(this.clientConfig, assign({}, options, {\n      url: this.getUrl(uri, useCdn)\n    }));\n    return httpRequest(reqOptions, this.clientConfig.requester);\n  },\n  request: function request(options) {\n    var observable = this._requestObservable(options).pipe(filter(function (event) {\n      return event.type === 'response';\n    }), map(function (event) {\n      return event.body;\n    }));\n\n    return this.isPromiseAPI() ? toPromise(observable) : observable;\n  }\n});\nSanityClient.Patch = Patch;\nSanityClient.Transaction = Transaction;\nSanityClient.ClientError = httpRequest.ClientError;\nSanityClient.ServerError = httpRequest.ServerError;\nSanityClient.requester = httpRequest.defaultRequester;\nmodule.exports = SanityClient;","\"use strict\";\n\nvar assign = require('object-assign');\n\nfunction UsersClient(client) {\n  this.client = client;\n}\n\nassign(UsersClient.prototype, {\n  getById: function getById(id) {\n    return this.client.request({\n      uri: \"/users/\".concat(id)\n    });\n  }\n});\nmodule.exports = UsersClient;","\"use strict\";\n\nmodule.exports = function (obj, defaults) {\n  return Object.keys(defaults).concat(Object.keys(obj)).reduce(function (target, prop) {\n    target[prop] = typeof obj[prop] === 'undefined' ? defaults[prop] : obj[prop];\n    return target;\n  }, {});\n};","\"use strict\";\n\nmodule.exports = function getSelection(sel) {\n  if (typeof sel === 'string' || Array.isArray(sel)) {\n    return {\n      id: sel\n    };\n  }\n\n  if (sel && sel.query) {\n    return 'params' in sel ? {\n      query: sel.query,\n      params: sel.params\n    } : {\n      query: sel.query\n    };\n  }\n\n  var selectionOpts = ['* Document ID (<docId>)', '* Array of document IDs', '* Object containing `query`'].join('\\n');\n  throw new Error(\"Unknown selection - must be one of:\\n\\n\".concat(selectionOpts));\n};","\"use strict\";\n\nmodule.exports = function (fn) {\n  var didCall = false;\n  var returnValue;\n  return function () {\n    if (didCall) {\n      return returnValue;\n    }\n\n    returnValue = fn.apply(void 0, arguments);\n    didCall = true;\n    return returnValue;\n  };\n};","\"use strict\";\n\nmodule.exports = function (obj, props) {\n  return props.reduce(function (selection, prop) {\n    if (typeof obj[prop] === 'undefined') {\n      return selection;\n    }\n\n    selection[prop] = obj[prop];\n    return selection;\n  }, {});\n};","\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nvar VALID_ASSET_TYPES = ['image', 'file'];\nvar VALID_INSERT_LOCATIONS = ['before', 'after', 'replace'];\n\nexports.dataset = function (name) {\n  if (!/^(~[a-z0-9]{1}[-\\w]{0,63}|[a-z0-9]{1}[-\\w]{0,63})$/.test(name)) {\n    throw new Error('Datasets can only contain lowercase characters, numbers, underscores and dashes, and start with tilde, and be maximum 64 characters');\n  }\n};\n\nexports.projectId = function (id) {\n  if (!/^[-a-z0-9]+$/i.test(id)) {\n    throw new Error('`projectId` can only contain only a-z, 0-9 and dashes');\n  }\n};\n\nexports.validateAssetType = function (type) {\n  if (VALID_ASSET_TYPES.indexOf(type) === -1) {\n    throw new Error(\"Invalid asset type: \".concat(type, \". Must be one of \").concat(VALID_ASSET_TYPES.join(', ')));\n  }\n};\n\nexports.validateObject = function (op, val) {\n  if (val === null || _typeof(val) !== 'object' || Array.isArray(val)) {\n    throw new Error(\"\".concat(op, \"() takes an object of properties\"));\n  }\n};\n\nexports.requireDocumentId = function (op, doc) {\n  if (!doc._id) {\n    throw new Error(\"\".concat(op, \"() requires that the document contains an ID (\\\"_id\\\" property)\"));\n  }\n\n  exports.validateDocumentId(op, doc._id);\n};\n\nexports.validateDocumentId = function (op, id) {\n  if (typeof id !== 'string' || !/^[a-z0-9_.-]+$/i.test(id)) {\n    throw new Error(\"\".concat(op, \"(): \\\"\").concat(id, \"\\\" is not a valid document ID\"));\n  }\n};\n\nexports.validateInsert = function (at, selector, items) {\n  var signature = 'insert(at, selector, items)';\n\n  if (VALID_INSERT_LOCATIONS.indexOf(at) === -1) {\n    var valid = VALID_INSERT_LOCATIONS.map(function (loc) {\n      return \"\\\"\".concat(loc, \"\\\"\");\n    }).join(', ');\n    throw new Error(\"\".concat(signature, \" takes an \\\"at\\\"-argument which is one of: \").concat(valid));\n  }\n\n  if (typeof selector !== 'string') {\n    throw new Error(\"\".concat(signature, \" takes a \\\"selector\\\"-argument which must be a string\"));\n  }\n\n  if (!Array.isArray(items)) {\n    throw new Error(\"\".concat(signature, \" takes an \\\"items\\\"-argument which must be an array\"));\n  }\n};\n\nexports.hasDataset = function (config) {\n  if (!config.gradientMode && !config.dataset) {\n    throw new Error('`dataset` must be provided to perform queries');\n  }\n\n  return config.dataset || '';\n};\n\nexports.requestTag = function (tag) {\n  if (typeof tag !== 'string' || !/^[a-z0-9._-]{1,75}$/i.test(tag)) {\n    throw new Error(\"Tag can only contain alphanumeric characters, underscores, dashes and dots, and be between one and 75 characters long.\");\n  }\n\n  return tag;\n};","\"use strict\";\n\nvar generateHelpUrl = require('@sanity/generate-help-url');\n\nvar once = require('./util/once');\n\nvar createWarningPrinter = function createWarningPrinter(message) {\n  return (// eslint-disable-next-line no-console\n    once(function () {\n      var _console;\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return (_console = console).warn.apply(_console, [message.join(' ')].concat(args));\n    })\n  );\n};\n\nexports.printCdnWarning = createWarningPrinter(['You are not using the Sanity CDN. That means your data is always fresh, but the CDN is faster and', \"cheaper. Think about it! For more info, see \".concat(generateHelpUrl('js-client-cdn-configuration'), \".\"), 'To hide this warning, please set the `useCdn` option to either `true` or `false` when creating', 'the client.']);\nexports.printBrowserTokenWarning = createWarningPrinter(['You have configured Sanity client to use a token in the browser. This may cause unintentional security issues.', \"See \".concat(generateHelpUrl('js-client-browser-token'), \" for more information and how to hide this warning.\")]);\nexports.printCdnTokenWarning = createWarningPrinter(['You have set `useCdn` to `true` while also specifying a token. This is usually not what you', 'want. The CDN cannot be used with an authorization token, since private data cannot be cached.', \"See \".concat(generateHelpUrl('js-client-usecdn-token'), \" for more information.\")]);\nexports.printNoApiVersionSpecifiedWarning = createWarningPrinter(['Using the Sanity client without specifying an API version is deprecated.', \"See \".concat(generateHelpUrl('js-client-api-version'))]);","/* eslint-disable no-var */\nvar evs = require('@rexxars/eventsource-polyfill')\n\nmodule.exports =\n  typeof window === 'undefined' || !window.EventSource\n    ? // Use polyfill in non-browser/legacy environments\n      evs.EventSource\n    : // Use native EventSource when we can\n      window.EventSource\n","var baseUrl = 'https://docs.sanity.io/help/'\n\nmodule.exports = function generateHelpUrl(slug) {\n  return baseUrl + slug\n}\n","const example = 'image-Tb9Ew8CXIwaY6R1kjMvI0uRR-2000x3000-jpg'\n\nexport default function parseAssetId(ref: string) {\n  const [, id, dimensionString, format] = ref.split('-')\n\n  if (!id || !dimensionString || !format) {\n    throw new Error(`Malformed asset _ref '${ref}'. Expected an id like \"${example}\".`)\n  }\n\n  const [imgWidthStr, imgHeightStr] = dimensionString.split('x')\n\n  const width = +imgWidthStr\n  const height = +imgHeightStr\n\n  const isValidAssetId = isFinite(width) && isFinite(height)\n  if (!isValidAssetId) {\n    throw new Error(`Malformed asset _ref '${ref}'. Expected an id like \"${example}\".`)\n  }\n\n  return {id, width, height, format}\n}\n","import {\n  SanityAsset,\n  SanityImageObject,\n  SanityImageSource,\n  SanityImageWithAssetStub,\n  SanityReference,\n} from './types'\n\nconst isRef = (src: SanityImageSource): src is SanityReference => {\n  const source = src as SanityReference\n  return source ? typeof source._ref === 'string' : false\n}\n\nconst isAsset = (src: SanityImageSource): src is SanityAsset => {\n  const source = src as SanityAsset\n  return source ? typeof source._id === 'string' : false\n}\n\nconst isAssetStub = (src: SanityImageSource): src is SanityImageWithAssetStub => {\n  const source = src as SanityImageWithAssetStub\n  return source && source.asset ? typeof source.asset.url === 'string' : false\n}\n\n// Convert an asset-id, asset or image to an image record suitable for processing\n// eslint-disable-next-line complexity\nexport default function parseSource(source?: SanityImageSource) {\n  if (!source) {\n    return null\n  }\n\n  let image: SanityImageObject\n\n  if (typeof source === 'string' && isUrl(source)) {\n    // Someone passed an existing image url?\n    image = {\n      asset: {_ref: urlToId(source)},\n    }\n  } else if (typeof source === 'string') {\n    // Just an asset id\n    image = {\n      asset: {_ref: source},\n    }\n  } else if (isRef(source)) {\n    // We just got passed an asset directly\n    image = {\n      asset: source,\n    }\n  } else if (isAsset(source)) {\n    // If we were passed an image asset document\n    image = {\n      asset: {\n        _ref: source._id || '',\n      },\n    }\n  } else if (isAssetStub(source)) {\n    // If we were passed a partial asset (`url`, but no `_id`)\n    image = {\n      asset: {\n        _ref: urlToId(source.asset.url),\n      },\n    }\n  } else if (typeof source.asset === 'object') {\n    // Probably an actual image with materialized asset\n    image = source\n  } else {\n    // We got something that does not look like an image, or it is an image\n    // that currently isn't sporting an asset.\n    return null\n  }\n\n  const img = source as SanityImageObject\n  if (img.crop) {\n    image.crop = img.crop\n  }\n\n  if (img.hotspot) {\n    image.hotspot = img.hotspot\n  }\n\n  return applyDefaults(image)\n}\n\nfunction isUrl(url: string) {\n  return /^https?:\\/\\//.test(`${url}`)\n}\n\nfunction urlToId(url: string) {\n  const parts = url.split('/').slice(-1)\n  return `image-${parts[0]}`.replace(/\\.([a-z]+)$/, '-$1')\n}\n\n// Mock crop and hotspot if image lacks it\nfunction applyDefaults(image: SanityImageObject) {\n  if (image.crop && image.hotspot) {\n    return image as Required<SanityImageObject>\n  }\n\n  // We need to pad in default values for crop or hotspot\n  const result = {...image}\n\n  if (!result.crop) {\n    result.crop = {\n      left: 0,\n      top: 0,\n      bottom: 0,\n      right: 0,\n    }\n  }\n\n  if (!result.hotspot) {\n    result.hotspot = {\n      x: 0.5,\n      y: 0.5,\n      height: 1.0,\n      width: 1.0,\n    }\n  }\n\n  return result as Required<SanityImageObject>\n}\n","import parseAssetId from './parseAssetId'\nimport parseSource from './parseSource'\nimport {\n  CropSpec,\n  HotspotSpec,\n  ImageUrlBuilderOptions,\n  ImageUrlBuilderOptionsWithAsset,\n  SanityAsset,\n  SanityImageFitResult,\n  SanityImageRect,\n  SanityReference,\n} from './types'\n\nexport const SPEC_NAME_TO_URL_NAME_MAPPINGS = [\n  ['width', 'w'],\n  ['height', 'h'],\n  ['format', 'fm'],\n  ['download', 'dl'],\n  ['blur', 'blur'],\n  ['sharpen', 'sharp'],\n  ['invert', 'invert'],\n  ['orientation', 'or'],\n  ['minHeight', 'min-h'],\n  ['maxHeight', 'max-h'],\n  ['minWidth', 'min-w'],\n  ['maxWidth', 'max-w'],\n  ['quality', 'q'],\n  ['fit', 'fit'],\n  ['crop', 'crop'],\n  ['saturation', 'sat'],\n  ['auto', 'auto'],\n  ['dpr', 'dpr'],\n  ['pad', 'pad'],\n]\n\nexport default function urlForImage(options: ImageUrlBuilderOptions): string {\n  let spec = {...(options || {})}\n  const source = spec.source\n  delete spec.source\n\n  const image = parseSource(source)\n  if (!image) {\n    throw new Error(`Unable to resolve image URL from source (${JSON.stringify(source)})`)\n  }\n\n  const id = (image.asset as SanityReference)._ref || (image.asset as SanityAsset)._id || ''\n  const asset = parseAssetId(id)\n\n  // Compute crop rect in terms of pixel coordinates in the raw source image\n  const cropLeft = Math.round(image.crop.left * asset.width)\n  const cropTop = Math.round(image.crop.top * asset.height)\n  const crop = {\n    left: cropLeft,\n    top: cropTop,\n    width: Math.round(asset.width - image.crop.right * asset.width - cropLeft),\n    height: Math.round(asset.height - image.crop.bottom * asset.height - cropTop),\n  }\n\n  // Compute hot spot rect in terms of pixel coordinates\n  const hotSpotVerticalRadius = (image.hotspot.height * asset.height) / 2\n  const hotSpotHorizontalRadius = (image.hotspot.width * asset.width) / 2\n  const hotSpotCenterX = image.hotspot.x * asset.width\n  const hotSpotCenterY = image.hotspot.y * asset.height\n  const hotspot = {\n    left: hotSpotCenterX - hotSpotHorizontalRadius,\n    top: hotSpotCenterY - hotSpotVerticalRadius,\n    right: hotSpotCenterX + hotSpotHorizontalRadius,\n    bottom: hotSpotCenterY + hotSpotVerticalRadius,\n  }\n\n  // If irrelevant, or if we are requested to: don't perform crop/fit based on\n  // the crop/hotspot.\n  if (!(spec.rect || spec.focalPoint || spec.ignoreImageParams || spec.crop)) {\n    spec = {...spec, ...fit({crop, hotspot}, spec)}\n  }\n\n  return specToImageUrl({...spec, asset})\n}\n\n// eslint-disable-next-line complexity\nfunction specToImageUrl(spec: ImageUrlBuilderOptionsWithAsset) {\n  const cdnUrl = spec.baseUrl || 'https://cdn.sanity.io'\n  const filename = `${spec.asset.id}-${spec.asset.width}x${spec.asset.height}.${spec.asset.format}`\n  const baseUrl = `${cdnUrl}/images/${spec.projectId}/${spec.dataset}/${filename}`\n\n  const params = []\n\n  if (spec.rect) {\n    // Only bother url with a crop if it actually crops anything\n    const {left, top, width, height} = spec.rect\n    const isEffectiveCrop =\n      left !== 0 || top !== 0 || height !== spec.asset.height || width !== spec.asset.width\n\n    if (isEffectiveCrop) {\n      params.push(`rect=${left},${top},${width},${height}`)\n    }\n  }\n\n  if (spec.bg) {\n    params.push(`bg=${spec.bg}`)\n  }\n\n  if (spec.focalPoint) {\n    params.push(`fp-x=${spec.focalPoint.x}`)\n    params.push(`fp-y=${spec.focalPoint.y}`)\n  }\n\n  const flip = [spec.flipHorizontal && 'h', spec.flipVertical && 'v'].filter(Boolean).join('')\n  if (flip) {\n    params.push(`flip=${flip}`)\n  }\n\n  // Map from spec name to url param name, and allow using the actual param name as an alternative\n  SPEC_NAME_TO_URL_NAME_MAPPINGS.forEach((mapping) => {\n    const [specName, param] = mapping\n    if (typeof spec[specName] !== 'undefined') {\n      params.push(`${param}=${encodeURIComponent(spec[specName])}`)\n    } else if (typeof spec[param] !== 'undefined') {\n      params.push(`${param}=${encodeURIComponent(spec[param])}`)\n    }\n  })\n\n  if (params.length === 0) {\n    return baseUrl\n  }\n\n  return `${baseUrl}?${params.join('&')}`\n}\n\nfunction fit(\n  source: {crop: CropSpec; hotspot: HotspotSpec},\n  spec: ImageUrlBuilderOptions\n): SanityImageFitResult {\n  let cropRect: SanityImageRect\n\n  const imgWidth = spec.width\n  const imgHeight = spec.height\n\n  // If we are not constraining the aspect ratio, we'll just use the whole crop\n  if (!(imgWidth && imgHeight)) {\n    return {width: imgWidth, height: imgHeight, rect: source.crop}\n  }\n\n  const crop = source.crop\n  const hotspot = source.hotspot\n\n  // If we are here, that means aspect ratio is locked and fitting will be a bit harder\n  const desiredAspectRatio = imgWidth / imgHeight\n  const cropAspectRatio = crop.width / crop.height\n\n  if (cropAspectRatio > desiredAspectRatio) {\n    // The crop is wider than the desired aspect ratio. That means we are cutting from the sides\n    const height = Math.round(crop.height)\n    const width = Math.round(height * desiredAspectRatio)\n    const top = Math.max(0, Math.round(crop.top))\n\n    // Center output horizontally over hotspot\n    const hotspotXCenter = Math.round((hotspot.right - hotspot.left) / 2 + hotspot.left)\n    let left = Math.max(0, Math.round(hotspotXCenter - width / 2))\n\n    // Keep output within crop\n    if (left < crop.left) {\n      left = crop.left\n    } else if (left + width > crop.left + crop.width) {\n      left = crop.left + crop.width - width\n    }\n\n    cropRect = {left, top, width, height}\n  } else {\n    // The crop is taller than the desired ratio, we are cutting from top and bottom\n    const width = crop.width\n    const height = Math.round(width / desiredAspectRatio)\n    const left = Math.max(0, Math.round(crop.left))\n\n    // Center output vertically over hotspot\n    const hotspotYCenter = Math.round((hotspot.bottom - hotspot.top) / 2 + hotspot.top)\n    let top = Math.max(0, Math.round(hotspotYCenter - height / 2))\n\n    // Keep output rect within crop\n    if (top < crop.top) {\n      top = crop.top\n    } else if (top + height > crop.top + crop.height) {\n      top = crop.top + crop.height - height\n    }\n\n    cropRect = {left, top, width, height}\n  }\n\n  return {\n    width: imgWidth,\n    height: imgHeight,\n    rect: cropRect,\n  }\n}\n\n// For backwards-compatibility\nexport {parseSource}\n","import {\n  AutoMode,\n  CropMode,\n  FitMode,\n  ImageFormat,\n  ImageUrlBuilderOptions,\n  ImageUrlBuilderOptionsWithAliases,\n  Orientation,\n  SanityClientLike,\n  SanityImageSource,\n  SanityProjectDetails,\n} from './types'\nimport urlForImage, {SPEC_NAME_TO_URL_NAME_MAPPINGS} from './urlForImage'\n\nconst validFits = ['clip', 'crop', 'fill', 'fillmax', 'max', 'scale', 'min']\nconst validCrops = ['top', 'bottom', 'left', 'right', 'center', 'focalpoint', 'entropy']\nconst validAutoModes = ['format']\n\nfunction isSanityClientLike(client?: SanityClientLike): client is SanityClientLike {\n  return client ? typeof client.clientConfig === 'object' : false\n}\n\nfunction rewriteSpecName(key: string) {\n  const specs = SPEC_NAME_TO_URL_NAME_MAPPINGS\n  for (const entry of specs) {\n    const [specName, param] = entry\n    if (key === specName || key === param) {\n      return specName\n    }\n  }\n\n  return key\n}\n\nexport default function urlBuilder(options?: SanityClientLike | SanityProjectDetails) {\n  // Did we get a SanityClient?\n  const client = options as SanityClientLike\n  if (isSanityClientLike(client)) {\n    // Inherit config from client\n    const {apiHost: apiUrl, projectId, dataset} = client.clientConfig\n    const apiHost = apiUrl || 'https://api.sanity.io'\n    return new ImageUrlBuilder(null, {\n      baseUrl: apiHost.replace(/^https:\\/\\/api\\./, 'https://cdn.'),\n      projectId,\n      dataset,\n    })\n  }\n\n  // Or just accept the options as given\n  return new ImageUrlBuilder(null, options as ImageUrlBuilderOptions)\n}\n\nexport class ImageUrlBuilder {\n  public options: ImageUrlBuilderOptions\n\n  constructor(parent: ImageUrlBuilder | null, options: ImageUrlBuilderOptions) {\n    this.options = parent\n      ? {...(parent.options || {}), ...(options || {})} // Merge parent options\n      : {...(options || {})} // Copy options\n  }\n\n  withOptions(options: Partial<ImageUrlBuilderOptionsWithAliases>) {\n    const baseUrl = options.baseUrl || this.options.baseUrl\n\n    const newOptions: {[key: string]: any} = {baseUrl}\n    for (const key in options) {\n      if (options.hasOwnProperty(key)) {\n        const specKey = rewriteSpecName(key)\n        newOptions[specKey] = options[key]\n      }\n    }\n\n    return new ImageUrlBuilder(this, {baseUrl, ...newOptions})\n  }\n\n  // The image to be represented. Accepts a Sanity 'image'-document, 'asset'-document or\n  // _id of asset. To get the benefit of automatic hot-spot/crop integration with the content\n  // studio, the 'image'-document must be provided.\n  image(source: SanityImageSource) {\n    return this.withOptions({source})\n  }\n\n  // Specify the dataset\n  dataset(dataset: string) {\n    return this.withOptions({dataset})\n  }\n\n  // Specify the projectId\n  projectId(projectId: string) {\n    return this.withOptions({projectId})\n  }\n\n  // Specify background color\n  bg(bg: string) {\n    return this.withOptions({bg})\n  }\n\n  // Set DPR scaling factor\n  dpr(dpr: number) {\n    // A DPR of 1 is the default - so only include it if we have a different value\n    return this.withOptions(dpr && dpr !== 1 ? {dpr} : {})\n  }\n\n  // Specify the width of the image in pixels\n  width(width: number) {\n    return this.withOptions({width})\n  }\n\n  // Specify the height of the image in pixels\n  height(height: number) {\n    return this.withOptions({height})\n  }\n\n  // Specify focal point in fraction of image dimensions. Each component 0.0-1.0\n  focalPoint(x: number, y: number) {\n    return this.withOptions({focalPoint: {x, y}})\n  }\n\n  maxWidth(maxWidth: number) {\n    return this.withOptions({maxWidth})\n  }\n\n  minWidth(minWidth: number) {\n    return this.withOptions({minWidth})\n  }\n\n  maxHeight(maxHeight: number) {\n    return this.withOptions({maxHeight})\n  }\n\n  minHeight(minHeight: number) {\n    return this.withOptions({minHeight})\n  }\n\n  // Specify width and height in pixels\n  size(width: number, height: number) {\n    return this.withOptions({width, height})\n  }\n\n  // Specify blur between 0 and 100\n  blur(blur: number) {\n    return this.withOptions({blur})\n  }\n\n  sharpen(sharpen: number) {\n    return this.withOptions({sharpen})\n  }\n\n  // Specify the desired rectangle of the image\n  rect(left: number, top: number, width: number, height: number) {\n    return this.withOptions({rect: {left, top, width, height}})\n  }\n\n  // Specify the image format of the image. 'jpg', 'pjpg', 'png', 'webp'\n  format(format: ImageFormat) {\n    return this.withOptions({format})\n  }\n\n  invert(invert: boolean) {\n    return this.withOptions({invert})\n  }\n\n  // Rotation in degrees 0, 90, 180, 270\n  orientation(orientation: Orientation) {\n    return this.withOptions({orientation})\n  }\n\n  // Compression quality 0-100\n  quality(quality: number) {\n    return this.withOptions({quality})\n  }\n\n  // Make it a download link. Parameter is default filename.\n  forceDownload(download: boolean | string) {\n    return this.withOptions({download})\n  }\n\n  // Flip image horizontally\n  flipHorizontal() {\n    return this.withOptions({flipHorizontal: true})\n  }\n\n  // Flip image vertically\n  flipVertical() {\n    return this.withOptions({flipVertical: true})\n  }\n\n  // Ignore crop/hotspot from image record, even when present\n  ignoreImageParams() {\n    return this.withOptions({ignoreImageParams: true})\n  }\n\n  fit(value: FitMode) {\n    if (validFits.indexOf(value) === -1) {\n      throw new Error(`Invalid fit mode \"${value}\"`)\n    }\n\n    return this.withOptions({fit: value})\n  }\n\n  crop(value: CropMode) {\n    if (validCrops.indexOf(value) === -1) {\n      throw new Error(`Invalid crop mode \"${value}\"`)\n    }\n\n    return this.withOptions({crop: value})\n  }\n\n  // Saturation\n  saturation(saturation: number) {\n    return this.withOptions({saturation})\n  }\n\n  auto(value: AutoMode) {\n    if (validAutoModes.indexOf(value) === -1) {\n      throw new Error(`Invalid auto mode \"${value}\"`)\n    }\n\n    return this.withOptions({auto: value})\n  }\n\n  // Specify the number of pixels to pad the image\n  pad(pad: number) {\n    return this.withOptions({pad})\n  }\n\n  // Gets the url based on the submitted parameters\n  url() {\n    return urlForImage(this.options)\n  }\n\n  // Alias for url()\n  toString() {\n    return this.url()\n  }\n}\n","\"use strict\";\n\nvar _require = require('rxjs/internal/Observable'),\n    Observable = _require.Observable;\n\nvar assign = require('object-assign');\n\nvar _require2 = require('../operators/map'),\n    map = _require2.map;\n\nvar _require3 = require('../operators/filter'),\n    filter = _require3.filter;\n\nvar _require4 = require('../operators/reduce'),\n    reduce = _require4.reduce;\n/*\n A minimal rxjs based observable that align as closely as possible with the current es-observable spec,\n without the static factory methods\n */\n\n\nfunction SanityObservableMinimal() {\n  Observable.apply(this, arguments); // eslint-disable-line prefer-rest-params\n}\n\nSanityObservableMinimal.prototype = Object.create(assign(Object.create(null), Observable.prototype));\nObject.defineProperty(SanityObservableMinimal.prototype, 'constructor', {\n  value: SanityObservableMinimal,\n  enumerable: false,\n  writable: true,\n  configurable: true\n});\n\nSanityObservableMinimal.prototype.lift = function lift(operator) {\n  var observable = new SanityObservableMinimal();\n  observable.source = this;\n  observable.operator = operator;\n  return observable;\n};\n\nfunction createDeprecatedMemberOp(name, op) {\n  var hasWarned = false;\n  return function deprecatedOperator() {\n    if (!hasWarned) {\n      hasWarned = true;\n      console.warn(new Error(\"Calling observable.\".concat(name, \"(...) is deprecated. Please use observable.pipe(\").concat(name, \"(...)) instead\")));\n    }\n\n    return this.pipe(op.apply(this, arguments));\n  };\n}\n\nSanityObservableMinimal.prototype.map = createDeprecatedMemberOp('map', map);\nSanityObservableMinimal.prototype.filter = createDeprecatedMemberOp('filter', filter);\nSanityObservableMinimal.prototype.reduce = createDeprecatedMemberOp('filter', reduce);\nmodule.exports = SanityObservableMinimal;","module.exports = require('./lib/SanityObservableMinimal')\n","exports.filter = require('rxjs/internal/operators/filter').filter\n","exports.map = require('rxjs/internal/operators/map').map\n","exports.reduce = require('rxjs/internal/operators/reduce').reduce\n","'use strict';\nvar isObj = require('is-obj');\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Sources cannot be null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction assignKey(to, from, key) {\n\tvar val = from[key];\n\n\tif (val === undefined || val === null) {\n\t\treturn;\n\t}\n\n\tif (hasOwnProperty.call(to, key)) {\n\t\tif (to[key] === undefined || to[key] === null) {\n\t\t\tthrow new TypeError('Cannot convert undefined or null to object (' + key + ')');\n\t\t}\n\t}\n\n\tif (!hasOwnProperty.call(to, key) || !isObj(val)) {\n\t\tto[key] = val;\n\t} else {\n\t\tto[key] = assign(Object(to[key]), from[key]);\n\t}\n}\n\nfunction assign(to, from) {\n\tif (to === from) {\n\t\treturn to;\n\t}\n\n\tfrom = Object(from);\n\n\tfor (var key in from) {\n\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\tassignKey(to, from, key);\n\t\t}\n\t}\n\n\tif (Object.getOwnPropertySymbols) {\n\t\tvar symbols = Object.getOwnPropertySymbols(from);\n\n\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\tassignKey(to, from, symbols[i]);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n}\n\nmodule.exports = function deepAssign(target) {\n\ttarget = toObject(target);\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tassign(target, arguments[s]);\n\t}\n\n\treturn target;\n};\n","module.exports = require('./lib-node')\n","const pubsub = require('nano-pubsub')\nconst middlewareReducer = require('./util/middlewareReducer')\nconst processOptions = require('./middleware/defaultOptionsProcessor')\nconst validateOptions = require('./middleware/defaultOptionsValidator')\nconst httpRequester = require('./request') // node-request in node, browser-request in browsers\n\nconst channelNames = ['request', 'response', 'progress', 'error', 'abort']\nconst middlehooks = [\n  'processOptions',\n  'validateOptions',\n  'interceptRequest',\n  'finalizeOptions',\n  'onRequest',\n  'onResponse',\n  'onError',\n  'onReturn',\n  'onHeaders'\n]\n\nmodule.exports = function createRequester(initMiddleware = [], httpRequest = httpRequester) {\n  const loadedMiddleware = []\n  const middleware = middlehooks.reduce(\n    (ware, name) => {\n      ware[name] = ware[name] || []\n      return ware\n    },\n    {\n      processOptions: [processOptions],\n      validateOptions: [validateOptions]\n    }\n  )\n\n  function request(opts) {\n    const channels = channelNames.reduce((target, name) => {\n      target[name] = pubsub()\n      return target\n    }, {})\n\n    // Prepare a middleware reducer that can be reused throughout the lifecycle\n    const applyMiddleware = middlewareReducer(middleware)\n\n    // Parse the passed options\n    const options = applyMiddleware('processOptions', opts)\n\n    // Validate the options\n    applyMiddleware('validateOptions', options)\n\n    // Build a context object we can pass to child handlers\n    const context = {options, channels, applyMiddleware}\n\n    // We need to hold a reference to the current, ongoing request,\n    // in order to allow cancellation. In the case of the retry middleware,\n    // a new request might be triggered\n    let ongoingRequest = null\n    const unsubscribe = channels.request.subscribe(ctx => {\n      // Let request adapters (node/browser) perform the actual request\n      ongoingRequest = httpRequest(ctx, (err, res) => onResponse(err, res, ctx))\n    })\n\n    // If we abort the request, prevent further requests from happening,\n    // and be sure to cancel any ongoing request (obviously)\n    channels.abort.subscribe(() => {\n      unsubscribe()\n      if (ongoingRequest) {\n        ongoingRequest.abort()\n      }\n    })\n\n    // See if any middleware wants to modify the return value - for instance\n    // the promise or observable middlewares\n    const returnValue = applyMiddleware('onReturn', channels, context)\n\n    // If return value has been modified by a middleware, we expect the middleware\n    // to publish on the 'request' channel. If it hasn't been modified, we want to\n    // trigger it right away\n    if (returnValue === channels) {\n      channels.request.publish(context)\n    }\n\n    return returnValue\n\n    function onResponse(reqErr, res, ctx) {\n      let error = reqErr\n      let response = res\n\n      // We're processing non-errors first, in case a middleware converts the\n      // response into an error (for instance, status >= 400 == HttpError)\n      if (!error) {\n        try {\n          response = applyMiddleware('onResponse', res, ctx)\n        } catch (err) {\n          response = null\n          error = err\n        }\n      }\n\n      // Apply error middleware - if middleware return the same (or a different) error,\n      // publish as an error event. If we *don't* return an error, assume it has been handled\n      error = error && applyMiddleware('onError', error, ctx)\n\n      // Figure out if we should publish on error/response channels\n      if (error) {\n        channels.error.publish(error)\n      } else if (response) {\n        channels.response.publish(response)\n      }\n    }\n  }\n\n  request.use = function use(newMiddleware) {\n    if (!newMiddleware) {\n      throw new Error('Tried to add middleware that resolved to falsey value')\n    }\n\n    if (typeof newMiddleware === 'function') {\n      throw new Error(\n        'Tried to add middleware that was a function. It probably expects you to pass options to it.'\n      )\n    }\n\n    if (newMiddleware.onReturn && middleware.onReturn.length > 0) {\n      throw new Error(\n        'Tried to add new middleware with `onReturn` handler, but another handler has already been registered for this event'\n      )\n    }\n\n    middlehooks.forEach(key => {\n      if (newMiddleware[key]) {\n        middleware[key].push(newMiddleware[key])\n      }\n    })\n\n    loadedMiddleware.push(newMiddleware)\n    return request\n  }\n\n  request.clone = function clone() {\n    return createRequester(loadedMiddleware)\n  }\n\n  initMiddleware.forEach(request.use)\n\n  return request\n}\n","const objectAssign = require('object-assign')\nconst urlParse = require('url-parse')\n\nconst isReactNative = typeof navigator === 'undefined' ? false : navigator.product === 'ReactNative'\n\nconst has = Object.prototype.hasOwnProperty\nconst defaultOptions = {timeout: isReactNative ? 60000 : 120000}\n\nmodule.exports = opts => {\n  const options =\n    typeof opts === 'string'\n      ? objectAssign({url: opts}, defaultOptions)\n      : objectAssign({}, defaultOptions, opts)\n\n  // Parse URL into parts\n  const url = urlParse(\n    options.url,\n    {}, // Don't use current browser location\n    true // Parse query strings\n  )\n\n  // Normalize timeouts\n  options.timeout = normalizeTimeout(options.timeout)\n\n  // Shallow-merge (override) existing query params\n  if (options.query) {\n    url.query = objectAssign({}, url.query, removeUndefined(options.query))\n  }\n\n  // Implicit POST if we have not specified a method but have a body\n  options.method =\n    options.body && !options.method ? 'POST' : (options.method || 'GET').toUpperCase()\n\n  // Stringify URL\n  options.url = url.toString(stringifyQueryString)\n\n  return options\n}\n\nfunction stringifyQueryString(obj) {\n  const pairs = []\n  for (const key in obj) {\n    if (has.call(obj, key)) {\n      push(key, obj[key])\n    }\n  }\n\n  return pairs.length ? pairs.join('&') : ''\n\n  function push(key, val) {\n    if (Array.isArray(val)) {\n      val.forEach(item => push(key, item))\n    } else {\n      pairs.push([key, val].map(encodeURIComponent).join('='))\n    }\n  }\n}\n\nfunction normalizeTimeout(time) {\n  if (time === false || time === 0) {\n    return false\n  }\n\n  if (time.connect || time.socket) {\n    return time\n  }\n\n  const delay = Number(time)\n  if (isNaN(delay)) {\n    return normalizeTimeout(defaultOptions.timeout)\n  }\n\n  return {connect: delay, socket: delay}\n}\n\nfunction removeUndefined(obj) {\n  const target = {}\n  for (const key in obj) {\n    if (obj[key] !== undefined) {\n      target[key] = obj[key]\n    }\n  }\n  return target\n}\n","const validUrl = /^https?:\\/\\//i\n\nmodule.exports = options => {\n  if (!validUrl.test(options.url)) {\n    throw new Error(`\"${options.url}\" is not a valid URL`)\n  }\n}\n","const objectAssign = require('object-assign')\nconst isPlainObject = require('is-plain-object')\n\nconst serializeTypes = ['boolean', 'string', 'number']\nconst isBuffer = obj =>\n  !!obj.constructor &&\n  typeof obj.constructor.isBuffer === 'function' &&\n  obj.constructor.isBuffer(obj)\n\nmodule.exports = () => ({\n  processOptions: options => {\n    const body = options.body\n    if (!body) {\n      return options\n    }\n\n    const isStream = typeof body.pipe === 'function'\n    const shouldSerialize =\n      !isStream &&\n      !isBuffer(body) &&\n      (serializeTypes.indexOf(typeof body) !== -1 || Array.isArray(body) || isPlainObject(body))\n\n    if (!shouldSerialize) {\n      return options\n    }\n\n    return objectAssign({}, options, {\n      body: JSON.stringify(options.body),\n      headers: objectAssign({}, options.headers, {\n        'Content-Type': 'application/json'\n      })\n    })\n  }\n})\n","const objectAssign = require('object-assign')\n\nmodule.exports = opts => ({\n  onResponse: response => {\n    const contentType = response.headers['content-type'] || ''\n    const shouldDecode = (opts && opts.force) || contentType.indexOf('application/json') !== -1\n    if (!response.body || !contentType || !shouldDecode) {\n      return response\n    }\n\n    return objectAssign({}, response, {body: tryParse(response.body)})\n  },\n\n  processOptions: options =>\n    objectAssign({}, options, {\n      headers: objectAssign({Accept: 'application/json'}, options.headers)\n    })\n})\n\nfunction tryParse(body) {\n  try {\n    return JSON.parse(body)\n  } catch (err) {\n    err.message = `Failed to parsed response body as JSON: ${err.message}`\n    throw err\n  }\n}\n","const global = require('../util/global')\nconst objectAssign = require('object-assign')\n\nmodule.exports = (opts = {}) => {\n  const Observable = opts.implementation || global.Observable\n  if (!Observable) {\n    throw new Error(\n      '`Observable` is not available in global scope, and no implementation was passed'\n    )\n  }\n\n  return {\n    onReturn: (channels, context) =>\n      new Observable(observer => {\n        channels.error.subscribe(err => observer.error(err))\n        channels.progress.subscribe(event => observer.next(objectAssign({type: 'progress'}, event)))\n        channels.response.subscribe(response => {\n          observer.next(objectAssign({type: 'response'}, response))\n          observer.complete()\n        })\n\n        channels.request.publish(context)\n        return () => channels.abort.publish()\n      })\n  }\n}\n","module.exports = () => ({\n  onRequest: evt => {\n    if (evt.adapter !== 'xhr') {\n      return\n    }\n\n    const xhr = evt.request\n    const context = evt.context\n\n    if ('upload' in xhr && 'onprogress' in xhr.upload) {\n      xhr.upload.onprogress = handleProgress('upload')\n    }\n\n    if ('onprogress' in xhr) {\n      xhr.onprogress = handleProgress('download')\n    }\n\n    function handleProgress(stage) {\n      return event => {\n        const percent = event.lengthComputable ? (event.loaded / event.total) * 100 : -1\n        context.channels.progress.publish({\n          stage,\n          percent,\n          total: event.total,\n          loaded: event.loaded,\n          lengthComputable: event.lengthComputable\n        })\n      }\n    }\n  }\n})\n","module.exports = require('./node-progress')\n","/* eslint max-depth: [\"error\", 4] */\nconst sameOrigin = require('same-origin')\nconst parseHeaders = require('parse-headers')\nconst FetchXhr = require('./browser/fetchXhr')\n\nconst noop = function() {\n  /* intentional noop */\n}\n\nconst win = typeof window === 'undefined' ? undefined : window\nconst adapter = win ? 'xhr' : 'fetch'\n\nlet XmlHttpRequest = typeof XMLHttpRequest === 'function' ? XMLHttpRequest : noop\nconst hasXhr2 = 'withCredentials' in new XmlHttpRequest()\nconst XDR = typeof XDomainRequest === 'undefined' ? undefined : XDomainRequest\nlet CrossDomainRequest = hasXhr2 ? XmlHttpRequest : XDR\n\n// Fallback to fetch-based XHR polyfill for non-browser environments like Workers\nif (!win) {\n  XmlHttpRequest = FetchXhr\n  CrossDomainRequest = FetchXhr\n}\n\nmodule.exports = (context, callback) => {\n  const opts = context.options\n  const options = context.applyMiddleware('finalizeOptions', opts)\n  const timers = {}\n\n  // Deep-checking window.location because of react native, where `location` doesn't exist\n  const cors = win && win.location && !sameOrigin(win.location.href, options.url)\n\n  // Allow middleware to inject a response, for instance in the case of caching or mocking\n  const injectedResponse = context.applyMiddleware('interceptRequest', undefined, {\n    adapter,\n    context\n  })\n\n  // If middleware injected a response, treat it as we normally would and return it\n  // Do note that the injected response has to be reduced to a cross-environment friendly response\n  if (injectedResponse) {\n    const cbTimer = setTimeout(callback, 0, null, injectedResponse)\n    const cancel = () => clearTimeout(cbTimer)\n    return {abort: cancel}\n  }\n\n  // We'll want to null out the request on success/failure\n  let xhr = cors ? new CrossDomainRequest() : new XmlHttpRequest()\n\n  const isXdr = win && win.XDomainRequest && xhr instanceof win.XDomainRequest\n  const headers = options.headers\n  const delays = options.timeout\n\n  // Request state\n  let aborted = false\n  let loaded = false\n  let timedOut = false\n\n  // Apply event handlers\n  xhr.onerror = onError\n  xhr.ontimeout = onError\n  xhr.onabort = () => {\n    aborted = true\n  }\n\n  // IE9 must have onprogress be set to a unique function\n  xhr.onprogress = () => {\n    /* intentional noop */\n  }\n\n  const loadEvent = isXdr ? 'onload' : 'onreadystatechange'\n  xhr[loadEvent] = () => {\n    // Prevent request from timing out\n    resetTimers()\n\n    if (aborted || (xhr.readyState !== 4 && !isXdr)) {\n      return\n    }\n\n    // Will be handled by onError\n    if (xhr.status === 0) {\n      return\n    }\n\n    onLoad()\n  }\n\n  // @todo two last options to open() is username/password\n  xhr.open(\n    options.method,\n    options.url,\n    true // Always async\n  )\n\n  // Some options need to be applied after open\n  xhr.withCredentials = !!options.withCredentials\n\n  // Set headers\n  if (headers && xhr.setRequestHeader) {\n    for (const key in headers) {\n      if (headers.hasOwnProperty(key)) {\n        xhr.setRequestHeader(key, headers[key])\n      }\n    }\n  } else if (headers && isXdr) {\n    throw new Error('Headers cannot be set on an XDomainRequest object')\n  }\n\n  if (options.rawBody) {\n    xhr.responseType = 'arraybuffer'\n  }\n\n  // Let middleware know we're about to do a request\n  context.applyMiddleware('onRequest', {options, adapter, request: xhr, context})\n\n  xhr.send(options.body || null)\n\n  // Figure out which timeouts to use (if any)\n  if (delays) {\n    timers.connect = setTimeout(() => timeoutRequest('ETIMEDOUT'), delays.connect)\n  }\n\n  return {abort}\n\n  function abort() {\n    aborted = true\n\n    if (xhr) {\n      xhr.abort()\n    }\n  }\n\n  function timeoutRequest(code) {\n    timedOut = true\n    xhr.abort()\n    const error = new Error(\n      code === 'ESOCKETTIMEDOUT'\n        ? `Socket timed out on request to ${options.url}`\n        : `Connection timed out on request to ${options.url}`\n    )\n    error.code = code\n    context.channels.error.publish(error)\n  }\n\n  function resetTimers() {\n    if (!delays) {\n      return\n    }\n\n    stopTimers()\n    timers.socket = setTimeout(() => timeoutRequest('ESOCKETTIMEDOUT'), delays.socket)\n  }\n\n  function stopTimers() {\n    // Only clear the connect timeout if we've got a connection\n    if (aborted || (xhr.readyState >= 2 && timers.connect)) {\n      clearTimeout(timers.connect)\n    }\n\n    if (timers.socket) {\n      clearTimeout(timers.socket)\n    }\n  }\n\n  function onError(error) {\n    if (loaded) {\n      return\n    }\n\n    // Clean up\n    stopTimers()\n    loaded = true\n    xhr = null\n\n    // Annoyingly, details are extremely scarce and hidden from us.\n    // We only really know that it is a network error\n    const err = error || new Error(`Network error while attempting to reach ${options.url}`)\n    err.isNetworkError = true\n    err.request = options\n    callback(err)\n  }\n\n  function reduceResponse() {\n    let statusCode = xhr.status\n    let statusMessage = xhr.statusText\n\n    if (isXdr && statusCode === undefined) {\n      // IE8 CORS GET successful response doesn't have a status field, but body is fine\n      statusCode = 200\n    } else if (statusCode > 12000 && statusCode < 12156) {\n      // Yet another IE quirk where it emits weird status codes on network errors\n      // https://support.microsoft.com/en-us/kb/193625\n      return onError()\n    } else {\n      // Another IE bug where HTTP 204 somehow ends up as 1223\n      statusCode = xhr.status === 1223 ? 204 : xhr.status\n      statusMessage = xhr.status === 1223 ? 'No Content' : statusMessage\n    }\n\n    return {\n      body: xhr.response || xhr.responseText,\n      url: options.url,\n      method: options.method,\n      headers: isXdr ? {} : parseHeaders(xhr.getAllResponseHeaders()),\n      statusCode: statusCode,\n      statusMessage: statusMessage\n    }\n  }\n\n  function onLoad() {\n    if (aborted || loaded || timedOut) {\n      return\n    }\n\n    if (xhr.status === 0) {\n      onError(new Error('Unknown XHR error'))\n      return\n    }\n\n    // Prevent being called twice\n    stopTimers()\n    loaded = true\n    callback(null, reduceResponse())\n  }\n}\n","/**\n * Mimicks the XMLHttpRequest API with only the parts needed for get-it's XHR adapter\n */\nfunction FetchXhr() {\n  this.readyState = 0 // Unsent\n}\nFetchXhr.prototype.open = function(method, url) {\n  this._method = method\n  this._url = url\n  this._resHeaders = ''\n  this.readyState = 1 // Open\n  this.onreadystatechange()\n}\nFetchXhr.prototype.abort = function() {\n  if (this._controller) {\n    this._controller.abort()\n  }\n}\nFetchXhr.prototype.getAllResponseHeaders = function() {\n  return this._resHeaders\n}\nFetchXhr.prototype.setRequestHeader = function(key, value) {\n  this._headers = this._headers || {}\n  this._headers[key] = value\n}\nFetchXhr.prototype.send = function(body) {\n  // eslint-disable-next-line no-multi-assign\n  const ctrl = (this._controller = typeof AbortController === 'function' && new AbortController())\n  const textBody = this.responseType !== 'arraybuffer'\n  const options = {\n    method: this._method,\n    headers: this._headers,\n    signal: ctrl && ctrl.signal,\n    body\n  }\n\n  // Some environments (like CloudFlare workers) don't support credentials in\n  // RequestInitDict, and there doesn't seem to be any easy way to check for it,\n  // so for now let's just make do with a window check :/\n  if (typeof window !== 'undefined') {\n    options.credentials = this.withCredentials ? 'include' : 'omit'\n  }\n\n  fetch(this._url, options)\n    .then(res => {\n      res.headers.forEach((value, key) => {\n        this._resHeaders += `${key}: ${value}\\r\\n`\n      })\n      this.status = res.status\n      this.statusText = res.statusText\n      this.readyState = 3 // Loading\n      return textBody ? res.text() : res.arrayBuffer()\n    })\n    .then(resBody => {\n      if (textBody) {\n        this.responseText = resBody\n      } else {\n        this.response = resBody\n      }\n      this.readyState = 4 // Done\n      this.onreadystatechange()\n    })\n    .catch(err => {\n      if (err.name === 'AbortError') {\n        this.onabort()\n        return\n      }\n\n      this.onerror(err)\n    })\n}\n\nmodule.exports = FetchXhr\n","module.exports = require('./node-request')\n","/* eslint-disable no-negated-condition */\nif (typeof window !== 'undefined') {\n  module.exports = window\n} else if (typeof global !== 'undefined') {\n  module.exports = global\n} else if (typeof self !== 'undefined') {\n  module.exports = self\n} else {\n  module.exports = {}\n}\n","module.exports = middleware => {\n  const applyMiddleware = (hook, defaultValue, ...args) => {\n    const bailEarly = hook === 'onError'\n\n    let value = defaultValue\n    for (let i = 0; i < middleware[hook].length; i++) {\n      const handler = middleware[hook][i]\n      value = handler(value, ...args)\n\n      if (bailEarly && !value) {\n        break\n      }\n    }\n\n    return value\n  }\n\n  return applyMiddleware\n}\n","'use strict';\nmodule.exports = function (x) {\n\tvar type = typeof x;\n\treturn x !== null && (type === 'object' || type === 'function');\n};\n","/*!\n * is-plain-object <https://github.com/jonschlinkert/is-plain-object>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nvar isObject = require('isobject');\n\nfunction isObjectObject(o) {\n  return isObject(o) === true\n    && Object.prototype.toString.call(o) === '[object Object]';\n}\n\nmodule.exports = function isPlainObject(o) {\n  var ctor,prot;\n\n  if (isObjectObject(o) === false) return false;\n\n  // If has modified constructor\n  ctor = o.constructor;\n  if (typeof ctor !== 'function') return false;\n\n  // If has modified prototype\n  prot = ctor.prototype;\n  if (isObjectObject(prot) === false) return false;\n\n  // If constructor does not have an Object-specific method\n  if (prot.hasOwnProperty('isPrototypeOf') === false) {\n    return false;\n  }\n\n  // Most likely a plain Object\n  return true;\n};\n","/*!\n * isobject <https://github.com/jonschlinkert/isobject>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nmodule.exports = function isObject(val) {\n  return val != null && typeof val === 'object' && Array.isArray(val) === false;\n};\n","// ISC @ Julien Fontanet\n\n\"use strict\";\n\n// ===================================================================\n\nvar construct = typeof Reflect !== \"undefined\" ? Reflect.construct : undefined;\nvar defineProperty = Object.defineProperty;\n\n// -------------------------------------------------------------------\n\nvar captureStackTrace = Error.captureStackTrace;\nif (captureStackTrace === undefined) {\n  captureStackTrace = function captureStackTrace(error) {\n    var container = new Error();\n\n    defineProperty(error, \"stack\", {\n      configurable: true,\n      get: function getStack() {\n        var stack = container.stack;\n\n        // Replace property with value for faster future accesses.\n        defineProperty(this, \"stack\", {\n          configurable: true,\n          value: stack,\n          writable: true,\n        });\n\n        return stack;\n      },\n      set: function setStack(stack) {\n        defineProperty(error, \"stack\", {\n          configurable: true,\n          value: stack,\n          writable: true,\n        });\n      },\n    });\n  };\n}\n\n// -------------------------------------------------------------------\n\nfunction BaseError(message) {\n  if (message !== undefined) {\n    defineProperty(this, \"message\", {\n      configurable: true,\n      value: message,\n      writable: true,\n    });\n  }\n\n  var cname = this.constructor.name;\n  if (cname !== undefined && cname !== this.name) {\n    defineProperty(this, \"name\", {\n      configurable: true,\n      value: cname,\n      writable: true,\n    });\n  }\n\n  captureStackTrace(this, this.constructor);\n}\n\nBaseError.prototype = Object.create(Error.prototype, {\n  // See: https://github.com/JsCommunity/make-error/issues/4\n  constructor: {\n    configurable: true,\n    value: BaseError,\n    writable: true,\n  },\n});\n\n// -------------------------------------------------------------------\n\n// Sets the name of a function if possible (depends of the JS engine).\nvar setFunctionName = (function() {\n  function setFunctionName(fn, name) {\n    return defineProperty(fn, \"name\", {\n      configurable: true,\n      value: name,\n    });\n  }\n  try {\n    var f = function() {};\n    setFunctionName(f, \"foo\");\n    if (f.name === \"foo\") {\n      return setFunctionName;\n    }\n  } catch (_) {}\n})();\n\n// -------------------------------------------------------------------\n\nfunction makeError(constructor, super_) {\n  if (super_ == null || super_ === Error) {\n    super_ = BaseError;\n  } else if (typeof super_ !== \"function\") {\n    throw new TypeError(\"super_ should be a function\");\n  }\n\n  var name;\n  if (typeof constructor === \"string\") {\n    name = constructor;\n    constructor =\n      construct !== undefined\n        ? function() {\n            return construct(super_, arguments, this.constructor);\n          }\n        : function() {\n            super_.apply(this, arguments);\n          };\n\n    // If the name can be set, do it once and for all.\n    if (setFunctionName !== undefined) {\n      setFunctionName(constructor, name);\n      name = undefined;\n    }\n  } else if (typeof constructor !== \"function\") {\n    throw new TypeError(\"constructor should be either a string or a function\");\n  }\n\n  // Also register the super constructor also as `constructor.super_` just\n  // like Node's `util.inherits()`.\n  //\n  // eslint-disable-next-line dot-notation\n  constructor.super_ = constructor[\"super\"] = super_;\n\n  var properties = {\n    constructor: {\n      configurable: true,\n      value: constructor,\n      writable: true,\n    },\n  };\n\n  // If the name could not be set on the constructor, set it on the\n  // prototype.\n  if (name !== undefined) {\n    properties.name = {\n      configurable: true,\n      value: name,\n      writable: true,\n    };\n  }\n  constructor.prototype = Object.create(super_.prototype, properties);\n\n  return constructor;\n}\nexports = module.exports = makeError;\nexports.BaseError = BaseError;\n","module.exports = function Pubsub() {\n  var subscribers = []\n  return {\n    subscribe: subscribe,\n    publish: publish\n  }\n  function subscribe(subscriber) {\n    subscribers.push(subscriber)\n    return function unsubscribe() {\n      var idx = subscribers.indexOf(subscriber)\n      if (idx > -1) {\n        subscribers.splice(idx, 1)\n      }\n    }\n  }\n  function publish() {\n    for (var i = 0; i < subscribers.length; i++) {\n      subscribers[i].apply(null, arguments)\n    }\n  }\n}","var trim = function(string) {\n  return string.replace(/^\\s+|\\s+$/g, '');\n}\n  , isArray = function(arg) {\n      return Object.prototype.toString.call(arg) === '[object Array]';\n    }\n\nmodule.exports = function (headers) {\n  if (!headers)\n    return {}\n\n  var result = {}\n\n  var headersArr = trim(headers).split('\\n')\n\n  for (var i = 0; i < headersArr.length; i++) {\n    var row = headersArr[i]\n    var index = row.indexOf(':')\n    , key = trim(row.slice(0, index)).toLowerCase()\n    , value = trim(row.slice(index + 1))\n\n    if (typeof(result[key]) === 'undefined') {\n      result[key] = value\n    } else if (isArray(result[key])) {\n      result[key].push(value)\n    } else {\n      result[key] = [ result[key], value ]\n    }\n  }\n\n  return result\n}\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , undef;\n\n/**\n * Decode a URI encoded string.\n *\n * @param {String} input The URI encoded string.\n * @returns {String|Null} The decoded string.\n * @api private\n */\nfunction decode(input) {\n  try {\n    return decodeURIComponent(input.replace(/\\+/g, ' '));\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n * Attempts to encode a given input.\n *\n * @param {String} input The string that needs to be encoded.\n * @returns {String|Null} The encoded string.\n * @api private\n */\nfunction encode(input) {\n  try {\n    return encodeURIComponent(input);\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n * Simple query string parser.\n *\n * @param {String} query The query string that needs to be parsed.\n * @returns {Object}\n * @api public\n */\nfunction querystring(query) {\n  var parser = /([^=?#&]+)=?([^&]*)/g\n    , result = {}\n    , part;\n\n  while (part = parser.exec(query)) {\n    var key = decode(part[1])\n      , value = decode(part[2]);\n\n    //\n    // Prevent overriding of existing properties. This ensures that build-in\n    // methods like `toString` or __proto__ are not overriden by malicious\n    // querystrings.\n    //\n    // In the case if failed decoding, we want to omit the key/value pairs\n    // from the result.\n    //\n    if (key === null || value === null || key in result) continue;\n    result[key] = value;\n  }\n\n  return result;\n}\n\n/**\n * Transform a query string to an object.\n *\n * @param {Object} obj Object that should be transformed.\n * @param {String} prefix Optional prefix.\n * @returns {String}\n * @api public\n */\nfunction querystringify(obj, prefix) {\n  prefix = prefix || '';\n\n  var pairs = []\n    , value\n    , key;\n\n  //\n  // Optionally prefix with a '?' if needed\n  //\n  if ('string' !== typeof prefix) prefix = '?';\n\n  for (key in obj) {\n    if (has.call(obj, key)) {\n      value = obj[key];\n\n      //\n      // Edge cases where we actually want to encode the value to an empty\n      // string instead of the stringified value.\n      //\n      if (!value && (value === null || value === undef || isNaN(value))) {\n        value = '';\n      }\n\n      key = encode(key);\n      value = encode(value);\n\n      //\n      // If we failed to encode the strings, we should bail out as we don't\n      // want to add invalid strings to the query.\n      //\n      if (key === null || value === null) continue;\n      pairs.push(key +'='+ value);\n    }\n  }\n\n  return pairs.length ? prefix + pairs.join('&') : '';\n}\n\n//\n// Expose the module.\n//\nexports.stringify = querystringify;\nexports.parse = querystring;\n","'use strict';\n\n/**\n * Check if we're required to add a port number.\n *\n * @see https://url.spec.whatwg.org/#default-port\n * @param {Number|String} port Port number we need to check\n * @param {String} protocol Protocol we need to check against.\n * @returns {Boolean} Is it a default port for the given protocol\n * @api private\n */\nmodule.exports = function required(port, protocol) {\n  protocol = protocol.split(':')[0];\n  port = +port;\n\n  if (!port) return false;\n\n  switch (protocol) {\n    case 'http':\n    case 'ws':\n    return port !== 80;\n\n    case 'https':\n    case 'wss':\n    return port !== 443;\n\n    case 'ftp':\n    return port !== 21;\n\n    case 'gopher':\n    return port !== 70;\n\n    case 'file':\n    return false;\n  }\n\n  return port !== 0;\n};\n","import { Operator } from './Operator';\nimport { Subscriber } from './Subscriber';\nimport { Subscription } from './Subscription';\nimport { TeardownLogic, OperatorFunction, PartialObserver, Subscribable } from './types';\nimport { canReportError } from './util/canReportError';\nimport { toSubscriber } from './util/toSubscriber';\nimport { iif } from './observable/iif';\nimport { throwError } from './observable/throwError';\nimport { observable as Symbol_observable } from './symbol/observable';\nimport { pipeFromArray } from './util/pipe';\nimport { config } from './config';\n\n/**\n * A representation of any set of values over any amount of time. This is the most basic building block\n * of RxJS.\n *\n * @class Observable<T>\n */\nexport class Observable<T> implements Subscribable<T> {\n\n  /** Internal implementation detail, do not use directly. */\n  public _isScalar: boolean = false;\n\n  /** @deprecated This is an internal implementation detail, do not use. */\n  source: Observable<any>;\n\n  /** @deprecated This is an internal implementation detail, do not use. */\n  operator: Operator<any, T>;\n\n  /**\n   * @constructor\n   * @param {Function} subscribe the function that is called when the Observable is\n   * initially subscribed to. This function is given a Subscriber, to which new values\n   * can be `next`ed, or an `error` method can be called to raise an error, or\n   * `complete` can be called to notify of a successful completion.\n   */\n  constructor(subscribe?: (this: Observable<T>, subscriber: Subscriber<T>) => TeardownLogic) {\n    if (subscribe) {\n      this._subscribe = subscribe;\n    }\n  }\n\n  // HACK: Since TypeScript inherits static properties too, we have to\n  // fight against TypeScript here so Subject can have a different static create signature\n  /**\n   * Creates a new cold Observable by calling the Observable constructor\n   * @static true\n   * @owner Observable\n   * @method create\n   * @param {Function} subscribe? the subscriber function to be passed to the Observable constructor\n   * @return {Observable} a new cold observable\n   * @nocollapse\n   * @deprecated use new Observable() instead\n   */\n  static create: Function = <T>(subscribe?: (subscriber: Subscriber<T>) => TeardownLogic) => {\n    return new Observable<T>(subscribe);\n  }\n\n  /**\n   * Creates a new Observable, with this Observable as the source, and the passed\n   * operator defined as the new observable's operator.\n   * @method lift\n   * @param {Operator} operator the operator defining the operation to take on the observable\n   * @return {Observable} a new observable with the Operator applied\n   */\n  lift<R>(operator: Operator<T, R>): Observable<R> {\n    const observable = new Observable<R>();\n    observable.source = this;\n    observable.operator = operator;\n    return observable;\n  }\n\n  subscribe(observer?: PartialObserver<T>): Subscription;\n  /** @deprecated Use an observer instead of a complete callback */\n  subscribe(next: null | undefined, error: null | undefined, complete: () => void): Subscription;\n  /** @deprecated Use an observer instead of an error callback */\n  subscribe(next: null | undefined, error: (error: any) => void, complete?: () => void): Subscription;\n  /** @deprecated Use an observer instead of a complete callback */\n  subscribe(next: (value: T) => void, error: null | undefined, complete: () => void): Subscription;\n  subscribe(next?: (value: T) => void, error?: (error: any) => void, complete?: () => void): Subscription;\n  /**\n   * Invokes an execution of an Observable and registers Observer handlers for notifications it will emit.\n   *\n   * <span class=\"informal\">Use it when you have all these Observables, but still nothing is happening.</span>\n   *\n   * `subscribe` is not a regular operator, but a method that calls Observable's internal `subscribe` function. It\n   * might be for example a function that you passed to Observable's constructor, but most of the time it is\n   * a library implementation, which defines what will be emitted by an Observable, and when it be will emitted. This means\n   * that calling `subscribe` is actually the moment when Observable starts its work, not when it is created, as it is often\n   * the thought.\n   *\n   * Apart from starting the execution of an Observable, this method allows you to listen for values\n   * that an Observable emits, as well as for when it completes or errors. You can achieve this in two\n   * of the following ways.\n   *\n   * The first way is creating an object that implements {@link Observer} interface. It should have methods\n   * defined by that interface, but note that it should be just a regular JavaScript object, which you can create\n   * yourself in any way you want (ES6 class, classic function constructor, object literal etc.). In particular do\n   * not attempt to use any RxJS implementation details to create Observers - you don't need them. Remember also\n   * that your object does not have to implement all methods. If you find yourself creating a method that doesn't\n   * do anything, you can simply omit it. Note however, if the `error` method is not provided, all errors will\n   * be left uncaught.\n   *\n   * The second way is to give up on Observer object altogether and simply provide callback functions in place of its methods.\n   * This means you can provide three functions as arguments to `subscribe`, where the first function is equivalent\n   * of a `next` method, the second of an `error` method and the third of a `complete` method. Just as in case of Observer,\n   * if you do not need to listen for something, you can omit a function, preferably by passing `undefined` or `null`,\n   * since `subscribe` recognizes these functions by where they were placed in function call. When it comes\n   * to `error` function, just as before, if not provided, errors emitted by an Observable will be thrown.\n   *\n   * Whichever style of calling `subscribe` you use, in both cases it returns a Subscription object.\n   * This object allows you to call `unsubscribe` on it, which in turn will stop the work that an Observable does and will clean\n   * up all resources that an Observable used. Note that cancelling a subscription will not call `complete` callback\n   * provided to `subscribe` function, which is reserved for a regular completion signal that comes from an Observable.\n   *\n   * Remember that callbacks provided to `subscribe` are not guaranteed to be called asynchronously.\n   * It is an Observable itself that decides when these functions will be called. For example {@link of}\n   * by default emits all its values synchronously. Always check documentation for how given Observable\n   * will behave when subscribed and if its default behavior can be modified with a `scheduler`.\n   *\n   * ## Example\n   * ### Subscribe with an Observer\n   * ```ts\n   * import { of } from 'rxjs';\n   *\n   * const sumObserver = {\n   *   sum: 0,\n   *   next(value) {\n   *     console.log('Adding: ' + value);\n   *     this.sum = this.sum + value;\n   *   },\n   *   error() {\n   *     // We actually could just remove this method,\n   *     // since we do not really care about errors right now.\n   *   },\n   *   complete() {\n   *     console.log('Sum equals: ' + this.sum);\n   *   }\n   * };\n   *\n   * of(1, 2, 3) // Synchronously emits 1, 2, 3 and then completes.\n   *   .subscribe(sumObserver);\n   *\n   * // Logs:\n   * // \"Adding: 1\"\n   * // \"Adding: 2\"\n   * // \"Adding: 3\"\n   * // \"Sum equals: 6\"\n   * ```\n   *\n   * ### Subscribe with functions\n   * ```ts\n   * import { of } from 'rxjs'\n   *\n   * let sum = 0;\n   *\n   * of(1, 2, 3).subscribe(\n   *   value => {\n   *     console.log('Adding: ' + value);\n   *     sum = sum + value;\n   *   },\n   *   undefined,\n   *   () => console.log('Sum equals: ' + sum)\n   * );\n   *\n   * // Logs:\n   * // \"Adding: 1\"\n   * // \"Adding: 2\"\n   * // \"Adding: 3\"\n   * // \"Sum equals: 6\"\n   * ```\n   *\n   * ### Cancel a subscription\n   * ```ts\n   * import { interval } from 'rxjs';\n   *\n   * const subscription = interval(1000).subscribe(\n   *   num => console.log(num),\n   *   undefined,\n   *   () => {\n   *     // Will not be called, even when cancelling subscription.\n   *     console.log('completed!');\n   *   }\n   * );\n   *\n   * setTimeout(() => {\n   *   subscription.unsubscribe();\n   *   console.log('unsubscribed!');\n   * }, 2500);\n   *\n   * // Logs:\n   * // 0 after 1s\n   * // 1 after 2s\n   * // \"unsubscribed!\" after 2.5s\n   * ```\n   *\n   * @param {Observer|Function} observerOrNext (optional) Either an observer with methods to be called,\n   *  or the first of three possible handlers, which is the handler for each value emitted from the subscribed\n   *  Observable.\n   * @param {Function} error (optional) A handler for a terminal event resulting from an error. If no error handler is provided,\n   *  the error will be thrown as unhandled.\n   * @param {Function} complete (optional) A handler for a terminal event resulting from successful completion.\n   * @return {ISubscription} a subscription reference to the registered handlers\n   * @method subscribe\n   */\n  subscribe(observerOrNext?: PartialObserver<T> | ((value: T) => void),\n            error?: (error: any) => void,\n            complete?: () => void): Subscription {\n\n    const { operator } = this;\n    const sink = toSubscriber(observerOrNext, error, complete);\n\n    if (operator) {\n      sink.add(operator.call(sink, this.source));\n    } else {\n      sink.add(\n        this.source || (config.useDeprecatedSynchronousErrorHandling && !sink.syncErrorThrowable) ?\n        this._subscribe(sink) :\n        this._trySubscribe(sink)\n      );\n    }\n\n    if (config.useDeprecatedSynchronousErrorHandling) {\n      if (sink.syncErrorThrowable) {\n        sink.syncErrorThrowable = false;\n        if (sink.syncErrorThrown) {\n          throw sink.syncErrorValue;\n        }\n      }\n    }\n\n    return sink;\n  }\n\n  /** @deprecated This is an internal implementation detail, do not use. */\n  _trySubscribe(sink: Subscriber<T>): TeardownLogic {\n    try {\n      return this._subscribe(sink);\n    } catch (err) {\n      if (config.useDeprecatedSynchronousErrorHandling) {\n        sink.syncErrorThrown = true;\n        sink.syncErrorValue = err;\n      }\n      if (canReportError(sink)) {\n        sink.error(err);\n      } else {\n        console.warn(err);\n      }\n    }\n  }\n\n  /**\n   * @method forEach\n   * @param {Function} next a handler for each value emitted by the observable\n   * @param {PromiseConstructor} [promiseCtor] a constructor function used to instantiate the Promise\n   * @return {Promise} a promise that either resolves on observable completion or\n   *  rejects with the handled error\n   */\n  forEach(next: (value: T) => void, promiseCtor?: PromiseConstructorLike): Promise<void> {\n    promiseCtor = getPromiseCtor(promiseCtor);\n\n    return new promiseCtor<void>((resolve, reject) => {\n      // Must be declared in a separate statement to avoid a ReferenceError when\n      // accessing subscription below in the closure due to Temporal Dead Zone.\n      let subscription: Subscription;\n      subscription = this.subscribe((value) => {\n        try {\n          next(value);\n        } catch (err) {\n          reject(err);\n          if (subscription) {\n            subscription.unsubscribe();\n          }\n        }\n      }, reject, resolve);\n    }) as Promise<void>;\n  }\n\n  /** @internal This is an internal implementation detail, do not use. */\n  _subscribe(subscriber: Subscriber<any>): TeardownLogic {\n    const { source } = this;\n    return source && source.subscribe(subscriber);\n  }\n\n  // `if` and `throw` are special snow flakes, the compiler sees them as reserved words. Deprecated in\n  // favor of iif and throwError functions.\n  /**\n   * @nocollapse\n   * @deprecated In favor of iif creation function: import { iif } from 'rxjs';\n   */\n  static if: typeof iif;\n  /**\n   * @nocollapse\n   * @deprecated In favor of throwError creation function: import { throwError } from 'rxjs';\n   */\n  static throw: typeof throwError;\n\n  /**\n   * An interop point defined by the es7-observable spec https://github.com/zenparsing/es-observable\n   * @method Symbol.observable\n   * @return {Observable} this instance of the observable\n   */\n  [Symbol_observable]() {\n    return this;\n  }\n\n  /* tslint:disable:max-line-length */\n  pipe(): Observable<T>;\n  pipe<A>(op1: OperatorFunction<T, A>): Observable<A>;\n  pipe<A, B>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>): Observable<B>;\n  pipe<A, B, C>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>, op3: OperatorFunction<B, C>): Observable<C>;\n  pipe<A, B, C, D>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>, op3: OperatorFunction<B, C>, op4: OperatorFunction<C, D>): Observable<D>;\n  pipe<A, B, C, D, E>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>, op3: OperatorFunction<B, C>, op4: OperatorFunction<C, D>, op5: OperatorFunction<D, E>): Observable<E>;\n  pipe<A, B, C, D, E, F>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>, op3: OperatorFunction<B, C>, op4: OperatorFunction<C, D>, op5: OperatorFunction<D, E>, op6: OperatorFunction<E, F>): Observable<F>;\n  pipe<A, B, C, D, E, F, G>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>, op3: OperatorFunction<B, C>, op4: OperatorFunction<C, D>, op5: OperatorFunction<D, E>, op6: OperatorFunction<E, F>, op7: OperatorFunction<F, G>): Observable<G>;\n  pipe<A, B, C, D, E, F, G, H>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>, op3: OperatorFunction<B, C>, op4: OperatorFunction<C, D>, op5: OperatorFunction<D, E>, op6: OperatorFunction<E, F>, op7: OperatorFunction<F, G>, op8: OperatorFunction<G, H>): Observable<H>;\n  pipe<A, B, C, D, E, F, G, H, I>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>, op3: OperatorFunction<B, C>, op4: OperatorFunction<C, D>, op5: OperatorFunction<D, E>, op6: OperatorFunction<E, F>, op7: OperatorFunction<F, G>, op8: OperatorFunction<G, H>, op9: OperatorFunction<H, I>): Observable<I>;\n  pipe<A, B, C, D, E, F, G, H, I>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>, op3: OperatorFunction<B, C>, op4: OperatorFunction<C, D>, op5: OperatorFunction<D, E>, op6: OperatorFunction<E, F>, op7: OperatorFunction<F, G>, op8: OperatorFunction<G, H>, op9: OperatorFunction<H, I>, ...operations: OperatorFunction<any, any>[]): Observable<{}>;\n  /* tslint:enable:max-line-length */\n\n  /**\n   * Used to stitch together functional operators into a chain.\n   * @method pipe\n   * @return {Observable} the Observable result of all of the operators having\n   * been called in the order they were passed in.\n   *\n   * ### Example\n   * ```ts\n   * import { interval } from 'rxjs';\n   * import { map, filter, scan } from 'rxjs/operators';\n   *\n   * interval(1000)\n   *   .pipe(\n   *     filter(x => x % 2 === 0),\n   *     map(x => x + x),\n   *     scan((acc, x) => acc + x)\n   *   )\n   *   .subscribe(x => console.log(x))\n   * ```\n   */\n  pipe(...operations: OperatorFunction<any, any>[]): Observable<any> {\n    if (operations.length === 0) {\n      return this as any;\n    }\n\n    return pipeFromArray(operations)(this);\n  }\n\n  /* tslint:disable:max-line-length */\n  toPromise<T>(this: Observable<T>): Promise<T>;\n  toPromise<T>(this: Observable<T>, PromiseCtor: typeof Promise): Promise<T>;\n  toPromise<T>(this: Observable<T>, PromiseCtor: PromiseConstructorLike): Promise<T>;\n  /* tslint:enable:max-line-length */\n\n  toPromise(promiseCtor?: PromiseConstructorLike): Promise<T> {\n    promiseCtor = getPromiseCtor(promiseCtor);\n\n    return new promiseCtor((resolve, reject) => {\n      let value: any;\n      this.subscribe((x: T) => value = x, (err: any) => reject(err), () => resolve(value));\n    }) as Promise<T>;\n  }\n}\n\n/**\n * Decides between a passed promise constructor from consuming code,\n * A default configured promise constructor, and the native promise\n * constructor and returns it. If nothing can be found, it will throw\n * an error.\n * @param promiseCtor The optional promise constructor to passed by consuming code\n */\nfunction getPromiseCtor(promiseCtor: PromiseConstructorLike | undefined) {\n  if (!promiseCtor) {\n    promiseCtor = config.Promise || Promise;\n  }\n\n  if (!promiseCtor) {\n    throw new Error('no Promise impl found');\n  }\n\n  return promiseCtor;\n}\n","import { Observer } from './types';\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\n\nexport const empty: Observer<any> = {\n  closed: true,\n  next(value: any): void { /* noop */},\n  error(err: any): void {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n      throw err;\n    } else {\n      hostReportError(err);\n    }\n  },\n  complete(): void { /*noop*/ }\n};\n","import { isFunction } from './util/isFunction';\nimport { empty as emptyObserver } from './Observer';\nimport { Observer, PartialObserver, TeardownLogic } from './types';\nimport { Subscription } from './Subscription';\nimport { rxSubscriber as rxSubscriberSymbol } from '../internal/symbol/rxSubscriber';\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\n\n/**\n * Implements the {@link Observer} interface and extends the\n * {@link Subscription} class. While the {@link Observer} is the public API for\n * consuming the values of an {@link Observable}, all Observers get converted to\n * a Subscriber, in order to provide Subscription-like capabilities such as\n * `unsubscribe`. Subscriber is a common type in RxJS, and crucial for\n * implementing operators, but it is rarely used as a public API.\n *\n * @class Subscriber<T>\n */\nexport class Subscriber<T> extends Subscription implements Observer<T> {\n\n  [rxSubscriberSymbol]() { return this; }\n\n  /**\n   * A static factory for a Subscriber, given a (potentially partial) definition\n   * of an Observer.\n   * @param {function(x: ?T): void} [next] The `next` callback of an Observer.\n   * @param {function(e: ?any): void} [error] The `error` callback of an\n   * Observer.\n   * @param {function(): void} [complete] The `complete` callback of an\n   * Observer.\n   * @return {Subscriber<T>} A Subscriber wrapping the (partially defined)\n   * Observer represented by the given arguments.\n   * @nocollapse\n   */\n  static create<T>(next?: (x?: T) => void,\n                   error?: (e?: any) => void,\n                   complete?: () => void): Subscriber<T> {\n    const subscriber = new Subscriber(next, error, complete);\n    subscriber.syncErrorThrowable = false;\n    return subscriber;\n  }\n\n  /** @internal */ syncErrorValue: any = null;\n  /** @internal */ syncErrorThrown: boolean = false;\n  /** @internal */ syncErrorThrowable: boolean = false;\n\n  protected isStopped: boolean = false;\n  protected destination: PartialObserver<any> | Subscriber<any>; // this `any` is the escape hatch to erase extra type param (e.g. R)\n\n  /**\n   * @param {Observer|function(value: T): void} [destinationOrNext] A partially\n   * defined Observer or a `next` callback function.\n   * @param {function(e: ?any): void} [error] The `error` callback of an\n   * Observer.\n   * @param {function(): void} [complete] The `complete` callback of an\n   * Observer.\n   */\n  constructor(destinationOrNext?: PartialObserver<any> | ((value: T) => void),\n              error?: (e?: any) => void,\n              complete?: () => void) {\n    super();\n\n    switch (arguments.length) {\n      case 0:\n        this.destination = emptyObserver;\n        break;\n      case 1:\n        if (!destinationOrNext) {\n          this.destination = emptyObserver;\n          break;\n        }\n        if (typeof destinationOrNext === 'object') {\n          if (destinationOrNext instanceof Subscriber) {\n            this.syncErrorThrowable = destinationOrNext.syncErrorThrowable;\n            this.destination = destinationOrNext;\n            destinationOrNext.add(this);\n          } else {\n            this.syncErrorThrowable = true;\n            this.destination = new SafeSubscriber<T>(this, <PartialObserver<any>> destinationOrNext);\n          }\n          break;\n        }\n      default:\n        this.syncErrorThrowable = true;\n        this.destination = new SafeSubscriber<T>(this, <((value: T) => void)> destinationOrNext, error, complete);\n        break;\n    }\n  }\n\n  /**\n   * The {@link Observer} callback to receive notifications of type `next` from\n   * the Observable, with a value. The Observable may call this method 0 or more\n   * times.\n   * @param {T} [value] The `next` value.\n   * @return {void}\n   */\n  next(value?: T): void {\n    if (!this.isStopped) {\n      this._next(value);\n    }\n  }\n\n  /**\n   * The {@link Observer} callback to receive notifications of type `error` from\n   * the Observable, with an attached `Error`. Notifies the Observer that\n   * the Observable has experienced an error condition.\n   * @param {any} [err] The `error` exception.\n   * @return {void}\n   */\n  error(err?: any): void {\n    if (!this.isStopped) {\n      this.isStopped = true;\n      this._error(err);\n    }\n  }\n\n  /**\n   * The {@link Observer} callback to receive a valueless notification of type\n   * `complete` from the Observable. Notifies the Observer that the Observable\n   * has finished sending push-based notifications.\n   * @return {void}\n   */\n  complete(): void {\n    if (!this.isStopped) {\n      this.isStopped = true;\n      this._complete();\n    }\n  }\n\n  unsubscribe(): void {\n    if (this.closed) {\n      return;\n    }\n    this.isStopped = true;\n    super.unsubscribe();\n  }\n\n  protected _next(value: T): void {\n    this.destination.next(value);\n  }\n\n  protected _error(err: any): void {\n    this.destination.error(err);\n    this.unsubscribe();\n  }\n\n  protected _complete(): void {\n    this.destination.complete();\n    this.unsubscribe();\n  }\n\n  /** @deprecated This is an internal implementation detail, do not use. */\n  _unsubscribeAndRecycle(): Subscriber<T> {\n    const {  _parentOrParents } = this;\n    this._parentOrParents = null;\n    this.unsubscribe();\n    this.closed = false;\n    this.isStopped = false;\n    this._parentOrParents = _parentOrParents;\n    return this;\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nexport class SafeSubscriber<T> extends Subscriber<T> {\n\n  private _context: any;\n\n  constructor(private _parentSubscriber: Subscriber<T>,\n              observerOrNext?: PartialObserver<T> | ((value: T) => void),\n              error?: (e?: any) => void,\n              complete?: () => void) {\n    super();\n\n    let next: ((value: T) => void);\n    let context: any = this;\n\n    if (isFunction(observerOrNext)) {\n      next = (<((value: T) => void)> observerOrNext);\n    } else if (observerOrNext) {\n      next = (<PartialObserver<T>> observerOrNext).next;\n      error = (<PartialObserver<T>> observerOrNext).error;\n      complete = (<PartialObserver<T>> observerOrNext).complete;\n      if (observerOrNext !== emptyObserver) {\n        context = Object.create(observerOrNext);\n        if (isFunction(context.unsubscribe)) {\n          this.add(<() => void> context.unsubscribe.bind(context));\n        }\n        context.unsubscribe = this.unsubscribe.bind(this);\n      }\n    }\n\n    this._context = context;\n    this._next = next;\n    this._error = error;\n    this._complete = complete;\n  }\n\n  next(value?: T): void {\n    if (!this.isStopped && this._next) {\n      const { _parentSubscriber } = this;\n      if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n        this.__tryOrUnsub(this._next, value);\n      } else if (this.__tryOrSetError(_parentSubscriber, this._next, value)) {\n        this.unsubscribe();\n      }\n    }\n  }\n\n  error(err?: any): void {\n    if (!this.isStopped) {\n      const { _parentSubscriber } = this;\n      const { useDeprecatedSynchronousErrorHandling } = config;\n      if (this._error) {\n        if (!useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n          this.__tryOrUnsub(this._error, err);\n          this.unsubscribe();\n        } else {\n          this.__tryOrSetError(_parentSubscriber, this._error, err);\n          this.unsubscribe();\n        }\n      } else if (!_parentSubscriber.syncErrorThrowable) {\n        this.unsubscribe();\n        if (useDeprecatedSynchronousErrorHandling) {\n          throw err;\n        }\n        hostReportError(err);\n      } else {\n        if (useDeprecatedSynchronousErrorHandling) {\n          _parentSubscriber.syncErrorValue = err;\n          _parentSubscriber.syncErrorThrown = true;\n        } else {\n          hostReportError(err);\n        }\n        this.unsubscribe();\n      }\n    }\n  }\n\n  complete(): void {\n    if (!this.isStopped) {\n      const { _parentSubscriber } = this;\n      if (this._complete) {\n        const wrappedComplete = () => this._complete.call(this._context);\n\n        if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n          this.__tryOrUnsub(wrappedComplete);\n          this.unsubscribe();\n        } else {\n          this.__tryOrSetError(_parentSubscriber, wrappedComplete);\n          this.unsubscribe();\n        }\n      } else {\n        this.unsubscribe();\n      }\n    }\n  }\n\n  private __tryOrUnsub(fn: Function, value?: any): void {\n    try {\n      fn.call(this._context, value);\n    } catch (err) {\n      this.unsubscribe();\n      if (config.useDeprecatedSynchronousErrorHandling) {\n        throw err;\n      } else {\n        hostReportError(err);\n      }\n    }\n  }\n\n  private __tryOrSetError(parent: Subscriber<T>, fn: Function, value?: any): boolean {\n    if (!config.useDeprecatedSynchronousErrorHandling) {\n      throw new Error('bad call');\n    }\n    try {\n      fn.call(this._context, value);\n    } catch (err) {\n      if (config.useDeprecatedSynchronousErrorHandling) {\n        parent.syncErrorValue = err;\n        parent.syncErrorThrown = true;\n        return true;\n      } else {\n        hostReportError(err);\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /** @internal This is an internal implementation detail, do not use. */\n  _unsubscribe(): void {\n    const { _parentSubscriber } = this;\n    this._context = null;\n    this._parentSubscriber = null;\n    _parentSubscriber.unsubscribe();\n  }\n}\n","import { isArray } from './util/isArray';\nimport { isObject } from './util/isObject';\nimport { isFunction } from './util/isFunction';\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\nimport { SubscriptionLike, TeardownLogic } from './types';\n\n/**\n * Represents a disposable resource, such as the execution of an Observable. A\n * Subscription has one important method, `unsubscribe`, that takes no argument\n * and just disposes the resource held by the subscription.\n *\n * Additionally, subscriptions may be grouped together through the `add()`\n * method, which will attach a child Subscription to the current Subscription.\n * When a Subscription is unsubscribed, all its children (and its grandchildren)\n * will be unsubscribed as well.\n *\n * @class Subscription\n */\nexport class Subscription implements SubscriptionLike {\n  /** @nocollapse */\n  public static EMPTY: Subscription = (function(empty: any) {\n    empty.closed = true;\n    return empty;\n  }(new Subscription()));\n\n  /**\n   * A flag to indicate whether this Subscription has already been unsubscribed.\n   * @type {boolean}\n   */\n  public closed: boolean = false;\n\n  /** @internal */\n  protected _parentOrParents: Subscription | Subscription[] = null;\n  /** @internal */\n  private _subscriptions: SubscriptionLike[] = null;\n\n  /**\n   * @param {function(): void} [unsubscribe] A function describing how to\n   * perform the disposal of resources when the `unsubscribe` method is called.\n   */\n  constructor(unsubscribe?: () => void) {\n    if (unsubscribe) {\n      (this as any)._ctorUnsubscribe = true;\n      (this as any)._unsubscribe = unsubscribe;\n    }\n  }\n\n  /**\n   * Disposes the resources held by the subscription. May, for instance, cancel\n   * an ongoing Observable execution or cancel any other type of work that\n   * started when the Subscription was created.\n   * @return {void}\n   */\n  unsubscribe(): void {\n    let errors: any[];\n\n    if (this.closed) {\n      return;\n    }\n\n    let { _parentOrParents, _ctorUnsubscribe, _unsubscribe, _subscriptions } = (this as any);\n\n    this.closed = true;\n    this._parentOrParents = null;\n    // null out _subscriptions first so any child subscriptions that attempt\n    // to remove themselves from this subscription will noop\n    this._subscriptions = null;\n\n    if (_parentOrParents instanceof Subscription) {\n      _parentOrParents.remove(this);\n    } else if (_parentOrParents !== null) {\n      for (let index = 0; index < _parentOrParents.length; ++index) {\n        const parent = _parentOrParents[index];\n        parent.remove(this);\n      }\n    }\n\n    if (isFunction(_unsubscribe)) {\n      // It's only possible to null _unsubscribe - to release the reference to\n      // any teardown function passed in the constructor - if the property was\n      // actually assigned in the constructor, as there are some classes that\n      // are derived from Subscriber (which derives from Subscription) that\n      // implement an _unsubscribe method as a mechanism for obtaining\n      // unsubscription notifications and some of those subscribers are\n      // recycled. Also, in some of those subscribers, _unsubscribe switches\n      // from a prototype method to an instance property - see notifyNext in\n      // RetryWhenSubscriber.\n      if (_ctorUnsubscribe) {\n        (this as any)._unsubscribe = undefined;\n      }\n      try {\n        _unsubscribe.call(this);\n      } catch (e) {\n        errors = e instanceof UnsubscriptionError ? flattenUnsubscriptionErrors(e.errors) : [e];\n      }\n    }\n\n    if (isArray(_subscriptions)) {\n      let index = -1;\n      let len = _subscriptions.length;\n\n      while (++index < len) {\n        const sub = _subscriptions[index];\n        if (isObject(sub)) {\n          try {\n            sub.unsubscribe();\n          } catch (e) {\n            errors = errors || [];\n            if (e instanceof UnsubscriptionError) {\n              errors = errors.concat(flattenUnsubscriptionErrors(e.errors));\n            } else {\n              errors.push(e);\n            }\n          }\n        }\n      }\n    }\n\n    if (errors) {\n      throw new UnsubscriptionError(errors);\n    }\n  }\n\n  /**\n   * Adds a tear down to be called during the unsubscribe() of this\n   * Subscription. Can also be used to add a child subscription.\n   *\n   * If the tear down being added is a subscription that is already\n   * unsubscribed, is the same reference `add` is being called on, or is\n   * `Subscription.EMPTY`, it will not be added.\n   *\n   * If this subscription is already in an `closed` state, the passed\n   * tear down logic will be executed immediately.\n   *\n   * When a parent subscription is unsubscribed, any child subscriptions that were added to it are also unsubscribed.\n   *\n   * @param {TeardownLogic} teardown The additional logic to execute on\n   * teardown.\n   * @return {Subscription} Returns the Subscription used or created to be\n   * added to the inner subscriptions list. This Subscription can be used with\n   * `remove()` to remove the passed teardown logic from the inner subscriptions\n   * list.\n   */\n  add(teardown: TeardownLogic): Subscription {\n    let subscription = (<Subscription>teardown);\n\n    if (!teardown) {\n      return Subscription.EMPTY;\n    }\n\n    switch (typeof teardown) {\n      case 'function':\n        subscription = new Subscription(<(() => void)>teardown);\n      case 'object':\n        if (subscription === this || subscription.closed || typeof subscription.unsubscribe !== 'function') {\n          // This also covers the case where `subscription` is `Subscription.EMPTY`, which is always in `closed` state.\n          return subscription;\n        } else if (this.closed) {\n          subscription.unsubscribe();\n          return subscription;\n        } else if (!(subscription instanceof Subscription)) {\n          const tmp = subscription;\n          subscription = new Subscription();\n          subscription._subscriptions = [tmp];\n        }\n        break;\n      default: {\n        throw new Error('unrecognized teardown ' + teardown + ' added to Subscription.');\n      }\n    }\n\n    // Add `this` as parent of `subscription` if that's not already the case.\n    let { _parentOrParents } = subscription;\n    if (_parentOrParents === null) {\n      // If we don't have a parent, then set `subscription._parents` to\n      // the `this`, which is the common case that we optimize for.\n      subscription._parentOrParents = this;\n    } else if (_parentOrParents instanceof Subscription) {\n      if (_parentOrParents === this) {\n        // The `subscription` already has `this` as a parent.\n        return subscription;\n      }\n      // If there's already one parent, but not multiple, allocate an\n      // Array to store the rest of the parent Subscriptions.\n      subscription._parentOrParents = [_parentOrParents, this];\n    } else if (_parentOrParents.indexOf(this) === -1) {\n      // Only add `this` to the _parentOrParents list if it's not already there.\n      _parentOrParents.push(this);\n    } else {\n      // The `subscription` already has `this` as a parent.\n      return subscription;\n    }\n\n    // Optimize for the common case when adding the first subscription.\n    const subscriptions = this._subscriptions;\n    if (subscriptions === null) {\n      this._subscriptions = [subscription];\n    } else {\n      subscriptions.push(subscription);\n    }\n\n    return subscription;\n  }\n\n  /**\n   * Removes a Subscription from the internal list of subscriptions that will\n   * unsubscribe during the unsubscribe process of this Subscription.\n   * @param {Subscription} subscription The subscription to remove.\n   * @return {void}\n   */\n  remove(subscription: Subscription): void {\n    const subscriptions = this._subscriptions;\n    if (subscriptions) {\n      const subscriptionIndex = subscriptions.indexOf(subscription);\n      if (subscriptionIndex !== -1) {\n        subscriptions.splice(subscriptionIndex, 1);\n      }\n    }\n  }\n}\n\nfunction flattenUnsubscriptionErrors(errors: any[]) {\n return errors.reduce((errs, err) => errs.concat((err instanceof UnsubscriptionError) ? err.errors : err), []);\n}\n","let _enable_super_gross_mode_that_will_cause_bad_things = false;\n\n/**\n * The global configuration object for RxJS, used to configure things\n * like what Promise contructor should used to create Promises\n */\nexport const config = {\n  /**\n   * The promise constructor used by default for methods such as\n   * {@link toPromise} and {@link forEach}\n   */\n  Promise: undefined as PromiseConstructorLike,\n\n  /**\n   * If true, turns on synchronous error rethrowing, which is a deprecated behavior\n   * in v6 and higher. This behavior enables bad patterns like wrapping a subscribe\n   * call in a try/catch block. It also enables producer interference, a nasty bug\n   * where a multicast can be broken for all observers by a downstream consumer with\n   * an unhandled error. DO NOT USE THIS FLAG UNLESS IT'S NEEDED TO BY TIME\n   * FOR MIGRATION REASONS.\n   */\n  set useDeprecatedSynchronousErrorHandling(value: boolean) {\n    if (value) {\n      const error = new Error();\n      console.warn('DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \\n' + error.stack);\n    } else if (_enable_super_gross_mode_that_will_cause_bad_things) {\n      console.log('RxJS: Back to a better error behavior. Thank you. <3');\n    }\n    _enable_super_gross_mode_that_will_cause_bad_things = value;\n  },\n\n  get useDeprecatedSynchronousErrorHandling() {\n    return _enable_super_gross_mode_that_will_cause_bad_things;\n  },\n};\n","import { Observable } from '../Observable';\nimport { SchedulerLike } from '../types';\n\n/**\n * The same Observable instance returned by any call to {@link empty} without a\n * `scheduler`. It is preferrable to use this over `empty()`.\n */\nexport const EMPTY = new Observable<never>(subscriber => subscriber.complete());\n\n/**\n * Creates an Observable that emits no items to the Observer and immediately\n * emits a complete notification.\n *\n * <span class=\"informal\">Just emits 'complete', and nothing else.\n * </span>\n *\n * ![](empty.png)\n *\n * This static operator is useful for creating a simple Observable that only\n * emits the complete notification. It can be used for composing with other\n * Observables, such as in a {@link mergeMap}.\n *\n * ## Examples\n * ### Emit the number 7, then complete\n * ```ts\n * import { empty } from 'rxjs';\n * import { startWith } from 'rxjs/operators';\n *\n * const result = empty().pipe(startWith(7));\n * result.subscribe(x => console.log(x));\n * ```\n *\n * ### Map and flatten only odd numbers to the sequence 'a', 'b', 'c'\n * ```ts\n * import { empty, interval, of } from 'rxjs';\n * import { mergeMap } from 'rxjs/operators';\n *\n * const interval$ = interval(1000);\n * const result = interval$.pipe(\n *   mergeMap(x => x % 2 === 1 ? of('a', 'b', 'c') : empty()),\n * );\n * result.subscribe(x => console.log(x));\n *\n * // Results in the following to the console:\n * // x is equal to the count on the interval eg(0,1,2,3,...)\n * // x will occur every 1000ms\n * // if x % 2 is equal to 1 print abc\n * // if x % 2 is not equal to 1 nothing will be output\n * ```\n *\n * @see {@link Observable}\n * @see {@link never}\n * @see {@link of}\n * @see {@link throwError}\n *\n * @param scheduler A {@link SchedulerLike} to use for scheduling\n * the emission of the complete notification.\n * @return An \"empty\" Observable: emits only the complete\n * notification.\n * @deprecated Deprecated in favor of using {@link EMPTY} constant, or {@link scheduled} (e.g. `scheduled([], scheduler)`)\n */\nexport function empty(scheduler?: SchedulerLike) {\n  return scheduler ? emptyScheduled(scheduler) : EMPTY;\n}\n\nfunction emptyScheduled(scheduler: SchedulerLike) {\n  return new Observable<never>(subscriber => scheduler.schedule(() => subscriber.complete()));\n}\n","import { Operator } from '../Operator';\nimport { Observable } from '../Observable';\nimport { Subscriber } from '../Subscriber';\nimport { OperatorFunction, MonoTypeOperatorFunction } from '../types';\n\n/* tslint:disable:max-line-length */\nexport function defaultIfEmpty<T>(defaultValue?: T): MonoTypeOperatorFunction<T>;\nexport function defaultIfEmpty<T, R>(defaultValue?: R): OperatorFunction<T, T | R>;\n/* tslint:enable:max-line-length */\n\n/**\n * Emits a given value if the source Observable completes without emitting any\n * `next` value, otherwise mirrors the source Observable.\n *\n * <span class=\"informal\">If the source Observable turns out to be empty, then\n * this operator will emit a default value.</span>\n *\n * ![](defaultIfEmpty.png)\n *\n * `defaultIfEmpty` emits the values emitted by the source Observable or a\n * specified default value if the source Observable is empty (completes without\n * having emitted any `next` value).\n *\n * ## Example\n * If no clicks happen in 5 seconds, then emit \"no clicks\"\n * ```ts\n * import { fromEvent } from 'rxjs';\n * import { defaultIfEmpty, takeUntil } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const clicksBeforeFive = clicks.pipe(takeUntil(interval(5000)));\n * const result = clicksBeforeFive.pipe(defaultIfEmpty('no clicks'));\n * result.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link empty}\n * @see {@link last}\n *\n * @param {any} [defaultValue=null] The default value used if the source\n * Observable is empty.\n * @return {Observable} An Observable that emits either the specified\n * `defaultValue` if the source Observable emits no items, or the values emitted\n * by the source Observable.\n * @method defaultIfEmpty\n * @owner Observable\n */\nexport function defaultIfEmpty<T, R>(defaultValue: R = null): OperatorFunction<T, T | R> {\n  return (source: Observable<T>) => source.lift(new DefaultIfEmptyOperator(defaultValue)) as Observable<T | R>;\n}\n\nclass DefaultIfEmptyOperator<T, R> implements Operator<T, T | R> {\n\n  constructor(private defaultValue: R) {\n  }\n\n  call(subscriber: Subscriber<T | R>, source: any): any {\n    return source.subscribe(new DefaultIfEmptySubscriber(subscriber, this.defaultValue));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass DefaultIfEmptySubscriber<T, R> extends Subscriber<T> {\n  private isEmpty: boolean = true;\n\n  constructor(destination: Subscriber<T | R>, private defaultValue: R) {\n    super(destination);\n  }\n\n  protected _next(value: T): void {\n    this.isEmpty = false;\n    this.destination.next(value);\n  }\n\n  protected _complete(): void {\n    if (this.isEmpty) {\n      this.destination.next(this.defaultValue);\n    }\n    this.destination.complete();\n  }\n}\n","import { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { Observable } from '../Observable';\nimport { OperatorFunction, MonoTypeOperatorFunction, TeardownLogic } from '../types';\n\n/* tslint:disable:max-line-length */\nexport function filter<T, S extends T>(predicate: (value: T, index: number) => value is S,\n                                       thisArg?: any): OperatorFunction<T, S>;\nexport function filter<T>(predicate: (value: T, index: number) => boolean,\n                          thisArg?: any): MonoTypeOperatorFunction<T>;\n/* tslint:enable:max-line-length */\n\n/**\n * Filter items emitted by the source Observable by only emitting those that\n * satisfy a specified predicate.\n *\n * <span class=\"informal\">Like\n * [Array.prototype.filter()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter),\n * it only emits a value from the source if it passes a criterion function.</span>\n *\n * ![](filter.png)\n *\n * Similar to the well-known `Array.prototype.filter` method, this operator\n * takes values from the source Observable, passes them through a `predicate`\n * function and only emits those values that yielded `true`.\n *\n * ## Example\n * Emit only click events whose target was a DIV element\n * ```ts\n * import { fromEvent } from 'rxjs';\n * import { filter } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const clicksOnDivs = clicks.pipe(filter(ev => ev.target.tagName === 'DIV'));\n * clicksOnDivs.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link distinct}\n * @see {@link distinctUntilChanged}\n * @see {@link distinctUntilKeyChanged}\n * @see {@link ignoreElements}\n * @see {@link partition}\n * @see {@link skip}\n *\n * @param {function(value: T, index: number): boolean} predicate A function that\n * evaluates each value emitted by the source Observable. If it returns `true`,\n * the value is emitted, if `false` the value is not passed to the output\n * Observable. The `index` parameter is the number `i` for the i-th source\n * emission that has happened since the subscription, starting from the number\n * `0`.\n * @param {any} [thisArg] An optional argument to determine the value of `this`\n * in the `predicate` function.\n * @return {Observable} An Observable of values from the source that were\n * allowed by the `predicate` function.\n * @method filter\n * @owner Observable\n */\nexport function filter<T>(predicate: (value: T, index: number) => boolean,\n                          thisArg?: any): MonoTypeOperatorFunction<T> {\n  return function filterOperatorFunction(source: Observable<T>): Observable<T> {\n    return source.lift(new FilterOperator(predicate, thisArg));\n  };\n}\n\nclass FilterOperator<T> implements Operator<T, T> {\n  constructor(private predicate: (value: T, index: number) => boolean,\n              private thisArg?: any) {\n  }\n\n  call(subscriber: Subscriber<T>, source: any): TeardownLogic {\n    return source.subscribe(new FilterSubscriber(subscriber, this.predicate, this.thisArg));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass FilterSubscriber<T> extends Subscriber<T> {\n\n  count: number = 0;\n\n  constructor(destination: Subscriber<T>,\n              private predicate: (value: T, index: number) => boolean,\n              private thisArg: any) {\n    super(destination);\n  }\n\n  // the try catch block below is left specifically for\n  // optimization and perf reasons. a tryCatcher is not necessary here.\n  protected _next(value: T) {\n    let result: any;\n    try {\n      result = this.predicate.call(this.thisArg, value, this.count++);\n    } catch (err) {\n      this.destination.error(err);\n      return;\n    }\n    if (result) {\n      this.destination.next(value);\n    }\n  }\n}\n","import { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { Observable } from '../Observable';\nimport { OperatorFunction } from '../types';\n\n/**\n * Applies a given `project` function to each value emitted by the source\n * Observable, and emits the resulting values as an Observable.\n *\n * <span class=\"informal\">Like [Array.prototype.map()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map),\n * it passes each source value through a transformation function to get\n * corresponding output values.</span>\n *\n * ![](map.png)\n *\n * Similar to the well known `Array.prototype.map` function, this operator\n * applies a projection to each value and emits that projection in the output\n * Observable.\n *\n * ## Example\n * Map every click to the clientX position of that click\n * ```ts\n * import { fromEvent } from 'rxjs';\n * import { map } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const positions = clicks.pipe(map(ev => ev.clientX));\n * positions.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link mapTo}\n * @see {@link pluck}\n *\n * @param {function(value: T, index: number): R} project The function to apply\n * to each `value` emitted by the source Observable. The `index` parameter is\n * the number `i` for the i-th emission that has happened since the\n * subscription, starting from the number `0`.\n * @param {any} [thisArg] An optional argument to define what `this` is in the\n * `project` function.\n * @return {Observable<R>} An Observable that emits the values from the source\n * Observable transformed by the given `project` function.\n * @method map\n * @owner Observable\n */\nexport function map<T, R>(project: (value: T, index: number) => R, thisArg?: any): OperatorFunction<T, R> {\n  return function mapOperation(source: Observable<T>): Observable<R> {\n    if (typeof project !== 'function') {\n      throw new TypeError('argument is not a function. Are you looking for `mapTo()`?');\n    }\n    return source.lift(new MapOperator(project, thisArg));\n  };\n}\n\nexport class MapOperator<T, R> implements Operator<T, R> {\n  constructor(private project: (value: T, index: number) => R, private thisArg: any) {\n  }\n\n  call(subscriber: Subscriber<R>, source: any): any {\n    return source.subscribe(new MapSubscriber(subscriber, this.project, this.thisArg));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass MapSubscriber<T, R> extends Subscriber<T> {\n  count: number = 0;\n  private thisArg: any;\n\n  constructor(destination: Subscriber<R>,\n              private project: (value: T, index: number) => R,\n              thisArg: any) {\n    super(destination);\n    this.thisArg = thisArg || this;\n  }\n\n  // NOTE: This looks unoptimized, but it's actually purposefully NOT\n  // using try/catch optimizations.\n  protected _next(value: T) {\n    let result: R;\n    try {\n      result = this.project.call(this.thisArg, value, this.count++);\n    } catch (err) {\n      this.destination.error(err);\n      return;\n    }\n    this.destination.next(result);\n  }\n}\n","import { Observable } from '../Observable';\nimport { scan } from './scan';\nimport { takeLast } from './takeLast';\nimport { defaultIfEmpty } from './defaultIfEmpty';\nimport { OperatorFunction, MonoTypeOperatorFunction } from '../types';\nimport { pipe } from '../util/pipe';\n\n/* tslint:disable:max-line-length */\nexport function reduce<T, R>(accumulator: (acc: R, value: T, index: number) => R, seed: R): OperatorFunction<T, R>;\nexport function reduce<T>(accumulator: (acc: T, value: T, index: number) => T, seed?: T): MonoTypeOperatorFunction<T>;\nexport function reduce<T, R>(accumulator: (acc: R, value: T, index: number) => R): OperatorFunction<T, R>;\n/* tslint:enable:max-line-length */\n\n/**\n * Applies an accumulator function over the source Observable, and returns the\n * accumulated result when the source completes, given an optional seed value.\n *\n * <span class=\"informal\">Combines together all values emitted on the source,\n * using an accumulator function that knows how to join a new source value into\n * the accumulation from the past.</span>\n *\n * ![](reduce.png)\n *\n * Like\n * [Array.prototype.reduce()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce),\n * `reduce` applies an `accumulator` function against an accumulation and each\n * value of the source Observable (from the past) to reduce it to a single\n * value, emitted on the output Observable. Note that `reduce` will only emit\n * one value, only when the source Observable completes. It is equivalent to\n * applying operator {@link scan} followed by operator {@link last}.\n *\n * Returns an Observable that applies a specified `accumulator` function to each\n * item emitted by the source Observable. If a `seed` value is specified, then\n * that value will be used as the initial value for the accumulator. If no seed\n * value is specified, the first item of the source is used as the seed.\n *\n * ## Example\n * Count the number of click events that happened in 5 seconds\n * ```ts\n * import { fromEvent, interval } from 'rxjs';\n * import { reduce, takeUntil, mapTo } from 'rxjs/operators';\n *\n * const clicksInFiveSeconds = fromEvent(document, 'click').pipe(\n *   takeUntil(interval(5000)),\n * );\n * const ones = clicksInFiveSeconds.pipe(mapTo(1));\n * const seed = 0;\n * const count = ones.pipe(reduce((acc, one) => acc + one, seed));\n * count.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link count}\n * @see {@link expand}\n * @see {@link mergeScan}\n * @see {@link scan}\n *\n * @param {function(acc: R, value: T, index: number): R} accumulator The accumulator function\n * called on each source value.\n * @param {R} [seed] The initial accumulation value.\n * @return {Observable<R>} An Observable that emits a single value that is the\n * result of accumulating the values emitted by the source Observable.\n * @method reduce\n * @owner Observable\n */\nexport function reduce<T, R>(accumulator: (acc: T | R, value: T, index?: number) => T | R, seed?: T | R): OperatorFunction<T, T | R> {\n  // providing a seed of `undefined` *should* be valid and trigger\n  // hasSeed! so don't use `seed !== undefined` checks!\n  // For this reason, we have to check it here at the original call site\n  // otherwise inside Operator/Subscriber we won't know if `undefined`\n  // means they didn't provide anything or if they literally provided `undefined`\n  if (arguments.length >= 2) {\n    return function reduceOperatorFunctionWithSeed(source: Observable<T>): Observable<T | R> {\n      return pipe(scan(accumulator, seed), takeLast(1), defaultIfEmpty(seed))(source);\n    };\n  }\n  return function reduceOperatorFunction(source: Observable<T>): Observable<T | R> {\n    return pipe(\n      scan<T, T | R>((acc, value, index) => accumulator(acc, value, index + 1)),\n      takeLast(1),\n    )(source);\n  };\n}\n","import { Operator } from '../Operator';\nimport { Observable } from '../Observable';\nimport { Subscriber } from '../Subscriber';\nimport { OperatorFunction, MonoTypeOperatorFunction } from '../types';\n\n/* tslint:disable:max-line-length */\nexport function scan<T, R>(accumulator: (acc: R, value: T, index: number) => R, seed: R): OperatorFunction<T, R>;\nexport function scan<T>(accumulator: (acc: T, value: T, index: number) => T, seed?: T): MonoTypeOperatorFunction<T>;\nexport function scan<T, R>(accumulator: (acc: R, value: T, index: number) => R): OperatorFunction<T, R>;\n/* tslint:enable:max-line-length */\n\n/**\n * Applies an accumulator function over the source Observable, and returns each\n * intermediate result, with an optional seed value.\n *\n * <span class=\"informal\">It's like {@link reduce}, but emits the current\n * accumulation whenever the source emits a value.</span>\n *\n * ![](scan.png)\n *\n * Combines together all values emitted on the source, using an accumulator\n * function that knows how to join a new source value into the accumulation from\n * the past. Is similar to {@link reduce}, but emits the intermediate\n * accumulations.\n *\n * Returns an Observable that applies a specified `accumulator` function to each\n * item emitted by the source Observable. If a `seed` value is specified, then\n * that value will be used as the initial value for the accumulator. If no seed\n * value is specified, the first item of the source is used as the seed.\n *\n * ## Example\n * Count the number of click events\n * ```ts\n * import { fromEvent } from 'rxjs';\n * import { scan, mapTo } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const ones = clicks.pipe(mapTo(1));\n * const seed = 0;\n * const count = ones.pipe(scan((acc, one) => acc + one, seed));\n * count.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link expand}\n * @see {@link mergeScan}\n * @see {@link reduce}\n *\n * @param {function(acc: R, value: T, index: number): R} accumulator\n * The accumulator function called on each source value.\n * @param {T|R} [seed] The initial accumulation value.\n * @return {Observable<R>} An observable of the accumulated values.\n * @method scan\n * @owner Observable\n */\nexport function scan<T, R>(accumulator: (acc: R, value: T, index: number) => R, seed?: T | R): OperatorFunction<T, R> {\n  let hasSeed = false;\n  // providing a seed of `undefined` *should* be valid and trigger\n  // hasSeed! so don't use `seed !== undefined` checks!\n  // For this reason, we have to check it here at the original call site\n  // otherwise inside Operator/Subscriber we won't know if `undefined`\n  // means they didn't provide anything or if they literally provided `undefined`\n  if (arguments.length >= 2) {\n    hasSeed = true;\n  }\n\n  return function scanOperatorFunction(source: Observable<T>): Observable<R> {\n    return source.lift(new ScanOperator(accumulator, seed, hasSeed));\n  };\n}\n\nclass ScanOperator<T, R> implements Operator<T, R> {\n  constructor(private accumulator: (acc: R, value: T, index: number) => R, private seed?: T | R, private hasSeed: boolean = false) {}\n\n  call(subscriber: Subscriber<R>, source: any): any {\n    return source.subscribe(new ScanSubscriber(subscriber, this.accumulator, this.seed, this.hasSeed));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass ScanSubscriber<T, R> extends Subscriber<T> {\n  private index: number = 0;\n\n  get seed(): T | R {\n    return this._seed;\n  }\n\n  set seed(value: T | R) {\n    this.hasSeed = true;\n    this._seed = value;\n  }\n\n  constructor(destination: Subscriber<R>, private accumulator: (acc: R, value: T, index: number) => R, private _seed: T | R,\n              private hasSeed: boolean) {\n    super(destination);\n  }\n\n  protected _next(value: T): void {\n    if (!this.hasSeed) {\n      this.seed = value;\n      this.destination.next(value);\n    } else {\n      return this._tryNext(value);\n    }\n  }\n\n  private _tryNext(value: T): void {\n    const index = this.index++;\n    let result: any;\n    try {\n      result = this.accumulator(<R>this.seed, value, index);\n    } catch (err) {\n      this.destination.error(err);\n    }\n    this.seed = result;\n    this.destination.next(result);\n  }\n}\n","import { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { ArgumentOutOfRangeError } from '../util/ArgumentOutOfRangeError';\nimport { empty } from '../observable/empty';\nimport { Observable } from '../Observable';\nimport { MonoTypeOperatorFunction, TeardownLogic } from '../types';\n\n/**\n * Emits only the last `count` values emitted by the source Observable.\n *\n * <span class=\"informal\">Remembers the latest `count` values, then emits those\n * only when the source completes.</span>\n *\n * ![](takeLast.png)\n *\n * `takeLast` returns an Observable that emits at most the last `count` values\n * emitted by the source Observable. If the source emits fewer than `count`\n * values then all of its values are emitted. This operator must wait until the\n * `complete` notification emission from the source in order to emit the `next`\n * values on the output Observable, because otherwise it is impossible to know\n * whether or not more values will be emitted on the source. For this reason,\n * all values are emitted synchronously, followed by the complete notification.\n *\n * ## Example\n * Take the last 3 values of an Observable with many values\n * ```ts\n * import { range } from 'rxjs';\n * import { takeLast } from 'rxjs/operators';\n *\n * const many = range(1, 100);\n * const lastThree = many.pipe(takeLast(3));\n * lastThree.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link take}\n * @see {@link takeUntil}\n * @see {@link takeWhile}\n * @see {@link skip}\n *\n * @throws {ArgumentOutOfRangeError} When using `takeLast(i)`, it delivers an\n * ArgumentOutOrRangeError to the Observer's `error` callback if `i < 0`.\n *\n * @param {number} count The maximum number of values to emit from the end of\n * the sequence of values emitted by the source Observable.\n * @return {Observable<T>} An Observable that emits at most the last count\n * values emitted by the source Observable.\n * @method takeLast\n * @owner Observable\n */\nexport function takeLast<T>(count: number): MonoTypeOperatorFunction<T> {\n  return function takeLastOperatorFunction(source: Observable<T>): Observable<T> {\n    if (count === 0) {\n      return empty();\n    } else {\n      return source.lift(new TakeLastOperator(count));\n    }\n  };\n}\n\nclass TakeLastOperator<T> implements Operator<T, T> {\n  constructor(private total: number) {\n    if (this.total < 0) {\n      throw new ArgumentOutOfRangeError;\n    }\n  }\n\n  call(subscriber: Subscriber<T>, source: any): TeardownLogic {\n    return source.subscribe(new TakeLastSubscriber(subscriber, this.total));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass TakeLastSubscriber<T> extends Subscriber<T> {\n  private ring: Array<T> = new Array();\n  private count: number = 0;\n\n  constructor(destination: Subscriber<T>, private total: number) {\n    super(destination);\n  }\n\n  protected _next(value: T): void {\n    const ring = this.ring;\n    const total = this.total;\n    const count = this.count++;\n\n    if (ring.length < total) {\n      ring.push(value);\n    } else {\n      const index = count % total;\n      ring[index] = value;\n    }\n  }\n\n  protected _complete(): void {\n    const destination = this.destination;\n    let count = this.count;\n\n    if (count > 0) {\n      const total = this.count >= this.total ? this.total : this.count;\n      const ring  = this.ring;\n\n      for (let i = 0; i < total; i++) {\n        const idx = (count++) % total;\n        destination.next(ring[idx]);\n      }\n    }\n\n    destination.complete();\n  }\n}\n","/** Symbol.observable or a string \"@@observable\". Used for interop */\nexport const observable = (() => typeof Symbol === 'function' && Symbol.observable || '@@observable')();\n","/** @deprecated do not use, this is no longer checked by RxJS internals */\nexport const rxSubscriber = (() =>\n  typeof Symbol === 'function'\n    ? Symbol('rxSubscriber')\n    : '@@rxSubscriber_' + Math.random())();\n\n/**\n * @deprecated use rxSubscriber instead\n */\nexport const $$rxSubscriber = rxSubscriber;\n","export interface ArgumentOutOfRangeError extends Error {\n}\n\nexport interface ArgumentOutOfRangeErrorCtor {\n  new(): ArgumentOutOfRangeError;\n}\n\nconst ArgumentOutOfRangeErrorImpl = (() => {\n  function ArgumentOutOfRangeErrorImpl(this: any) {\n    Error.call(this);\n    this.message = 'argument out of range';\n    this.name = 'ArgumentOutOfRangeError';\n    return this;\n  }\n\n  ArgumentOutOfRangeErrorImpl.prototype = Object.create(Error.prototype);\n\n  return ArgumentOutOfRangeErrorImpl;\n})();\n\n/**\n * An error thrown when an element was queried at a certain index of an\n * Observable, but no such index or position exists in that sequence.\n *\n * @see {@link elementAt}\n * @see {@link take}\n * @see {@link takeLast}\n *\n * @class ArgumentOutOfRangeError\n */\nexport const ArgumentOutOfRangeError: ArgumentOutOfRangeErrorCtor = ArgumentOutOfRangeErrorImpl as any;","export interface UnsubscriptionError extends Error {\n  readonly errors: any[];\n}\n\nexport interface UnsubscriptionErrorCtor {\n  new(errors: any[]): UnsubscriptionError;\n}\n\nconst UnsubscriptionErrorImpl = (() => {\n  function UnsubscriptionErrorImpl(this: any, errors: any[]) {\n    Error.call(this);\n    this.message = errors ?\n      `${errors.length} errors occurred during unsubscription:\n${errors.map((err, i) => `${i + 1}) ${err.toString()}`).join('\\n  ')}` : '';\n    this.name = 'UnsubscriptionError';\n    this.errors = errors;\n    return this;\n  }\n\n  UnsubscriptionErrorImpl.prototype = Object.create(Error.prototype);\n\n  return UnsubscriptionErrorImpl;\n})();\n\n/**\n * An error thrown when one or more errors have occurred during the\n * `unsubscribe` of a {@link Subscription}.\n */\nexport const UnsubscriptionError: UnsubscriptionErrorCtor = UnsubscriptionErrorImpl as any;","import { Subscriber } from '../Subscriber';\nimport { Subject } from '../Subject';\n\n/**\n * Determines whether the ErrorObserver is closed or stopped or has a\n * destination that is closed or stopped - in which case errors will\n * need to be reported via a different mechanism.\n * @param observer the observer\n */\nexport function canReportError(observer: Subscriber<any> | Subject<any>): boolean {\n  while (observer) {\n    const { closed, destination, isStopped } = observer as any;\n    if (closed || isStopped) {\n      return false;\n    } else if (destination && destination instanceof Subscriber) {\n      observer = destination;\n    } else {\n      observer = null;\n    }\n  }\n  return true;\n}\n","/**\n * Throws an error on another job so that it's picked up by the runtime's\n * uncaught error handling mechanism.\n * @param err the error to throw\n */\nexport function hostReportError(err: any) {\n  setTimeout(() => { throw err; }, 0);\n}","export function identity<T>(x: T): T {\n  return x;\n}\n","export const isArray = (() => Array.isArray || (<T>(x: any): x is T[] => x && typeof x.length === 'number'))();\n","export function isFunction(x: any): x is Function {\n  return typeof x === 'function';\n}\n","export function isObject(x: any): x is Object {\n  return x !== null && typeof x === 'object';\n}\n","import { noop } from './noop';\nimport { identity } from './identity';\nimport { UnaryFunction } from '../types';\n\n/* tslint:disable:max-line-length */\nexport function pipe<T>(): UnaryFunction<T, T>;\nexport function pipe<T, A>(fn1: UnaryFunction<T, A>): UnaryFunction<T, A>;\nexport function pipe<T, A, B>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>): UnaryFunction<T, B>;\nexport function pipe<T, A, B, C>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>, fn3: UnaryFunction<B, C>): UnaryFunction<T, C>;\nexport function pipe<T, A, B, C, D>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>, fn3: UnaryFunction<B, C>, fn4: UnaryFunction<C, D>): UnaryFunction<T, D>;\nexport function pipe<T, A, B, C, D, E>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>, fn3: UnaryFunction<B, C>, fn4: UnaryFunction<C, D>, fn5: UnaryFunction<D, E>): UnaryFunction<T, E>;\nexport function pipe<T, A, B, C, D, E, F>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>, fn3: UnaryFunction<B, C>, fn4: UnaryFunction<C, D>, fn5: UnaryFunction<D, E>, fn6: UnaryFunction<E, F>): UnaryFunction<T, F>;\nexport function pipe<T, A, B, C, D, E, F, G>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>, fn3: UnaryFunction<B, C>, fn4: UnaryFunction<C, D>, fn5: UnaryFunction<D, E>, fn6: UnaryFunction<E, F>, fn7: UnaryFunction<F, G>): UnaryFunction<T, G>;\nexport function pipe<T, A, B, C, D, E, F, G, H>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>, fn3: UnaryFunction<B, C>, fn4: UnaryFunction<C, D>, fn5: UnaryFunction<D, E>, fn6: UnaryFunction<E, F>, fn7: UnaryFunction<F, G>, fn8: UnaryFunction<G, H>): UnaryFunction<T, H>;\nexport function pipe<T, A, B, C, D, E, F, G, H, I>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>, fn3: UnaryFunction<B, C>, fn4: UnaryFunction<C, D>, fn5: UnaryFunction<D, E>, fn6: UnaryFunction<E, F>, fn7: UnaryFunction<F, G>, fn8: UnaryFunction<G, H>, fn9: UnaryFunction<H, I>): UnaryFunction<T, I>;\nexport function pipe<T, A, B, C, D, E, F, G, H, I>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>, fn3: UnaryFunction<B, C>, fn4: UnaryFunction<C, D>, fn5: UnaryFunction<D, E>, fn6: UnaryFunction<E, F>, fn7: UnaryFunction<F, G>, fn8: UnaryFunction<G, H>, fn9: UnaryFunction<H, I>, ...fns: UnaryFunction<any, any>[]): UnaryFunction<T, {}>;\n/* tslint:enable:max-line-length */\n\nexport function pipe(...fns: Array<UnaryFunction<any, any>>): UnaryFunction<any, any> {\n  return pipeFromArray(fns);\n}\n\n/** @internal */\nexport function pipeFromArray<T, R>(fns: Array<UnaryFunction<T, R>>): UnaryFunction<T, R> {\n  if (fns.length === 0) {\n    return identity as UnaryFunction<any, any>;\n  }\n\n  if (fns.length === 1) {\n    return fns[0];\n  }\n\n  return function piped(input: T): R {\n    return fns.reduce((prev: any, fn: UnaryFunction<T, R>) => fn(prev), input as any);\n  };\n}\n","import { Subscriber } from '../Subscriber';\nimport { rxSubscriber as rxSubscriberSymbol } from '../symbol/rxSubscriber';\nimport { empty as emptyObserver } from '../Observer';\nimport { PartialObserver } from '../types';\n\nexport function toSubscriber<T>(\n  nextOrObserver?: PartialObserver<T> | ((value: T) => void),\n  error?: (error: any) => void,\n  complete?: () => void): Subscriber<T> {\n\n  if (nextOrObserver) {\n    if (nextOrObserver instanceof Subscriber) {\n      return (<Subscriber<T>> nextOrObserver);\n    }\n\n    if (nextOrObserver[rxSubscriberSymbol]) {\n      return nextOrObserver[rxSubscriberSymbol]();\n    }\n  }\n\n  if (!nextOrObserver && !error && !complete) {\n    return new Subscriber(emptyObserver);\n  }\n\n  return new Subscriber(nextOrObserver, error, complete);\n}\n","'use strict';\n\nvar url = require('url');\n\nmodule.exports = function(uri1, uri2, ieMode) {\n    if (uri1 === uri2) {\n        return true;\n    }\n\n    var url1 = url.parse(uri1, false, true);\n    var url2 = url.parse(uri2, false, true);\n\n    var url1Port = url1.port|0 || (url1.protocol === 'https' ? 443 : 80);\n    var url2Port = url2.port|0 || (url2.protocol === 'https' ? 443 : 80);\n\n    var match = {\n        proto: url1.protocol === url2.protocol,\n        hostname: url1.hostname === url2.hostname,\n        port: url1Port === url2Port\n    };\n\n    return ((match.proto && match.hostname) && (match.port || ieMode));\n};","/**\n * This file is only used for the browser version of `same-origin`.\n * Used to bring down the size of the browser bundle.\n */\n'use strict';\n\nvar regex = /^(?:(?:(?:([^:\\/#\\?]+:)?(?:(?:\\/\\/)((?:((?:[^:@\\/#\\?]+)(?:\\:(?:[^:@\\/#\\?]+))?)@)?(([^:\\/#\\?\\]\\[]+|\\[[^\\/\\]@#?]+\\])(?:\\:([0-9]+))?))?)?)?((?:\\/?(?:[^\\/\\?#]+\\/+)*)(?:[^\\?#]*)))?(\\?[^#]+)?)(#.*)?/;\n\nmodule.exports = {\n    regex: regex,\n    parse: function(url) {\n        var match = regex.exec(url);\n        if (!match) {\n            return {};\n        }\n\n        return {\n            protocol: (match[1] || '').toLowerCase() || undefined,\n            hostname: (match[5] || '').toLowerCase() || undefined,\n            port: match[6] || undefined\n        };\n    }\n};","'use strict';\n\nvar required = require('requires-port')\n  , qs = require('querystringify')\n  , slashes = /^[A-Za-z][A-Za-z0-9+-.]*:\\/\\//\n  , protocolre = /^([a-z][a-z0-9.+-]*:)?(\\/\\/)?([\\\\/]+)?([\\S\\s]*)/i\n  , windowsDriveLetter = /^[a-zA-Z]:/\n  , whitespace = '[\\\\x09\\\\x0A\\\\x0B\\\\x0C\\\\x0D\\\\x20\\\\xA0\\\\u1680\\\\u180E\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200A\\\\u202F\\\\u205F\\\\u3000\\\\u2028\\\\u2029\\\\uFEFF]'\n  , left = new RegExp('^'+ whitespace +'+');\n\n/**\n * Trim a given string.\n *\n * @param {String} str String to trim.\n * @public\n */\nfunction trimLeft(str) {\n  return (str ? str : '').toString().replace(left, '');\n}\n\n/**\n * These are the parse rules for the URL parser, it informs the parser\n * about:\n *\n * 0. The char it Needs to parse, if it's a string it should be done using\n *    indexOf, RegExp using exec and NaN means set as current value.\n * 1. The property we should set when parsing this value.\n * 2. Indication if it's backwards or forward parsing, when set as number it's\n *    the value of extra chars that should be split off.\n * 3. Inherit from location if non existing in the parser.\n * 4. `toLowerCase` the resulting value.\n */\nvar rules = [\n  ['#', 'hash'],                        // Extract from the back.\n  ['?', 'query'],                       // Extract from the back.\n  function sanitize(address, url) {     // Sanitize what is left of the address\n    return isSpecial(url.protocol) ? address.replace(/\\\\/g, '/') : address;\n  },\n  ['/', 'pathname'],                    // Extract from the back.\n  ['@', 'auth', 1],                     // Extract from the front.\n  [NaN, 'host', undefined, 1, 1],       // Set left over value.\n  [/:(\\d+)$/, 'port', undefined, 1],    // RegExp the back.\n  [NaN, 'hostname', undefined, 1, 1]    // Set left over.\n];\n\n/**\n * These properties should not be copied or inherited from. This is only needed\n * for all non blob URL's as a blob URL does not include a hash, only the\n * origin.\n *\n * @type {Object}\n * @private\n */\nvar ignore = { hash: 1, query: 1 };\n\n/**\n * The location object differs when your code is loaded through a normal page,\n * Worker or through a worker using a blob. And with the blobble begins the\n * trouble as the location object will contain the URL of the blob, not the\n * location of the page where our code is loaded in. The actual origin is\n * encoded in the `pathname` so we can thankfully generate a good \"default\"\n * location from it so we can generate proper relative URL's again.\n *\n * @param {Object|String} loc Optional default location object.\n * @returns {Object} lolcation object.\n * @public\n */\nfunction lolcation(loc) {\n  var globalVar;\n\n  if (typeof window !== 'undefined') globalVar = window;\n  else if (typeof global !== 'undefined') globalVar = global;\n  else if (typeof self !== 'undefined') globalVar = self;\n  else globalVar = {};\n\n  var location = globalVar.location || {};\n  loc = loc || location;\n\n  var finaldestination = {}\n    , type = typeof loc\n    , key;\n\n  if ('blob:' === loc.protocol) {\n    finaldestination = new Url(unescape(loc.pathname), {});\n  } else if ('string' === type) {\n    finaldestination = new Url(loc, {});\n    for (key in ignore) delete finaldestination[key];\n  } else if ('object' === type) {\n    for (key in loc) {\n      if (key in ignore) continue;\n      finaldestination[key] = loc[key];\n    }\n\n    if (finaldestination.slashes === undefined) {\n      finaldestination.slashes = slashes.test(loc.href);\n    }\n  }\n\n  return finaldestination;\n}\n\n/**\n * Check whether a protocol scheme is special.\n *\n * @param {String} The protocol scheme of the URL\n * @return {Boolean} `true` if the protocol scheme is special, else `false`\n * @private\n */\nfunction isSpecial(scheme) {\n  return (\n    scheme === 'file:' ||\n    scheme === 'ftp:' ||\n    scheme === 'http:' ||\n    scheme === 'https:' ||\n    scheme === 'ws:' ||\n    scheme === 'wss:'\n  );\n}\n\n/**\n * @typedef ProtocolExtract\n * @type Object\n * @property {String} protocol Protocol matched in the URL, in lowercase.\n * @property {Boolean} slashes `true` if protocol is followed by \"//\", else `false`.\n * @property {String} rest Rest of the URL that is not part of the protocol.\n */\n\n/**\n * Extract protocol information from a URL with/without double slash (\"//\").\n *\n * @param {String} address URL we want to extract from.\n * @param {Object} location\n * @return {ProtocolExtract} Extracted information.\n * @private\n */\nfunction extractProtocol(address, location) {\n  address = trimLeft(address);\n  location = location || {};\n\n  var match = protocolre.exec(address);\n  var protocol = match[1] ? match[1].toLowerCase() : '';\n  var forwardSlashes = !!match[2];\n  var otherSlashes = !!match[3];\n  var slashesCount = 0;\n  var rest;\n\n  if (forwardSlashes) {\n    if (otherSlashes) {\n      rest = match[2] + match[3] + match[4];\n      slashesCount = match[2].length + match[3].length;\n    } else {\n      rest = match[2] + match[4];\n      slashesCount = match[2].length;\n    }\n  } else {\n    if (otherSlashes) {\n      rest = match[3] + match[4];\n      slashesCount = match[3].length;\n    } else {\n      rest = match[4]\n    }\n  }\n\n  if (protocol === 'file:') {\n    if (slashesCount >= 2) {\n      rest = rest.slice(2);\n    }\n  } else if (isSpecial(protocol)) {\n    rest = match[4];\n  } else if (protocol) {\n    if (forwardSlashes) {\n      rest = rest.slice(2);\n    }\n  } else if (slashesCount >= 2 && isSpecial(location.protocol)) {\n    rest = match[4];\n  }\n\n  return {\n    protocol: protocol,\n    slashes: forwardSlashes || isSpecial(protocol),\n    slashesCount: slashesCount,\n    rest: rest\n  };\n}\n\n/**\n * Resolve a relative URL pathname against a base URL pathname.\n *\n * @param {String} relative Pathname of the relative URL.\n * @param {String} base Pathname of the base URL.\n * @return {String} Resolved pathname.\n * @private\n */\nfunction resolve(relative, base) {\n  if (relative === '') return base;\n\n  var path = (base || '/').split('/').slice(0, -1).concat(relative.split('/'))\n    , i = path.length\n    , last = path[i - 1]\n    , unshift = false\n    , up = 0;\n\n  while (i--) {\n    if (path[i] === '.') {\n      path.splice(i, 1);\n    } else if (path[i] === '..') {\n      path.splice(i, 1);\n      up++;\n    } else if (up) {\n      if (i === 0) unshift = true;\n      path.splice(i, 1);\n      up--;\n    }\n  }\n\n  if (unshift) path.unshift('');\n  if (last === '.' || last === '..') path.push('');\n\n  return path.join('/');\n}\n\n/**\n * The actual URL instance. Instead of returning an object we've opted-in to\n * create an actual constructor as it's much more memory efficient and\n * faster and it pleases my OCD.\n *\n * It is worth noting that we should not use `URL` as class name to prevent\n * clashes with the global URL instance that got introduced in browsers.\n *\n * @constructor\n * @param {String} address URL we want to parse.\n * @param {Object|String} [location] Location defaults for relative paths.\n * @param {Boolean|Function} [parser] Parser for the query string.\n * @private\n */\nfunction Url(address, location, parser) {\n  address = trimLeft(address);\n\n  if (!(this instanceof Url)) {\n    return new Url(address, location, parser);\n  }\n\n  var relative, extracted, parse, instruction, index, key\n    , instructions = rules.slice()\n    , type = typeof location\n    , url = this\n    , i = 0;\n\n  //\n  // The following if statements allows this module two have compatibility with\n  // 2 different API:\n  //\n  // 1. Node.js's `url.parse` api which accepts a URL, boolean as arguments\n  //    where the boolean indicates that the query string should also be parsed.\n  //\n  // 2. The `URL` interface of the browser which accepts a URL, object as\n  //    arguments. The supplied object will be used as default values / fall-back\n  //    for relative paths.\n  //\n  if ('object' !== type && 'string' !== type) {\n    parser = location;\n    location = null;\n  }\n\n  if (parser && 'function' !== typeof parser) parser = qs.parse;\n\n  location = lolcation(location);\n\n  //\n  // Extract protocol information before running the instructions.\n  //\n  extracted = extractProtocol(address || '', location);\n  relative = !extracted.protocol && !extracted.slashes;\n  url.slashes = extracted.slashes || relative && location.slashes;\n  url.protocol = extracted.protocol || location.protocol || '';\n  address = extracted.rest;\n\n  //\n  // When the authority component is absent the URL starts with a path\n  // component.\n  //\n  if (\n    extracted.protocol === 'file:' && (\n      extracted.slashesCount !== 2 || windowsDriveLetter.test(address)) ||\n    (!extracted.slashes &&\n      (extracted.protocol ||\n        extracted.slashesCount < 2 ||\n        !isSpecial(url.protocol)))\n  ) {\n    instructions[3] = [/(.*)/, 'pathname'];\n  }\n\n  for (; i < instructions.length; i++) {\n    instruction = instructions[i];\n\n    if (typeof instruction === 'function') {\n      address = instruction(address, url);\n      continue;\n    }\n\n    parse = instruction[0];\n    key = instruction[1];\n\n    if (parse !== parse) {\n      url[key] = address;\n    } else if ('string' === typeof parse) {\n      if (~(index = address.indexOf(parse))) {\n        if ('number' === typeof instruction[2]) {\n          url[key] = address.slice(0, index);\n          address = address.slice(index + instruction[2]);\n        } else {\n          url[key] = address.slice(index);\n          address = address.slice(0, index);\n        }\n      }\n    } else if ((index = parse.exec(address))) {\n      url[key] = index[1];\n      address = address.slice(0, index.index);\n    }\n\n    url[key] = url[key] || (\n      relative && instruction[3] ? location[key] || '' : ''\n    );\n\n    //\n    // Hostname, host and protocol should be lowercased so they can be used to\n    // create a proper `origin`.\n    //\n    if (instruction[4]) url[key] = url[key].toLowerCase();\n  }\n\n  //\n  // Also parse the supplied query string in to an object. If we're supplied\n  // with a custom parser as function use that instead of the default build-in\n  // parser.\n  //\n  if (parser) url.query = parser(url.query);\n\n  //\n  // If the URL is relative, resolve the pathname against the base URL.\n  //\n  if (\n      relative\n    && location.slashes\n    && url.pathname.charAt(0) !== '/'\n    && (url.pathname !== '' || location.pathname !== '')\n  ) {\n    url.pathname = resolve(url.pathname, location.pathname);\n  }\n\n  //\n  // Default to a / for pathname if none exists. This normalizes the URL\n  // to always have a /\n  //\n  if (url.pathname.charAt(0) !== '/' && isSpecial(url.protocol)) {\n    url.pathname = '/' + url.pathname;\n  }\n\n  //\n  // We should not add port numbers if they are already the default port number\n  // for a given protocol. As the host also contains the port number we're going\n  // override it with the hostname which contains no port number.\n  //\n  if (!required(url.port, url.protocol)) {\n    url.host = url.hostname;\n    url.port = '';\n  }\n\n  //\n  // Parse down the `auth` for the username and password.\n  //\n  url.username = url.password = '';\n  if (url.auth) {\n    instruction = url.auth.split(':');\n    url.username = instruction[0];\n    url.password = instruction[1] || '';\n  }\n\n  url.origin = url.protocol !== 'file:' && isSpecial(url.protocol) && url.host\n    ? url.protocol +'//'+ url.host\n    : 'null';\n\n  //\n  // The href is just the compiled result.\n  //\n  url.href = url.toString();\n}\n\n/**\n * This is convenience method for changing properties in the URL instance to\n * insure that they all propagate correctly.\n *\n * @param {String} part          Property we need to adjust.\n * @param {Mixed} value          The newly assigned value.\n * @param {Boolean|Function} fn  When setting the query, it will be the function\n *                               used to parse the query.\n *                               When setting the protocol, double slash will be\n *                               removed from the final url if it is true.\n * @returns {URL} URL instance for chaining.\n * @public\n */\nfunction set(part, value, fn) {\n  var url = this;\n\n  switch (part) {\n    case 'query':\n      if ('string' === typeof value && value.length) {\n        value = (fn || qs.parse)(value);\n      }\n\n      url[part] = value;\n      break;\n\n    case 'port':\n      url[part] = value;\n\n      if (!required(value, url.protocol)) {\n        url.host = url.hostname;\n        url[part] = '';\n      } else if (value) {\n        url.host = url.hostname +':'+ value;\n      }\n\n      break;\n\n    case 'hostname':\n      url[part] = value;\n\n      if (url.port) value += ':'+ url.port;\n      url.host = value;\n      break;\n\n    case 'host':\n      url[part] = value;\n\n      if (/:\\d+$/.test(value)) {\n        value = value.split(':');\n        url.port = value.pop();\n        url.hostname = value.join(':');\n      } else {\n        url.hostname = value;\n        url.port = '';\n      }\n\n      break;\n\n    case 'protocol':\n      url.protocol = value.toLowerCase();\n      url.slashes = !fn;\n      break;\n\n    case 'pathname':\n    case 'hash':\n      if (value) {\n        var char = part === 'pathname' ? '/' : '#';\n        url[part] = value.charAt(0) !== char ? char + value : value;\n      } else {\n        url[part] = value;\n      }\n      break;\n\n    case 'username':\n    case 'password':\n      url[part] = encodeURIComponent(value);\n      break;\n\n    case 'auth':\n      var splits = value.split(':');\n      url.username = splits[0];\n      url.password = splits.length === 2 ? splits[1] : '';\n  }\n\n  for (var i = 0; i < rules.length; i++) {\n    var ins = rules[i];\n\n    if (ins[4]) url[ins[1]] = url[ins[1]].toLowerCase();\n  }\n\n  url.auth = url.password ? url.username +':'+ url.password : url.username;\n\n  url.origin = url.protocol !== 'file:' && isSpecial(url.protocol) && url.host\n    ? url.protocol +'//'+ url.host\n    : 'null';\n\n  url.href = url.toString();\n\n  return url;\n}\n\n/**\n * Transform the properties back in to a valid and full URL string.\n *\n * @param {Function} stringify Optional query stringify function.\n * @returns {String} Compiled version of the URL.\n * @public\n */\nfunction toString(stringify) {\n  if (!stringify || 'function' !== typeof stringify) stringify = qs.stringify;\n\n  var query\n    , url = this\n    , protocol = url.protocol;\n\n  if (protocol && protocol.charAt(protocol.length - 1) !== ':') protocol += ':';\n\n  var result =\n    protocol +\n    ((url.protocol && url.slashes) || isSpecial(url.protocol) ? '//' : '');\n\n  if (url.username) {\n    result += url.username;\n    if (url.password) result += ':'+ url.password;\n    result += '@';\n  } else if (url.password) {\n    result += ':'+ url.password;\n    result += '@';\n  }\n\n  result += url.host + url.pathname;\n\n  query = 'object' === typeof url.query ? stringify(url.query) : url.query;\n  if (query) result += '?' !== query.charAt(0) ? '?'+ query : query;\n\n  if (url.hash) result += url.hash;\n\n  return result;\n}\n\nUrl.prototype = { set: set, toString: toString };\n\n//\n// Expose the URL parser and some additional properties that might be useful for\n// others or testing.\n//\nUrl.extractProtocol = extractProtocol;\nUrl.location = lolcation;\nUrl.trimLeft = trimLeft;\nUrl.qs = qs;\n\nmodule.exports = Url;\n"],"names":["self","define","EventSource","url","options","SyntaxError","this","URL","setOptions","evs","setTimeout","poll","prototype","CONNECTING","OPEN","CLOSED","defaultOptions","loggingEnabled","loggingPrefix","interval","bufferSizeLimit","silentTimeout","getArgs","evs_buffer_size_limit","xhrHeaders","Accept","option","defaults","hasOwnProperty","console","log","message","readyState","cleanup","cursor","cache","_xhr","XHR","resetNoActivityTimer","err","dispatchEvent","type","data","pollAgain","_pollTimer","clearInterval","_noActivityTimer","abort","close","_onxhrdata","request","isReady","hasError","buffer","getBuffer","length","substring","lastMessageIndex","newcursor","toparse","parseStream","isDone","chunk","i","j","eventType","datas","line","retry","events","normalizeToLF","split","parts","trimWhiteSpace","indexOf","replace","parseInt","isNaN","push","lastEventId","event","MessageEvent","join","window","location","origin","handlers","call","addEventListener","handler","removeEventListener","splice","_noactivityTimer","onerror","onmessage","onopen","urlWithParams","baseURL","params","encodedArgs","key","urlarg","urlize","encodeURIComponent","text","ln2","lastIndexOf","lr2","lrln2","Math","max","str","reTrim","isOldIE","isPolyfill","evs_preamble","XDomainRequest","_request","onprogress","_ready","onload","_loaded","_failed","ontimeout","reqGetArgs","defaultArgs","evs_last_event_id","open","send","useXDomainRequest","rv","responseText","XMLHttpRequest","onreadystatechange","status","headers","header","setRequestHeader","bubbles","cancelBubble","cancelable","Boolean","undefined","responseType","_slicedToArray","arr","Array","isArray","_arrayWithHoles","_i","Symbol","iterator","_s","_e","_arr","_n","_d","next","done","value","_iterableToArrayLimit","o","minLen","_arrayLikeToArray","n","Object","toString","slice","constructor","name","from","test","_unsupportedIterableToArray","TypeError","_nonIterableRest","len","arr2","assign","require","map","filter","queryString","validators","AssetsClient","client","toDocument","body","document","defineProperty","enumerable","get","warn","optionsFromFile","opts","file","File","filename","preserveFilename","contentType","upload","assetType","arguments","validateAssetType","meta","extract","dataset","hasDataset","clientConfig","assetEndpoint","tag","label","title","description","creditLine","source","query","sourceId","id","sourceName","sourceUrl","observable","_requestObservable","method","timeout","uri","concat","isPromiseAPI","pipe","toPromise","delete","docId","_id","getImageUrl","ref","_ref","Error","_id$split2","assetId","size","format","_this$client$clientCo","projectId","qs","module","exports","AuthClient","getLoginProviders","logout","generateHelpUrl","validate","warnings","defaultConfig","apiHost","apiVersion","useProjectHostname","gradientMode","LOCALHOSTS","initConfig","config","prevConfig","specifiedConfig","printNoApiVersionSpecifiedWarning","newConfig","projectBased","Promise","helpUrl","namespace","isBrowser","hostname","isLocalhost","host","isLocal","token","ignoreBrowserTokenWarning","printBrowserTokenWarning","useCdn","printCdnTokenWarning","printCdnWarning","requestTagPrefix","requestTag","isDefaultApi","withCredentials","validateApiVersion","cdnUrl","hostParts","protocol","cdnHost","apiDate","Date","getTime","_defineProperty","obj","configurable","writable","getSelection","encodeQueryString","Transaction","Patch","listen","excludeFalsey","param","defValue","getMutationQuery","returnIds","returnDocuments","visibility","isResponse","getBody","indexBy","docs","attr","reduce","indexed","doc","create","getDataUrl","operation","path","catalog","baseUri","fetch","mapResponse","filterResponse","res","result","_dataRequest","getDocument","json","documents","getDocuments","ids","_create","createIfNotExists","requireDocumentId","createOrReplace","patch","selector","operations","selection","dataRequest","mutations","mutate","mut","serialize","muts","transactionId","transaction","endpoint","isMutation","isQuery","strQuery","useGet","stringQuery","returnFirst","reqOptions","canUseCdn","results","op","mutation","_excluded","_objectWithoutProperties","excluded","target","sourceKeys","keys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","enc","_ref$params","_ref$options","q","base","qString","JSON","stringify","ownKeys","object","enumerableOnly","symbols","sym","getOwnPropertyDescriptor","apply","_objectSpread","forEach","getOwnPropertyDescriptors","defineProperties","Observable","polyfilledEventSource","pick","once","tokenWarning","printTokenWarning","isWindowEventSource","possibleOptions","includeResult","parseEvent","parse","cooerceError","evt","error","extractErrorMessage","_this$clientConfig","listenOpts","observer","listenFor","shouldEmitReconnect","esOptions","Authorization","reconnectTimer","es","getEventSource","stopped","onError","unsubscribe","clearTimeout","onChannelError","onMessage","onDisconnect","complete","deepAssign","validateObject","validateInsert","clone","merge","props","stack","trim","_assign","set","diffMatchPatch","unset","attrs","setIfMissing","_set","$","inc","dec","insert","at","items","_this$_assign","append","prepend","start","deleteCount","startIndex","delCount","delRange","rangeSelector","ifRevisionId","rev","ifRevisionID","toJSON","commit","reset","defaultMutateOptions","trxId","_add","documentId","validateDocumentId","patchOps","isBuilder","DatasetsClient","bind","_modify","edit","list","makeError","ClientError","extractErrorProps","super","ServerError","response","statusCode","responseBody","stringifyBody","details","statusMessage","httpErrorMessage","toLowerCase","getIt","jsonRequest","jsonResponse","progress","_require","httpError","onResponse","printWarnings","msg","implementation","httpRequest","requester","maxRedirects","defaultRequester","projectHeader","overrides","useGlobalApi","proxy","ProjectsClient","getById","dataMethods","UsersClient","getRequestOptions","_require3","SanityClient","assets","datasets","projects","users","auth","observableConfig","withConfig","getUrl","prop","sel","selectionOpts","fn","returnValue","didCall","_typeof","VALID_ASSET_TYPES","VALID_INSERT_LOCATIONS","val","signature","valid","loc","createWarningPrinter","_console","_len","args","_key","slug","const","example","parseAssetId","dimensionString","width","imgWidthStr","height","imgHeightStr","isFinite","isRef","src","isAsset","isAssetStub","parseSource","isUrl","image","asset","urlToId","img","applyDefaults","left","top","bottom","right","x","y","SPEC_NAME_TO_URL_NAME_MAPPINGS","urlForImage","spec","cropLeft","cropTop","crop","hotSpotVerticalRadius","hotSpotHorizontalRadius","hotSpotCenterX","hotSpotCenterY","hotspot","fit","specToImageUrl","baseUrl","rect","bg","flip","mapping","specName","imgWidth","imgHeight","desiredAspectRatio","hotspotXCenter","cropRect","hotspotYCenter","validFits","validCrops","validAutoModes","specs","entry","urlBuilder","isSanityClientLike","apiUrl","ImageUrlBuilder","parent","withOptions","newOptions","rewriteSpecName","dpr","focalPoint","maxWidth","minWidth","maxHeight","minHeight","blur","sharpen","invert","orientation","quality","forceDownload","download","flipHorizontal","flipVertical","ignoreImageParams","saturation","auto","pad","SanityObservableMinimal","createDeprecatedMemberOp","hasWarned","lift","operator","isObj","propIsEnumerable","toObject","assignKey","to","s","pubsub","middlewareReducer","processOptions","validateOptions","httpRequester","channelNames","middlehooks","createRequester","initMiddleware","loadedMiddleware","middleware","ware","channels","applyMiddleware","context","ongoingRequest","subscribe","ctx","newMiddleware","objectAssign","urlParse","isReactNative","navigator","has","stringifyQueryString","pairs","item","normalizeTimeout","time","delay","Number","connect","socket","removeUndefined","validUrl","isPlainObject","serializeTypes","tryParse","shouldDecode","global","onReturn","onRequest","xhr","handleProgress","percent","stage","total","loaded","lengthComputable","sameOrigin","parseHeaders","FetchXhr","win","adapter","XmlHttpRequest","hasXhr2","XDR","CrossDomainRequest","timers","cors","injectedResponse","cbTimer","isXdr","delays","aborted","timedOut","stopTimers","timeoutRequest","resetTimers","callback","reduceResponse","onLoad","code","_headers","ctrl","_controller","AbortController","textBody","signal","resBody","hook","defaultValue","bailEarly","isObject","isObjectObject","ctor","prot","construct","Reflect","captureStackTrace","BaseError","cname","container","setFunctionName","f","_","super_","properties","subscribers","subscriber","idx","publish","string","arg","headersArr","row","index","decode","input","decodeURIComponent","e","encode","prefix","undef","part","parser","exec","port","_isScalar","_subscribe","observerOrNext","sink","toSubscriber","add","useDeprecatedSynchronousErrorHandling","syncErrorThrowable","_trySubscribe","syncErrorThrown","syncErrorValue","canReportError","promiseCtor","getPromiseCtor","resolve","reject","subscription","pipeFromArray","empty","closed","hostReportError","destinationOrNext","isStopped","destination","Subscriber","SafeSubscriber","rxSubscriber","_next","_error","_complete","_unsubscribeAndRecycle","_parentOrParents","Subscription","_parentSubscriber","isFunction","_context","__tryOrSetError","__tryOrUnsub","wrappedComplete","_unsubscribe","_subscriptions","_ctorUnsubscribe","errors","remove","UnsubscriptionError","flattenUnsubscriptionErrors","sub","teardown","EMPTY","tmp","subscriptions","subscriptionIndex","errs","_enable_super_gross_mode_that_will_cause_bad_things","scheduler","schedule","emptyScheduled","DefaultIfEmptyOperator","DefaultIfEmptySubscriber","isEmpty","predicate","thisArg","FilterOperator","FilterSubscriber","count","project","MapOperator","MapSubscriber","accumulator","seed","scan","takeLast","defaultIfEmpty","acc","hasSeed","ScanOperator","ScanSubscriber","_seed","_tryNext","TakeLastOperator","ArgumentOutOfRangeError","TakeLastSubscriber","ring","random","$$rxSubscriber","ArgumentOutOfRangeErrorImpl","UnsubscriptionErrorImpl","fns","identity","prev","nextOrObserver","uri1","uri2","ieMode","url1","url2","url1Port","url2Port","match","proto","regex","required","slashes","protocolre","windowsDriveLetter","RegExp","trimLeft","rules","address","isSpecial","NaN","ignore","hash","lolcation","finaldestination","Url","unescape","pathname","href","scheme","extractProtocol","rest","forwardSlashes","otherSlashes","slashesCount","relative","extracted","instruction","instructions","charAt","last","unshift","up","username","password","pop","char","splits","ins"],"sourceRoot":""}